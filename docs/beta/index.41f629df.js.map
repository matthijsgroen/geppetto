{"mappings":"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","sources":["../player/dist/node_modules/@parcel/scope-hoisting/lib/helpers.js","../player/dist/src/prepareAnimation.ts","node_modules/@swc/helpers/src/_async_to_generator.js","node_modules/@swc/helpers/src/_define_property.js","node_modules/@swc/helpers/src/_object_spread.js","node_modules/@swc/helpers/src/_iterable_to_array.js","node_modules/@swc/helpers/src/_sliced_to_array.js","node_modules/@swc/helpers/src/_array_with_holes.js","node_modules/@swc/helpers/src/_non_iterable_rest.js","node_modules/@swc/helpers/src/_to_consumable_array.js","node_modules/@swc/helpers/src/_array_without_holes.js","node_modules/@swc/helpers/src/_non_iterable_spread.js","node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-c0344c1addf7b973.js","../player/node_modules/delaunator/index.js","../player/dist/src/buffer.ts","../player/dist/src/traverse.ts","../player/dist/src/shaders/fragmentShader-min.frag","../player/dist/src/vertices.ts","../player/dist/src/player.ts","../player/dist/src/shaders/vertexShader.ts","node_modules/@parcel/runtime-js/lib/helpers/bundle-url.js","node_modules/@parcel/runtime-js/lib/runtime-e4763802f41c73e9.js","src/assets/colortest.json","node_modules/@parcel/runtime-js/lib/runtime-b1157b3a5e1c83b5.js","src/assets/innkeeper.json","src/tween.ts","node_modules/regenerator-runtime/runtime.js","src/conversation.ts","src/animation.ts"],"sourcesContent":["var $parcel$global =\n  typeof globalThis !== 'undefined'\n    ? globalThis\n    : typeof self !== 'undefined'\n    ? self\n    : typeof window !== 'undefined'\n    ? window\n    : typeof global !== 'undefined'\n    ? global\n    : {};\n\nfunction $parcel$interopDefault(a) {\n  return a && a.__esModule ? a.default : a;\n}\n\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n}\n\nfunction $parcel$export(e, n, v) {\n  Object.defineProperty(e, n, {get: v, enumerable: true});\n}\n\nfunction $parcel$exportWildcard(dest, source) {\n  Object.keys(source).forEach(function(key) {\n    if (key === 'default' || key === '__esModule') {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function get() {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n}\n\nfunction $parcel$missingModule(name) {\n  var err = new Error(\"Cannot find module '\" + name + \"'\");\n  err.code = 'MODULE_NOT_FOUND';\n  throw err;\n}\n","import Delaunator from \"delaunator\";\nimport {\n  flatten,\n  PreparedFloatBuffer,\n  PreparedIntBuffer,\n  vectorArrayToPreparedFloatBuffer,\n} from \"./buffer\";\nimport { isMutationVector, isShapeDefinition, visitShapes } from \"./traverse\";\nimport {\n  ImageDefinition,\n  MutationVector,\n  ShapeDefinition,\n  SpriteDefinition,\n  Vec2,\n  Vec3,\n  Vec4,\n} from \"./types\";\n\nconst getAnchor = (sprite: SpriteDefinition): Vec2 => {\n  let minX = Infinity;\n  let maxX = -Infinity;\n  let minY = Infinity;\n  let maxY = -Infinity;\n  sprite.points.forEach(([x, y]) => {\n    minX = x < minX ? x : minX;\n    maxX = x > maxX ? x : maxX;\n    minY = y < minY ? y : minY;\n    maxY = y > maxY ? y : maxY;\n  });\n\n  return [(minX + maxX) / 2, (minY + maxY) / 2];\n};\n\nexport const fileredTriangles = (points: number[][]): number[] =>\n  Delaunator.from(points).triangles;\n\nconst vectorTypeMapping: { [key in MutationVector[\"type\"]]: number } = {\n  translate: 1,\n  stretch: 2,\n  rotate: 3,\n  deform: 4,\n  opacity: 5,\n  lightness: 6,\n  colorize: 7,\n  saturation: 8,\n};\n\nconst mutatorToVec4 = (mutator: MutationVector): Vec4 => [\n  vectorTypeMapping[mutator.type],\n  mutator.origin[0],\n  mutator.origin[1],\n  mutator.type === \"deform\" || mutator.type === \"translate\"\n    ? mutator.radius\n    : -1,\n];\n\nconst getParentMutation = (\n  parents: (ShapeDefinition | MutationVector)[],\n  self?: MutationVector\n): MutationVector | null => {\n  const parentShape = parents[parents.length - 1];\n  if (isShapeDefinition(parentShape)) {\n    const mutatorIndex = self ? parentShape.mutationVectors.indexOf(self) : -1;\n    if (mutatorIndex > 0) {\n      return parentShape.mutationVectors[mutatorIndex - 1];\n    }\n    for (let i = parents.length - (self ? 2 : 1); i >= 0; i--) {\n      const shape = parents[i];\n      if (\n        shape &&\n        isShapeDefinition(shape) &&\n        shape.mutationVectors.length > 0\n      ) {\n        return shape.mutationVectors[shape.mutationVectors.length - 1];\n      }\n    }\n  }\n  return null;\n};\n\nexport const createMutationList = (\n  shapes: ShapeDefinition[]\n): {\n  parentList: Int32Array;\n  vectorSettings: Vec4[];\n  shapeMutatorMapping: Record<string, number>;\n  mutatorMapping: Record<string, number>;\n} => {\n  const mutatorIndices: { name: string; index: number; parent: number }[] = [];\n  const mutators: Vec4[] = [];\n\n  const mutatorMapping: Record<string, number> = {};\n\n  visitShapes(shapes, (item, parents) => {\n    if (isMutationVector(item)) {\n      const value = mutatorToVec4(item);\n      const index = mutators.length;\n      mutators.push(value);\n\n      const parentMutation = getParentMutation(parents, item);\n      const mutatorIndex =\n        parentMutation === null\n          ? -1\n          : mutatorIndices.findIndex((e) => e.name === parentMutation.name);\n      mutatorIndices.push({ name: item.name, index, parent: mutatorIndex });\n      mutatorMapping[item.name] = mutatorIndex;\n    }\n  });\n\n  const shapeMutatorMapping: Record<string, number> = {};\n  visitShapes(shapes, (item, parents) => {\n    if (isShapeDefinition(item)) {\n      const parentMutation = getParentMutation(parents.concat(item));\n      const mutatorIndex =\n        parentMutation === null\n          ? -1\n          : mutatorIndices.findIndex((e) => e.name === parentMutation.name);\n\n      shapeMutatorMapping[item.name] = mutatorIndex;\n    }\n  });\n\n  const parentList = new Int32Array(mutators.length);\n  mutatorIndices.forEach((item, index) => {\n    parentList[index] = item.parent;\n  });\n\n  return {\n    mutatorMapping,\n    parentList,\n    vectorSettings: mutators,\n    shapeMutatorMapping,\n  };\n};\n\nconst convertAnimations = (\n  imageDefinition: ImageDefinition\n): PreparedAnimation[] => {\n  const controlNames = imageDefinition.controls.map((c) => c.name);\n  return imageDefinition.animations.map<PreparedAnimation>((a) => {\n    const tracks: [number, Float32Array][] = [];\n    const events: [number, string][] = [];\n\n    const trackControls = a.keyframes\n      .reduce<string[]>((result, frame) => {\n        if (frame.event) {\n          events.push([frame.time, frame.event]);\n        }\n        return result.concat(Object.keys(frame.controlValues));\n      }, [])\n      .filter((v, i, l) => l.indexOf(v) === i);\n\n    trackControls.forEach((controlName) => {\n      const frames: Vec2[] = [];\n      a.keyframes.forEach((frame) => {\n        const value = frame.controlValues[controlName];\n        if (value !== undefined) {\n          frames.push([frame.time, value]);\n        }\n      });\n      tracks.push([\n        controlNames.indexOf(controlName),\n        new Float32Array(flatten(frames)),\n      ]);\n    });\n\n    return {\n      name: a.name,\n      duration:\n        a.keyframes.length === 0 ? 0 : a.keyframes[a.keyframes.length - 1].time,\n      looping: a.looping,\n      tracks,\n      events,\n    };\n  });\n};\n\nexport type PreparedControl = {\n  name: string;\n  steps: number;\n};\n\nexport type PreparedShape = {\n  name: string;\n  start: number;\n  amount: number;\n  mutator: number;\n  x: number;\n  y: number;\n  z: number;\n};\n\nexport type PreparedAnimation = {\n  name: string;\n  duration: number;\n  looping: boolean;\n  tracks: [number, Float32Array][];\n  events: [number, string][];\n};\n\nexport enum MixMode {\n  MULTIPLY,\n  ADD,\n  HUE,\n}\n\ntype DirectControl = {\n  mutation: number;\n  control: number;\n  stepType: number;\n  mixMode: MixMode;\n  trackX: Float32Array;\n  trackY: Float32Array;\n};\n\nexport type PreparedImageDefinition = {\n  directControls: DirectControl[];\n  mutators: PreparedFloatBuffer;\n  mutatorParents: PreparedIntBuffer;\n  mutationValues: PreparedFloatBuffer;\n  controlMutationValues: PreparedFloatBuffer;\n  mutationValueIndices: PreparedFloatBuffer;\n  controlMutationIndices: PreparedFloatBuffer;\n  shapeVertices: PreparedFloatBuffer;\n  shapeIndices: Uint16Array;\n  shapes: PreparedShape[];\n  maxIteration: number;\n  controls: PreparedControl[];\n  defaultControlValues: Float32Array;\n  animations: PreparedAnimation[];\n};\n\nconst getMixMode = (mutType: number): MixMode =>\n  mutType === vectorTypeMapping.stretch ||\n  mutType === vectorTypeMapping.lightness ||\n  mutType === vectorTypeMapping.saturation ||\n  mutType === vectorTypeMapping.opacity\n    ? MixMode.MULTIPLY\n    : mutType === vectorTypeMapping.colorize\n    ? MixMode.HUE\n    : MixMode.ADD;\n\nconst SUPPORTED_VERSIONS = [\"1.0\", \"1.1\"];\n\n/**\n * Convert the JSON based input animation file into a preprocessed list of buffers to place into WebGL\n *\n * @param imageDefinition\n * @returns PreparedAnimation\n */\nexport const prepareAnimation = (\n  imageDefinition: ImageDefinition\n): PreparedImageDefinition => {\n  if (!SUPPORTED_VERSIONS.includes(imageDefinition.version)) {\n    throw new Error(\n      `Version ${imageDefinition.version} files are not supported`\n    );\n  }\n\n  const elements: PreparedShape[] = [];\n  const vertices: Vec4[] = [];\n  const indices: number[] = [];\n\n  visitShapes(imageDefinition.shapes, (shape) => {\n    if (shape.type !== \"sprite\") return;\n\n    const anchor = getAnchor(shape);\n    const shapeIndices = fileredTriangles(shape.points);\n    const itemOffset = [...shape.translate, elements.length * 0.1];\n    const offset = vertices.length;\n\n    elements.push({\n      name: shape.name,\n      start: indices.length * 2,\n      amount: shapeIndices.length,\n      mutator: 0,\n      x: itemOffset[0],\n      y: itemOffset[1],\n      z: -0.9 + itemOffset[2] * 0.0001,\n    });\n\n    shape.points.forEach(([x, y]) => {\n      vertices.push([x - anchor[0], y - anchor[1], x, y]);\n    });\n\n    shapeIndices.forEach((index) => {\n      indices.push(index + offset);\n    });\n  });\n\n  const mutatorInfo = createMutationList(imageDefinition.shapes);\n  const mutatorCount = mutatorInfo.parentList.length;\n  const mutators = Object.keys(mutatorInfo.mutatorMapping);\n  const controls: PreparedControl[] = [];\n\n  const mutationValues = new Float32Array(mutatorCount * 2);\n  Object.entries(imageDefinition.defaultFrame).forEach(([key, value]) => {\n    const index = mutators.indexOf(key);\n    if (index === -1) return;\n    mutationValues[index * 2] = value[0];\n    mutationValues[index * 2 + 1] = value[1];\n  });\n\n  type ControlData = {\n    name: string;\n    controlIndex: number;\n    valueStartIndex: number;\n    values: Vec2[];\n    stepType: number;\n  };\n\n  type MutationControl = {\n    [key: number]: ControlData[];\n  };\n\n  const controlMutationValueList: Vec2[] = [];\n  const mutationValueIndicesList: Vec3[] = [];\n  const controlMutationIndicesList: Vec2[] = [];\n\n  elements.forEach((element) => {\n    element.mutator = mutatorInfo.shapeMutatorMapping[element.name];\n  });\n  elements.sort((a, b) => (b.z || 0) - (a.z || 0));\n\n  const controlValues = new Float32Array(imageDefinition.controls.length);\n  const mutationControlData: MutationControl = imageDefinition.controls.reduce<MutationControl>(\n    (result, control, index) => {\n      const controlMutations = control.steps.reduce<string[]>(\n        (result, frame) =>\n          result.concat(\n            Object.keys(frame).filter((name) => !result.includes(name))\n          ),\n        []\n      );\n      controls.push({\n        name: control.name,\n        steps: control.steps.length,\n      });\n      controlValues[index] = imageDefinition.controlValues[control.name];\n      controlMutations.forEach((mutation) => {\n        const index = mutators.indexOf(mutation);\n        const values: Vec2[] = control.steps.map((k) => k[mutation]);\n        const controlIndex =\n          imageDefinition?.controls.findIndex((c) => c.name === control.name) ||\n          0;\n\n        const controlData: ControlData = {\n          name: control.name,\n          controlIndex,\n          valueStartIndex: 0,\n          values,\n          stepType: 0,\n        };\n\n        result = {\n          ...result,\n          [index]: (result[index] || []).concat(controlData),\n        };\n      });\n      return result;\n    },\n    {}\n  );\n\n  controlMutationIndicesList.length = mutatorInfo.vectorSettings.length;\n  controlMutationIndicesList.fill([0, 0]);\n\n  let maxIteration = 0;\n  const directControls: DirectControl[] = [];\n\n  Object.entries(mutationControlData).forEach(([keyAsString, controls]) => {\n    const key = parseInt(keyAsString, 10);\n    if (controls.length === 1) {\n      const control = controls[0];\n      const mutType = mutatorInfo.vectorSettings[key][0];\n\n      directControls.push({\n        mutation: key,\n        mixMode: getMixMode(mutType),\n        control: control.controlIndex,\n        stepType: control.stepType,\n        trackX: new Float32Array(\n          control.values.reduce<number[]>(\n            (result, element, index) => result.concat(index, element[0]),\n            []\n          )\n        ),\n        trackY: new Float32Array(\n          control.values.reduce<number[]>(\n            (result, element, index) => result.concat(index, element[1]),\n            []\n          )\n        ),\n      });\n      return;\n    }\n    if (controls.length === 0) {\n      return;\n    }\n    for (const control of controls) {\n      control.valueStartIndex = controlMutationValueList.length;\n      controlMutationValueList.push(...control.values);\n    }\n\n    const items: Vec3[] = controls.map<Vec3>((d) => [\n      d.valueStartIndex,\n      d.controlIndex,\n      d.stepType,\n    ]);\n\n    controlMutationIndicesList[key] = [\n      mutationValueIndicesList.length,\n      items.length,\n    ];\n    maxIteration = Math.max(maxIteration, items.length);\n    mutationValueIndicesList.push(...items);\n  });\n\n  return {\n    directControls,\n    mutators: vectorArrayToPreparedFloatBuffer(mutatorInfo.vectorSettings),\n    mutatorParents: {\n      data: mutatorInfo.parentList,\n      length: mutatorInfo.parentList.length,\n      stride: 1,\n    },\n    mutationValues: {\n      data: mutationValues,\n      length: mutatorInfo.parentList.length,\n      stride: 2,\n    },\n    controlMutationValues: vectorArrayToPreparedFloatBuffer(\n      controlMutationValueList\n    ),\n    mutationValueIndices: vectorArrayToPreparedFloatBuffer(\n      mutationValueIndicesList\n    ),\n    controlMutationIndices: vectorArrayToPreparedFloatBuffer(\n      controlMutationIndicesList\n    ),\n    defaultControlValues: controlValues,\n    shapeVertices: vectorArrayToPreparedFloatBuffer(vertices),\n    shapeIndices: new Uint16Array(indices),\n    shapes: elements,\n    controls,\n    maxIteration,\n    animations: convertAnimations(imageDefinition),\n  };\n};\n","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nexport default function _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n      args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n","export default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n","import defineProperty from './_define_property';\n\nexport default function _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}","export default function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n","import arrayWithHoles from './_array_with_holes';\nimport iterableToArrayLimit from './_iterable_to_array';\nimport nonIterableRest from './_non_iterable_rest';\n\nexport default function _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}","export default function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n","export default function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n","import arrayWithoutHoles from './_array_without_holes';\nimport iterableToArray from './_iterable_to_array';\nimport nonIterableSpread from './_non_iterable_spread';\n\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n","export default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n","\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"9iB2n\\\":\\\"index.41f629df.js\\\",\\\"bz7cM\\\":\\\"colortest.1119c264.png\\\",\\\"fwkpA\\\":\\\"innkeeper.50c2fc71.png\\\"}\"));","\nconst EPSILON = Math.pow(2, -52);\nconst EDGE_STACK = new Uint32Array(512);\n\nexport default class Delaunator {\n\n    static from(points, getX = defaultGetX, getY = defaultGetY) {\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        const n = coords.length >> 1;\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        // arrays that will store the triangulation graph\n        const maxTriangles = Math.max(2 * n - 5, 0);\n        this._triangles = new Uint32Array(maxTriangles * 3);\n        this._halfedges = new Int32Array(maxTriangles * 3);\n\n        // temporary arrays for tracking the edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hullPrev = new Uint32Array(n); // edge to prev edge\n        this._hullNext = new Uint32Array(n); // edge to next edge\n        this._hullTri = new Uint32Array(n); // edge to adjacent triangle\n        this._hullHash = new Int32Array(this._hashSize).fill(-1); // angular edge hash\n\n        // temporary arrays for sorting points\n        this._ids = new Uint32Array(n);\n        this._dists = new Float64Array(n);\n\n        this.update();\n    }\n\n    update() {\n        const {coords, _hullPrev: hullPrev, _hullNext: hullNext, _hullTri: hullTri, _hullHash: hullHash} =  this;\n        const n = coords.length >> 1;\n\n        // populate an array of point indices; calculate input data bbox\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            this._ids[i] = i;\n        }\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let minDist = Infinity;\n        let i0, i1, i2;\n\n        // pick a seed point close to the center\n        for (let i = 0; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        minDist = Infinity;\n\n        // find the point closest to the seed\n        for (let i = 0; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            // order collinear points by dx (or dy if all x are identical)\n            // and return the list as a hull\n            for (let i = 0; i < n; i++) {\n                this._dists[i] = (coords[2 * i] - coords[0]) || (coords[2 * i + 1] - coords[1]);\n            }\n            quicksort(this._ids, this._dists, 0, n - 1);\n            const hull = new Uint32Array(n);\n            let j = 0;\n            for (let i = 0, d0 = -Infinity; i < n; i++) {\n                const id = this._ids[i];\n                if (this._dists[id] > d0) {\n                    hull[j++] = id;\n                    d0 = this._dists[id];\n                }\n            }\n            this.hull = hull.subarray(0, j);\n            this.triangles = new Uint32Array(0);\n            this.halfedges = new Uint32Array(0);\n            return;\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        for (let i = 0; i < n; i++) {\n            this._dists[i] = dist(coords[2 * i], coords[2 * i + 1], center.x, center.y);\n        }\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(this._ids, this._dists, 0, n - 1);\n\n        // set up the seed triangle as the starting hull\n        this._hullStart = i0;\n        let hullSize = 3;\n\n        hullNext[i0] = hullPrev[i2] = i1;\n        hullNext[i1] = hullPrev[i0] = i2;\n        hullNext[i2] = hullPrev[i1] = i0;\n\n        hullTri[i0] = 0;\n        hullTri[i1] = 1;\n        hullTri[i2] = 2;\n\n        hullHash.fill(-1);\n        hullHash[this._hashKey(i0x, i0y)] = i0;\n        hullHash[this._hashKey(i1x, i1y)] = i1;\n        hullHash[this._hashKey(i2x, i2y)] = i2;\n\n        this.trianglesLen = 0;\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < this._ids.length; k++) {\n            const i = this._ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            let start = 0;\n            for (let j = 0, key = this._hashKey(x, y); j < this._hashSize; j++) {\n                start = hullHash[(key + j) % this._hashSize];\n                if (start !== -1 && start !== hullNext[start]) break;\n            }\n\n            start = hullPrev[start];\n            let e = start, q;\n            while (q = hullNext[e], !orient(x, y, coords[2 * e], coords[2 * e + 1], coords[2 * q], coords[2 * q + 1])) {\n                e = q;\n                if (e === start) {\n                    e = -1;\n                    break;\n                }\n            }\n            if (e === -1) continue; // likely a near-duplicate point; skip it\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e, i, hullNext[e], -1, -1, hullTri[e]);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            hullTri[i] = this._legalize(t + 2);\n            hullTri[e] = t; // keep track of boundary triangles on the hull\n            hullSize++;\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let n = hullNext[e];\n            while (q = hullNext[n], orient(x, y, coords[2 * n], coords[2 * n + 1], coords[2 * q], coords[2 * q + 1])) {\n                t = this._addTriangle(n, i, q, hullTri[i], -1, hullTri[n]);\n                hullTri[i] = this._legalize(t + 2);\n                hullNext[n] = n; // mark as removed\n                hullSize--;\n                n = q;\n            }\n\n            // walk backward from the other side, adding more triangles and flipping\n            if (e === start) {\n                while (q = hullPrev[e], orient(x, y, coords[2 * q], coords[2 * q + 1], coords[2 * e], coords[2 * e + 1])) {\n                    t = this._addTriangle(q, i, e, -1, hullTri[e], hullTri[q]);\n                    this._legalize(t + 2);\n                    hullTri[q] = t;\n                    hullNext[e] = e; // mark as removed\n                    hullSize--;\n                    e = q;\n                }\n            }\n\n            // update the hull indices\n            this._hullStart = hullPrev[i] = e;\n            hullNext[e] = hullPrev[n] = i;\n            hullNext[i] = n;\n\n            // save the two new edges in the hash table\n            hullHash[this._hashKey(x, y)] = i;\n            hullHash[this._hashKey(coords[2 * e], coords[2 * e + 1])] = e;\n        }\n\n        this.hull = new Uint32Array(hullSize);\n        for (let i = 0, e = this._hullStart; i < hullSize; i++) {\n            this.hull[i] = e;\n            e = hullNext[e];\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = this._triangles.subarray(0, this.trianglesLen);\n        this.halfedges = this._halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {_triangles: triangles, _halfedges: halfedges, coords} = this;\n\n        let i = 0;\n        let ar = 0;\n\n        // recursion eliminated with a fixed-size stack\n        while (true) {\n            const b = halfedges[a];\n\n            /* if the pair of triangles doesn't satisfy the Delaunay condition\n             * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n             * then do the same check/flip recursively for the new pair of triangles\n             *\n             *           pl                    pl\n             *          /||\\                  /  \\\n             *       al/ || \\bl            al/    \\a\n             *        /  ||  \\              /      \\\n             *       /  a||b  \\    flip    /___ar___\\\n             *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n             *        \\  ||  /              \\      /\n             *       ar\\ || /br             b\\    /br\n             *          \\||/                  \\  /\n             *           pr                    pr\n             */\n            const a0 = a - a % 3;\n            ar = a0 + (a + 2) % 3;\n\n            if (b === -1) { // convex hull edge\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n                continue;\n            }\n\n            const b0 = b - b % 3;\n            const al = a0 + (a + 1) % 3;\n            const bl = b0 + (b + 2) % 3;\n\n            const p0 = triangles[ar];\n            const pr = triangles[a];\n            const pl = triangles[al];\n            const p1 = triangles[bl];\n\n            const illegal = inCircle(\n                coords[2 * p0], coords[2 * p0 + 1],\n                coords[2 * pr], coords[2 * pr + 1],\n                coords[2 * pl], coords[2 * pl + 1],\n                coords[2 * p1], coords[2 * p1 + 1]);\n\n            if (illegal) {\n                triangles[a] = p1;\n                triangles[b] = p0;\n\n                const hbl = halfedges[bl];\n\n                // edge swapped on the other side of the hull (rare); fix the halfedge reference\n                if (hbl === -1) {\n                    let e = this._hullStart;\n                    do {\n                        if (this._hullTri[e] === bl) {\n                            this._hullTri[e] = a;\n                            break;\n                        }\n                        e = this._hullPrev[e];\n                    } while (e !== this._hullStart);\n                }\n                this._link(a, hbl);\n                this._link(b, halfedges[ar]);\n                this._link(ar, bl);\n\n                const br = b0 + (b + 1) % 3;\n\n                // don't worry about hitting the cap: it can only happen on extremely degenerate input\n                if (i < EDGE_STACK.length) {\n                    EDGE_STACK[i++] = br;\n                }\n            } else {\n                if (i === 0) break;\n                a = EDGE_STACK[--i];\n            }\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this._halfedges[a] = b;\n        if (b !== -1) this._halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this._triangles[t] = i0;\n        this._triangles[t + 1] = i1;\n        this._triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\n// return 2d orientation sign if we're confident in it through J. Shewchuk's error bound check\nfunction orientIfSure(px, py, rx, ry, qx, qy) {\n    const l = (ry - py) * (qx - px);\n    const r = (rx - px) * (qy - py);\n    return Math.abs(l - r) >= 3.3306690738754716e-16 * Math.abs(l + r) ? l - r : 0;\n}\n\n// a more robust orientation test that's stable in a given triangle (to fix robustness issues)\nfunction orient(rx, ry, qx, qy, px, py) {\n    const sign = orientIfSure(px, py, rx, ry, qx, qy) ||\n    orientIfSure(rx, ry, qx, qy, px, py) ||\n    orientIfSure(qx, qy, px, py, rx, ry);\n    return sign < 0;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = (ey * bl - dy * cl) * d;\n    const y = (dx * cl - ex * bl) * d;\n\n    return x * x + y * y;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = 0.5 / (dx * ey - dy * ex);\n\n    const x = ax + (ey * bl - dy * cl) * d;\n    const y = ay + (dx * cl - ex * bl) * d;\n\n    return {x, y};\n}\n\nfunction quicksort(ids, dists, left, right) {\n    if (right - left <= 20) {\n        for (let i = left + 1; i <= right; i++) {\n            const temp = ids[i];\n            const tempDist = dists[temp];\n            let j = i - 1;\n            while (j >= left && dists[ids[j]] > tempDist) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        let i = left + 1;\n        let j = right;\n        swap(ids, median, i);\n        if (dists[ids[left]] > dists[ids[right]]) swap(ids, left, right);\n        if (dists[ids[i]] > dists[ids[right]]) swap(ids, i, right);\n        if (dists[ids[left]] > dists[ids[i]]) swap(ids, left, i);\n\n        const temp = ids[i];\n        const tempDist = dists[temp];\n        while (true) {\n            do i++; while (dists[ids[i]] < tempDist);\n            do j--; while (dists[ids[j]] > tempDist);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, dists, i, right);\n            quicksort(ids, dists, left, j - 1);\n        } else {\n            quicksort(ids, dists, left, j - 1);\n            quicksort(ids, dists, i, right);\n        }\n    }\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","import { Vec2, Vec3, Vec4 } from \"src/types\";\n\nexport const flatten = (vectors: Vec2[] | Vec3[] | Vec4[]): number[] =>\n  ((vectors as unknown) as number[][]).reduce<number[]>(\n    (result, vec) => result.concat(vec),\n    []\n  );\n\nexport type PreparedFloatBuffer = {\n  data: Float32Array;\n  length: number;\n  stride: number;\n};\n\nexport type PreparedIntBuffer = {\n  data: Int32Array;\n  length: number;\n  stride: number;\n};\n\nexport const vectorArrayToPreparedFloatBuffer = (\n  array: Vec2[] | Vec3[] | Vec4[]\n): PreparedFloatBuffer => ({\n  data: new Float32Array(flatten(array)),\n  length: array.length,\n  stride: array[0] === undefined ? 0 : array[0].length,\n});\n","import {\n  MutationVector,\n  ShapeMutationVector,\n  ColorMutationVector,\n  ShapeDefinition,\n} from \"./types\";\n\ninterface ItemWithType {\n  type: string;\n}\n\nexport const isShapeDefinition = (\n  item: ItemWithType\n): item is ShapeDefinition => item.type === \"folder\" || item.type === \"sprite\";\n\nexport const isMutationVector = (item: ItemWithType): item is MutationVector =>\n  isShapeVector(item) || isColorVector(item);\n\nconst isShapeVector = (item: ItemWithType): item is ShapeMutationVector =>\n  item.type === \"deform\" ||\n  item.type === \"rotate\" ||\n  item.type === \"translate\" ||\n  item.type === \"stretch\" ||\n  item.type === \"opacity\";\n\nconst isColorVector = (item: ItemWithType): item is ColorMutationVector =>\n  item.type === \"lightness\" ||\n  item.type === \"saturation\" ||\n  item.type === \"colorize\";\n\nexport const visitShapes = (\n  shapes: ShapeDefinition[],\n  visitor: (\n    item: ShapeDefinition | MutationVector,\n    parents: (ShapeDefinition | MutationVector)[]\n  ) => void,\n  parents: (ShapeDefinition | MutationVector)[] = []\n): void => {\n  for (const shape of shapes) {\n    visitor(shape, parents);\n    for (const mutator of shape.mutationVectors) {\n      visitor(mutator, [...parents, shape]);\n    }\n    if (shape.type === \"folder\") {\n      visitShapes(shape.items, visitor, [...parents, shape]);\n    }\n  }\n};\n","precision mediump float;varying mediump vec2 vTextureCoord;varying lowp float vOpacity;varying lowp float vBrightness;varying lowp float vSaturation;varying lowp float vTargetHue;varying lowp float vTargetSaturation;uniform sampler2D uSampler;uniform mediump vec2 uTextureDimensions;float A(vec3 B){lowp float C=min(min(B.r,B.g),B.b);lowp float D=max(max(B.r,B.g),B.b);return(D+C)/2.;}float E(lowp float F,lowp float G,lowp float H){if(H<0.)H+=1.;else if(H>1.)H-=1.;lowp float I;if((6.*H)<1.)I=F+(G-F)*6.*H;else if((2.*H)<1.)I=G;else if((3.*H)<2.)I=F+(G-F)*((2./3.)-H)*6.;else I=F;return I;}vec3 J(vec3 K){lowp vec3 L;if(K.y==0.)L=vec3(K.z);else{lowp float G;if(K.z<0.5)G=K.z*(1.+K.y);else G=(K.z+K.y)-(K.y*K.z);float F=2.*K.z-G;L.r=E(F,G,K.x+(1./3.));L.g=E(F,G,K.x);L.b=E(F,G,K.x-(1./3.));}return L;}void main(void){highp vec2 M=vTextureCoord.xy/uTextureDimensions;mediump vec4 N=texture2D(uSampler,M);vec3 B=N.rgb;float O=A(B);B=mix(B,J(vec3(vTargetHue,vTargetSaturation,O)),1.-vSaturation)*vBrightness;gl_FragColor=vec4(B*N.a*vOpacity,N.a*vOpacity);}","export const mix = (a: number, b: number, factor: number): number =>\n  a * (1 - factor) + b * factor;\n\nexport const mixHue = (a: number, b: number, factor: number): number => {\n  const d = Math.abs(a - b);\n  let aa = a;\n  let ba = b;\n\n  if (a < b && Math.abs(a + 1 - b) < d) {\n    aa += 1;\n  }\n  if (a > b && Math.abs(b - a + 1) < d) {\n    ba += 1;\n  }\n  return mix(aa, ba, factor) % 1;\n};\n\nexport const interpolateFloat = (\n  track: Float32Array,\n  position: number,\n  startValue = 0,\n  mixer = mix\n): number => {\n  for (let i = 0; i < track.length; i += 2) {\n    if (track[i] > position) {\n      const previousPos = i > 1 ? track[i - 2] : 0;\n      const previousValue = i > 1 ? track[i - 1] : startValue;\n      const mix = (position - previousPos) / (track[i] - previousPos);\n      return mixer(previousValue, track[i + 1], mix);\n    }\n  }\n\n  return track[track.length - 1];\n};\n","import { PreparedFloatBuffer, PreparedIntBuffer } from \"./buffer\";\nimport { MixMode, PreparedImageDefinition } from \"./prepareAnimation\";\nimport animationFragmentShader from \"./shaders/fragmentShader-min.frag\";\nimport { animationVertexShader } from \"./shaders/vertexShader\";\nimport { interpolateFloat, mixHue } from \"./vertices\";\n\n/**\n * Function to call for unsubscribing to an event listener\n */\nexport type Unsubscribe = () => void;\n\ntype TrackStoppedCallback = (track: string) => void;\ntype CustomEventCallback = (\n  eventName: string,\n  track: string,\n  time: number\n) => void;\n\nexport type PlayOptions = {\n  /**\n   * Start animation at given ms.\n   */\n  startAt?: number;\n  /**\n   * Playback speed.\n   * @default 1.0\n   */\n  speed?: number;\n};\n\n/**\n * Options to control the animation, start animation tracks, etc.\n */\nexport type AnimationControls = {\n  /**\n   * Render a frame of the image.\n   */\n  render: () => void;\n\n  /**\n   * Set the looping state of an animation track.\n   *\n   * The default value is based on how the animation is build.\n   *\n   * @param loop true for looping, false to stop looping.\n   * @param trackName the name of the animation track to adjust.\n   * @throws an error if the provided trackName does not exist\n   */\n  setLooping(loop: boolean, trackName: string): void;\n\n  /**\n   * Start an animation. Conflicting animations will be automatically stopped.\n   *\n   * @param trackName the name of the animation track to start.\n   * If the name is not valid, an exception will be thrown\n   * indicating what animation names are available.\n   * @throws an error if the provided trackName does not exist\n   */\n  startTrack(trackName: string, options?: PlayOptions): void;\n\n  /**\n   * Stop an animation.\n   *\n   * @param trackName the name of the animation track to start.\n   * If the name is not valid, an exception will be thrown\n   * indicating what animation names are available.\n   */\n  stopTrack(trackName: string): void;\n\n  /**\n   * Manipulates a control. Will stop animations that are using this control as well.\n   *\n   * @param controlName name of the control to change\n   * @param value value to set for control. Take into account that each control can have different\n   * value limits, depending on the amount of step a control has.\n   * @throws an error if the provided controlName does not exist\n   */\n  setControlValue(controlName: string, value: number): void;\n\n  /**\n   * Retreives current value of a control. This value will not update for each frame\n   * of an animation. It will only update at the end of each play iteration of an animation.\n   *\n   * @param controlName name of the control to get value from\n   * @return value of the control. Take into account that each control can have different\n   * value limits, depending on the amount of step a control has.\n   */\n  getControlValue(controlName: string): number;\n\n  /**\n   * Update the panning of the animation.\n   *\n   * @param panX value of horizontal panning. See {@link AnimationOptions.panX}\n   * @param panY value of vertical panning. See {@link AnimationOptions.panY}\n   */\n  setPanning(panX: number, panY: number): void;\n\n  /**\n   * Update the zoom\n   *\n   * @param zoom See {@link AnimationOptions.zoom}\n   */\n  setZoom(zoom: number): void;\n  setZIndex(zIndex: number): void;\n\n  onTrackStopped(callback: TrackStoppedCallback): Unsubscribe;\n  onEvent(callback: CustomEventCallback): Unsubscribe;\n\n  /**\n   * Clears all memory associated to this animation.\n   */\n  destroy(): void;\n};\n\n/**\n * Options to set directly when adding an animation.\n */\nexport interface AnimationOptions {\n  /**\n   * Horizontal position of image in canvas. `0` = center, `-1` = left, `1` = right.\n   *\n   * @default 0.0\n   */\n  panX: number;\n  /**\n   * Vertical position of image in canvas. `0` = center, `-1` = bottom, `1` = top.\n   *\n   * @default 0.0\n   */\n  panY: number;\n  /**\n   * Zoom level. `1` = 100%, `1.5` is 150%, `0.5` = 50% zoom.\n   *\n   * @default 1.0\n   */\n  zoom: number;\n  /**\n   * Adds a stacking order to the rendering elements, this helps when\n   * stacking multiple animations on top of eachother.\n   *\n   * @default 0\n   */\n  zIndex: number;\n}\n\nconst DEFAULT_OPTIONS: AnimationOptions = {\n  zoom: 1.0,\n  panX: 0.0,\n  panY: 0.0,\n  zIndex: 0,\n};\n\ntype PlayStatus = {\n  name: string;\n  index: number;\n  startAt: number;\n  speed: number;\n  startedAt: number;\n  iterationStartedAt: number;\n  lastRender: number;\n};\n\n/**\n * A player to add Gepetto animations to.\n */\nexport type GeppettoPlayer = {\n  /**\n   * Clears the canvas. Use this when you created the player with {@link setupWebGL}.\n   * If you want to control the rendering process (and the clearing of the canvas) yourself,\n   * skip the call to this method in your render cycle.\n   */\n  render: () => void;\n\n  /**\n   * Add a Geppetto animation to the player.\n   *\n   * @param animation an animation prepared with {@link prepareAnimation}.\n   * @param image a HTML Image element with loaded url to use as texture.\n   * @param textureUnit The texture unit to use you can use `0` for your first animation,\n   * `1` for your second, etc.\n   * @param options\n   */\n  addAnimation(\n    animation: PreparedImageDefinition,\n    image: HTMLImageElement,\n    textureUnit: number,\n    options?: Partial<AnimationOptions>\n  ): AnimationControls;\n\n  /**\n   * Destroys all animations added to this player.\n   */\n  destroy: () => void;\n};\n\nconst getContext = (element: HTMLCanvasElement): WebGLRenderingContext => {\n  const gl = element.getContext(\"webgl\", {\n    premultipliedalpha: true,\n    depth: true,\n    antialias: true,\n    powerPreference: \"low-power\",\n  }) as WebGLRenderingContext;\n\n  if (!gl) {\n    throw new Error(\"Canvas has no webgl context available\");\n  }\n  return gl;\n};\n\n/**\n * Initializes the WebGL Context of a provided context. Configures the context and returns\n * a GeppettoPlayer bound to this element.\n *\n * Use this method if you only render Geppetto Animations in your Canvas.\n * Use {@link createPlayer} if you want your own control over the canvas configuration\n *\n * @param element the Canvas DOM element that is not yet initialized with a context\n */\nexport const setupWebGL = (element: HTMLCanvasElement): GeppettoPlayer => {\n  const gl = getContext(element);\n\n  gl.clearColor(0.0, 0.0, 0.0, 1.0);\n  gl.enable(gl.DEPTH_TEST);\n  gl.enable(gl.BLEND);\n  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n  return createPlayer(element);\n};\n\nconst setupWebGLProgram = (\n  gl: WebGLRenderingContext,\n  animation: PreparedImageDefinition\n): [WebGLProgram, WebGLShader, WebGLShader] => {\n  const program = gl.createProgram();\n  if (!program) throw new Error(\"Failed to create shader program\");\n\n  const vertexShaderSource = animationVertexShader(animation);\n\n  const vs = gl.createShader(gl.VERTEX_SHADER);\n  const fs = gl.createShader(gl.FRAGMENT_SHADER);\n  if (!vs || !fs) {\n    gl.deleteProgram(program);\n    gl.deleteShader(vs);\n    gl.deleteShader(fs);\n    throw new Error(\"Failed to create shader program\");\n  }\n\n  gl.shaderSource(vs, vertexShaderSource);\n  gl.shaderSource(fs, animationFragmentShader);\n  gl.compileShader(vs);\n  gl.compileShader(fs);\n\n  gl.attachShader(program, vs);\n  gl.attachShader(program, fs);\n  gl.linkProgram(program);\n\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    console.error(\"Link failed: \" + gl.getProgramInfoLog(program));\n    console.error(\"vs info-log: \" + gl.getShaderInfoLog(vs));\n    console.error(\"fs info-log: \" + gl.getShaderInfoLog(fs));\n    throw new Error(\"Could not initialise shaders\");\n  }\n\n  return [program, vs, fs];\n};\n\nconst setProgramBuffer = (gl: WebGLRenderingContext, program: WebGLProgram) => (\n  uniform: string,\n  buffer: PreparedFloatBuffer | PreparedIntBuffer\n) => {\n  const uniformLocation = gl.getUniformLocation(program, uniform);\n  const stride = buffer.stride;\n\n  if (stride == 2) {\n    gl.uniform2fv(uniformLocation, buffer.data);\n  } else if (stride == 3) {\n    gl.uniform3fv(uniformLocation, buffer.data);\n  } else if (stride == 4) {\n    gl.uniform4fv(uniformLocation, buffer.data);\n  }\n  return uniformLocation;\n};\n\nconst setupTexture = (\n  gl: WebGLRenderingContext,\n  program: WebGLProgram,\n  image: HTMLImageElement\n): WebGLTexture | null => {\n  const texture = gl.createTexture();\n  gl.bindTexture(gl.TEXTURE_2D, texture);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n  gl.useProgram(program);\n  gl.uniform2f(\n    gl.getUniformLocation(program, \"uTextureDimensions\"),\n    image.width,\n    image.height\n  );\n\n  return texture;\n};\n\n/**\n * Initializes a player to display in an existing WebGL Environment.\n * Use this function to create a player if you want to have full control over the\n * rendering process (possibly to combine with other render code).\n *\n * @param element the Canvas DOM element containing a WebGL Context\n */\nexport const createPlayer = (element: HTMLCanvasElement): GeppettoPlayer => {\n  const gl = getContext(element);\n\n  const animations: AnimationControls[] = [];\n  let onTrackStoppedListeners: TrackStoppedCallback[] = [];\n  let onCustomEventListeners: CustomEventCallback[] = [];\n\n  return {\n    render: () => {\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n      gl.viewport(0, 0, element.width, element.height);\n    },\n    addAnimation: (animation, image, textureUnit, options) => {\n      const unit = [\n        gl.TEXTURE0,\n        gl.TEXTURE1,\n        gl.TEXTURE2,\n        gl.TEXTURE3,\n        gl.TEXTURE4,\n        gl.TEXTURE5,\n        gl.TEXTURE6,\n        gl.TEXTURE7,\n        gl.TEXTURE8,\n        gl.TEXTURE9,\n      ][textureUnit];\n      const [program, vs, fs] = setupWebGLProgram(gl, animation);\n      // 3. Load texture\n      gl.useProgram(program);\n      const texture = setupTexture(gl, program, image);\n\n      // 4. Set Uniforms\n      const parentLocation = gl.getUniformLocation(program, \"uMutParent\");\n      gl.uniform1iv(parentLocation, animation.mutatorParents.data);\n\n      const setBuffer = setProgramBuffer(gl, program);\n      const mutationValuesLocation = setBuffer(\n        \"uMutValues\",\n        animation.mutationValues\n      );\n      setBuffer(\"uMutVectors\", animation.mutators);\n      setBuffer(\"uControlMutValues\", animation.controlMutationValues);\n      setBuffer(\"uMutValueIndices\", animation.mutationValueIndices);\n      setBuffer(\"uControlMutIndices\", animation.controlMutationIndices);\n\n      const uControlValues = gl.getUniformLocation(program, \"uControlValues\");\n      gl.uniform1fv(uControlValues, animation.defaultControlValues);\n\n      const controlValues = new Float32Array(animation.defaultControlValues);\n      const renderControlValues = new Float32Array(\n        animation.defaultControlValues\n      );\n\n      // 5. Set shape buffers\n      const vertexBuffer = gl.createBuffer();\n      const indexBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n      gl.bufferData(\n        gl.ARRAY_BUFFER,\n        animation.shapeVertices.data,\n        gl.STATIC_DRAW\n      );\n      gl.bindBuffer(gl.ARRAY_BUFFER, null);\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n      gl.bufferData(\n        gl.ELEMENT_ARRAY_BUFFER,\n        animation.shapeIndices,\n        gl.STATIC_DRAW\n      );\n      gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, null);\n\n      // Get locations for rendering\n      const uBasePosition = gl.getUniformLocation(program, \"basePosition\");\n      const uTranslate = gl.getUniformLocation(program, \"translate\");\n      const uMutation = gl.getUniformLocation(program, \"mutation\");\n      const uViewport = gl.getUniformLocation(program, \"viewport\");\n      const uScale = gl.getUniformLocation(program, \"scale\");\n\n      const aCoord = gl.getAttribLocation(program, \"coordinates\");\n      const aTexCoord = gl.getAttribLocation(program, \"aTextureCoord\");\n\n      let cWidth = 0,\n        cHeight = 0;\n\n      let { zoom, panX, panY, zIndex } = { ...DEFAULT_OPTIONS, ...options };\n      let basePosition = [0, 0];\n      let scale = 1.0;\n\n      const playingAnimations: PlayStatus[] = [];\n      const trackNames = animation.animations.map((a) => a.name);\n      const controlNames = animation.controls.map((a) => a.name);\n      const looping: boolean[] = animation.animations.map((a) => a.looping);\n\n      const stopTrack = (track: string): void => {\n        // Remove from playing list\n        const playingIndex = playingAnimations.findIndex(\n          (e) => e.name === track\n        );\n        if (playingIndex === -1) return;\n        const playing = playingAnimations[playingIndex];\n\n        const now = +new Date();\n        let playTime = now - playing.startedAt + playing.startAt;\n\n        const playingAnimation = animation.animations[playing.index];\n        if (looping[playing.index]) {\n          playTime %= playingAnimation.duration;\n        }\n        playingAnimations.splice(playingIndex, 1);\n\n        // place current active control values in control values list\n        for (const [controlIndex, track] of playingAnimation.tracks) {\n          const value = interpolateFloat(\n            track,\n            playTime,\n            controlValues[controlIndex]\n          );\n          controlValues[controlIndex] = value;\n        }\n\n        for (const listener of onTrackStoppedListeners) {\n          listener(track);\n        }\n      };\n\n      const nameToControlIndex = (controlName: string): number => {\n        const controlIndex = controlNames.indexOf(controlName);\n        if (controlIndex === -1) {\n          throw new Error(\n            `Control ${controlName} does not exist in ${controlNames.join(\",\")}`\n          );\n        }\n        return controlIndex;\n      };\n\n      const nameToTrackIndex = (trackName: string): number => {\n        const trackIndex = trackNames.indexOf(trackName);\n        if (trackIndex === -1) {\n          throw new Error(\n            `Track ${trackName} does not exist in ${trackNames.join(\",\")}`\n          );\n        }\n        return trackIndex;\n      };\n\n      const setControlValue: AnimationControls[\"setControlValue\"] = (\n        control,\n        value\n      ) => {\n        const controlIndex = nameToControlIndex(control);\n\n        const maxValue = animation.controls[controlIndex].steps - 1;\n        if (value < 0 || value > maxValue) {\n          throw new Error(\n            `Control ${control} value shoulde be between 0 and ${maxValue}. ${value} is out of bounds.`\n          );\n        }\n        // stop all conflicting tracks\n        for (const playing of playingAnimations) {\n          const playingAnimation = animation.animations[playing.index];\n          if (\n            playingAnimation.tracks.some(\n              ([controlNr]) => controlNr === controlIndex\n            )\n          ) {\n            stopTrack(trackNames[playing.index]);\n          }\n        }\n\n        controlValues[controlIndex] = value;\n        renderControlValues[controlIndex] = value;\n      };\n\n      const newAnimation: AnimationControls = {\n        destroy() {\n          gl.deleteShader(vs);\n          gl.deleteShader(fs);\n          gl.deleteProgram(program);\n          gl.deleteTexture(texture);\n          gl.deleteBuffer(vertexBuffer);\n          gl.deleteBuffer(indexBuffer);\n          animations.splice(animations.indexOf(newAnimation), 1);\n        },\n        setLooping(loop, track) {\n          const trackIndex = nameToTrackIndex(track);\n          looping[trackIndex] = loop;\n        },\n        startTrack(track, { startAt = 0, speed = 1 } = {}) {\n          const trackIndex = nameToTrackIndex(track);\n          const animationControls = animation.animations[trackIndex].tracks.map(\n            ([controlNr]) => controlNr\n          );\n\n          // stop all conflicting tracks\n          for (const playing of playingAnimations) {\n            const playingAnimation = animation.animations[playing.index];\n            if (\n              playingAnimation.tracks.some(([controlNr]) =>\n                animationControls.includes(controlNr)\n              )\n            ) {\n              stopTrack(trackNames[playing.index]);\n            }\n          }\n\n          playingAnimations.push({\n            name: track,\n            index: trackIndex,\n            startAt,\n            speed,\n            startedAt: +new Date(),\n            iterationStartedAt: +new Date() - startAt / speed,\n            lastRender: 0,\n          });\n        },\n        stopTrack,\n        setControlValue,\n        getControlValue: (controlName) =>\n          controlValues[nameToControlIndex(controlName)],\n        setPanning(newPanX, newPanY) {\n          panX = newPanX;\n          panY = newPanY;\n        },\n        setZoom(newZoom) {\n          zoom = newZoom;\n        },\n        setZIndex(newZIndex) {\n          zIndex = newZIndex;\n        },\n        render() {\n          gl.useProgram(program);\n          gl.bindBuffer(gl.ARRAY_BUFFER, vertexBuffer);\n          gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, indexBuffer);\n\n          gl.vertexAttribPointer(\n            aCoord,\n            2,\n            gl.FLOAT,\n            false,\n            Float32Array.BYTES_PER_ELEMENT * 4,\n            /* offset */ 0\n          );\n          gl.enableVertexAttribArray(aCoord);\n          gl.vertexAttribPointer(\n            aTexCoord,\n            2,\n            gl.FLOAT,\n            false,\n            Float32Array.BYTES_PER_ELEMENT * 4,\n            /* offset */ 2 * Float32Array.BYTES_PER_ELEMENT\n          );\n          gl.enableVertexAttribArray(aTexCoord);\n\n          if (element.width !== cWidth || element.height !== cHeight) {\n            const canvasWidth = element.width;\n            const canvasHeight = element.height;\n            const landscape =\n              image.width / canvasWidth > image.height / canvasHeight;\n\n            scale = landscape\n              ? canvasWidth / image.width\n              : canvasHeight / image.height;\n\n            gl.uniform2f(uViewport, canvasWidth, canvasHeight);\n\n            basePosition = [canvasWidth / 2 / scale, canvasHeight / 2 / scale];\n            cWidth = element.width;\n            cHeight = element.height;\n          }\n\n          gl.uniform4f(uScale, scale, zoom, panX, panY);\n\n          gl.activeTexture(unit);\n          gl.bindTexture(gl.TEXTURE_2D, texture);\n          gl.uniform1i(gl.getUniformLocation(program, \"uSampler\"), textureUnit);\n\n          gl.uniform3f(\n            uBasePosition,\n            basePosition[0],\n            basePosition[1],\n            zIndex * 0.01\n          );\n\n          const now = +new Date();\n          for (const playing of playingAnimations) {\n            const playTime = (now - playing.iterationStartedAt) * playing.speed;\n            const playingAnimation = animation.animations[playing.index];\n\n            const playPosition = playTime % playingAnimation.duration;\n\n            if (playingAnimation.duration < playTime) {\n              if (!looping[playing.index]) {\n                stopTrack(playingAnimation.name);\n                continue;\n              }\n              playing.iterationStartedAt = now - playPosition;\n\n              // Store current value as start value of next iteration\n              for (const [controlIndex] of playingAnimation.tracks) {\n                controlValues[controlIndex] = renderControlValues[controlIndex];\n              }\n            }\n\n            for (const [time, event] of playingAnimation.events) {\n              const absTime = playing.iterationStartedAt + time / playing.speed;\n              if (absTime < now && absTime > playing.lastRender) {\n                for (const handler of onCustomEventListeners) {\n                  handler(event, playing.name, time);\n                }\n              }\n            }\n            playing.lastRender = now;\n\n            for (const [controlIndex, track] of playingAnimation.tracks) {\n              const value = interpolateFloat(\n                track,\n                playPosition,\n                controlValues[controlIndex]\n              );\n              renderControlValues[controlIndex] = value;\n            }\n          }\n          const updatedMutationValues = Float32Array.from(\n            animation.mutationValues.data\n          );\n          for (const data of animation.directControls) {\n            const ctrlValue = renderControlValues[data.control];\n            const xValue = interpolateFloat(data.trackX, ctrlValue);\n            const yValue = interpolateFloat(data.trackY, ctrlValue);\n            if (data.mixMode === MixMode.MULTIPLY) {\n              updatedMutationValues[data.mutation * 2] *= xValue;\n              updatedMutationValues[data.mutation * 2 + 1] *= yValue;\n            } else if (data.mixMode === MixMode.ADD) {\n              updatedMutationValues[data.mutation * 2] += xValue;\n              updatedMutationValues[data.mutation * 2 + 1] += yValue;\n            } else {\n              const hue = interpolateFloat(data.trackX, ctrlValue, 0, mixHue);\n              updatedMutationValues[data.mutation * 2] = hue;\n              updatedMutationValues[data.mutation * 2 + 1] *= yValue;\n            }\n          }\n          gl.uniform2fv(mutationValuesLocation, updatedMutationValues);\n\n          gl.uniform1fv(uControlValues, renderControlValues);\n\n          for (const shape of animation.shapes) {\n            gl.uniform3f(uTranslate, shape.x, shape.y, shape.z);\n            gl.uniform1f(uMutation, shape.mutator);\n            gl.drawElements(\n              gl.TRIANGLES,\n              shape.amount,\n              gl.UNSIGNED_SHORT,\n              shape.start\n            );\n          }\n        },\n        onTrackStopped(callback) {\n          onTrackStoppedListeners = onTrackStoppedListeners.concat(callback);\n          return () => {\n            onTrackStoppedListeners = onTrackStoppedListeners.filter(\n              (item) => item !== callback\n            );\n          };\n        },\n        onEvent(callback) {\n          onCustomEventListeners = onCustomEventListeners.concat(callback);\n          return () => {\n            onCustomEventListeners = onCustomEventListeners.filter(\n              (item) => item !== callback\n            );\n          };\n        },\n      };\n      animations.push(newAnimation);\n\n      return newAnimation;\n    },\n    destroy() {\n      for (const anim of animations) {\n        anim.destroy();\n      }\n      animations.length = 0;\n    },\n  };\n};\n","import { PreparedImageDefinition } from \"src/prepareAnimation\";\nimport shader from \"./vertexShader-min.vert\";\n\nexport const animationVertexShader = (\n  animation: PreparedImageDefinition\n): string => `\n#define MAX_MUT ${animation.mutators.length}\n#define MAX_IT ${animation.maxIteration}\nuniform vec2 uControlMutValues[${animation.controlMutationValues.length}];\nuniform vec3 uMutValueIndices[${animation.mutationValueIndices.length}];\nuniform vec2 uControlMutIndices[${animation.controlMutationIndices.length}];\nuniform float uControlValues[${animation.controls.length}];\n${shader}\n`;\n","\"use strict\";\n\nvar bundleURL = {};\n\nfunction getBundleURLCached(id) {\n  var value = bundleURL[id];\n\n  if (!value) {\n    value = getBundleURL();\n    bundleURL[id] = value;\n  }\n\n  return value;\n}\n\nfunction getBundleURL() {\n  try {\n    throw new Error();\n  } catch (err) {\n    var matches = ('' + err.stack).match(/(https?|file|ftp):\\/\\/[^)\\n]+/g);\n\n    if (matches) {\n      // The first two stack frames will be this function and getBundleURLCached.\n      // Use the 3rd one, which will be a runtime in the original bundle.\n      return getBaseURL(matches[2]);\n    }\n  }\n\n  return '/';\n}\n\nfunction getBaseURL(url) {\n  return ('' + url).replace(/^((?:https?|file|ftp):\\/\\/.+)\\/[^/]+$/, '$1') + '/';\n} // TODO: Replace uses with `new URL(url).origin` when ie11 is no longer supported.\n\n\nfunction getOrigin(url) {\n  var matches = ('' + url).match(/(https?|file|ftp):\\/\\/[^/]+/);\n\n  if (!matches) {\n    throw new Error('Origin not found');\n  }\n\n  return matches[0];\n}\n\nexports.getBundleURL = getBundleURLCached;\nexports.getBaseURL = getBaseURL;\nexports.getOrigin = getOrigin;","module.exports = require('./helpers/bundle-url').getBundleURL('9iB2n') + require('./helpers/bundle-manifest').resolve(\"bz7cM\");","{\"animations\":[{\"name\":\"Wheel\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"WheelRotate\":1}},{\"time\":19200,\"controlValues\":{\"WheelRotate\":0}}]},{\"name\":\"Tree\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"TreeLeaves1\":0}},{\"time\":500,\"controlValues\":{\"TreeLeaves2\":0}},{\"time\":8000,\"controlValues\":{\"TreeLeaves1\":1}},{\"time\":8500,\"controlValues\":{\"TreeLeaves2\":1}},{\"time\":16000,\"controlValues\":{\"TreeLeaves1\":0,\"TreeLeaves2\":0.04}}]},{\"name\":\"Bird\",\"looping\":true,\"keyframes\":[{\"time\":6000,\"controlValues\":{\"Beak\":0}},{\"time\":6200,\"controlValues\":{\"Beak\":1}},{\"time\":7000,\"controlValues\":{\"Beak\":1}},{\"time\":7200,\"controlValues\":{\"Beak\":0}}]},{\"name\":\"Cloud1\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"Cloud1\":0.5}},{\"time\":20000,\"controlValues\":{\"Cloud1\":1}},{\"time\":20001,\"controlValues\":{\"Cloud1\":0}},{\"time\":40000,\"controlValues\":{\"Cloud1\":0.5}}]},{\"name\":\"Eyes\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"EyesBlink\":0}},{\"time\":3000,\"controlValues\":{\"EyesBlink\":0}},{\"time\":3300,\"controlValues\":{\"EyesBlink\":1}},{\"time\":3500,\"controlValues\":{\"EyesBlink\":1}},{\"time\":3700,\"controlValues\":{\"EyesBlink\":0}}]},{\"name\":\"ButterflyWings\",\"looping\":true,\"keyframes\":[{\"time\":300,\"controlValues\":{\"ButterflyWings\":1}},{\"time\":600,\"controlValues\":{\"ButterflyWings\":0}}]},{\"name\":\"Smoke\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"Rook\":0,\"Smoke\":0}},{\"time\":10000,\"controlValues\":{\"Rook\":1,\"Smoke\":1}}]},{\"name\":\"Cloud2\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"Cloud2\":0.8}},{\"time\":30000,\"controlValues\":{\"Cloud2\":0}},{\"time\":30001,\"controlValues\":{\"Cloud2\":1}},{\"time\":40000,\"controlValues\":{\"Cloud2\":0.8}}]},{\"name\":\"Cloud3\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"Cloud3\":0.2}},{\"time\":10000,\"controlValues\":{\"Cloud3\":0}},{\"time\":10001,\"controlValues\":{\"Cloud3\":1}},{\"time\":40000,\"controlValues\":{\"Cloud3\":0.2}}]},{\"name\":\"WheelBlades\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"WheelBlades\":0}},{\"time\":1600,\"controlValues\":{\"WheelBlades\":1}}]},{\"name\":\"Water\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"Bubble\":1.6,\"Bubble2\":0.9,\"Bubble3\":0.3}},{\"time\":400,\"controlValues\":{\"Bubble\":2}},{\"time\":401,\"controlValues\":{\"Bubble\":0}},{\"time\":1600,\"controlValues\":{\"Bubble2\":1.6,\"Bubble3\":0.9,\"Bubble\":0.3}},{\"time\":2000,\"controlValues\":{\"Bubble2\":2}},{\"time\":2001,\"controlValues\":{\"Bubble2\":0}},{\"time\":3200,\"controlValues\":{\"Bubble3\":1.6,\"Bubble\":0.9,\"Bubble2\":0.3}},{\"time\":3600,\"controlValues\":{\"Bubble3\":2}},{\"time\":3601,\"controlValues\":{\"Bubble3\":0}},{\"time\":4800,\"controlValues\":{\"Bubble2\":0.9,\"Bubble3\":0.3,\"Bubble\":1.6}}]},{\"name\":\"Day night\",\"looping\":true,\"keyframes\":[{\"time\":0,\"controlValues\":{\"DayNight\":0}},{\"time\":4000,\"controlValues\":{\"DayNight\":0.36},\"event\":\"evening\"},{\"time\":15000,\"controlValues\":{\"DayNight\":2}},{\"time\":19000,\"controlValues\":{\"DayNight\":2},\"event\":\"endNight\"},{\"time\":30000,\"controlValues\":{\"DayNight\":3.8}},{\"time\":34000,\"controlValues\":{\"DayNight\":4}},{\"time\":40000,\"controlValues\":{\"DayNight\":4}}]},{\"name\":\"LightFlicker\",\"looping\":true,\"keyframes\":[{\"time\":630,\"controlValues\":{\"Light\":0.72}},{\"time\":1210,\"controlValues\":{\"Light\":0.78}},{\"time\":1870,\"controlValues\":{\"Light\":0.69}},{\"time\":2610,\"controlValues\":{\"Light\":0.89}}]},{\"name\":\"LightOff\",\"looping\":false,\"keyframes\":[{\"time\":1260,\"controlValues\":{\"Light\":0}}]}],\"controlValues\":{\"WheelRotate\":0.78,\"TreeLeaves1\":0,\"TreeLeaves2\":0.19,\"Beak\":0,\"Cloud1\":0.5,\"EyesBlink\":0,\"ButterflyWings\":0,\"Rook\":1,\"Cloud2\":0.8,\"Cloud3\":1,\"DayNight\":0,\"Butterflyturn\":1,\"ButterflyZoom\":1,\"ButterflyX\":0.49,\"ButterflyY\":0.29,\"ButterflyTurn\":0,\"WheelBlades\":0.66,\"Smoke\":0,\"Buble\":1.46,\"Bubble\":0.3,\"Bubble2\":0.9,\"Bubble3\":1.56,\"Light\":0},\"controls\":[{\"name\":\"Light\",\"type\":\"slider\",\"steps\":[{\"Opacity (2)\":[0,0]},{\"Opacity (2)\":[1,0]}]},{\"name\":\"DayNight\",\"type\":\"slider\",\"steps\":[{\"Lightness (1)\":[1,1],\"Colorize\":[0.71,0.24],\"Translation\":[0,0],\"Saturation (2)\":[1,0],\"Opacity\":[1,1],\"Lightness (4)\":[1,1],\"Saturation\":[1,1],\"Opacity (1)\":[1,1],\"Lightness\":[1,1],\"Saturation (1)\":[0.8,0]},{\"Lightness (1)\":[0.6,0],\"Colorize\":[0.04,0.73],\"Translation\":[0,169],\"Saturation (2)\":[0.56,0],\"Opacity\":[0.13,0],\"Lightness (4)\":[0.75,0],\"Saturation\":[0.72,0],\"Opacity (1)\":[1,1],\"Lightness\":[0.66,0],\"Saturation (1)\":[1,1]},{\"Lightness (1)\":[0.22,0],\"Colorize\":[0.77,0.47],\"Translation\":[0,384],\"Saturation (2)\":[0.15,0],\"Opacity\":[0,0],\"Lightness (4)\":[0.35,0],\"Saturation\":[0.18,0],\"Opacity (1)\":[0,0],\"Lightness\":[0.13,0],\"Saturation (1)\":[1,1]},{\"Lightness (1)\":[0.4,0],\"Colorize\":[0.03,1],\"Translation\":[0,169],\"Saturation (2)\":[0.22,0],\"Opacity\":[0.17,0],\"Lightness (4)\":[0.84,0],\"Saturation\":[0.2,0],\"Opacity (1)\":[1,1],\"Lightness\":[0.42,0],\"Saturation (1)\":[1,1]},{\"Lightness (1)\":[1,0],\"Colorize\":[0.71,0.24],\"Translation\":[0,0],\"Saturation (2)\":[1,0],\"Opacity\":[1,0],\"Lightness (4)\":[1,0],\"Saturation\":[1,1],\"Opacity (1)\":[1,1],\"Lightness\":[1,1],\"Saturation (1)\":[0.8,0]}]},{\"name\":\"Bubble3\",\"type\":\"slider\",\"steps\":[{\"New Mutator (40)\":[-11,0]},{\"New Mutator (40)\":[-77,49]},{\"New Mutator (40)\":[-126,107]}]},{\"name\":\"Bubble2\",\"type\":\"slider\",\"steps\":[{\"New Mutator (39)\":[-9,2]},{\"New Mutator (39)\":[-75,51]},{\"New Mutator (39)\":[-130,110]}]},{\"name\":\"Bubble\",\"type\":\"slider\",\"steps\":[{\"New Mutator (38)\":[-19,0]},{\"New Mutator (38)\":[-85,43]},{\"New Mutator (38)\":[-149,115]}]},{\"name\":\"WheelBlades\",\"type\":\"slider\",\"steps\":[{\"New Mutator (24)\":[0,0],\"New Mutator (25)\":[1,0.8],\"New Mutator (26)\":[0,0],\"New Mutator (27)\":[1,0],\"New Mutator (28)\":[0,0],\"New Mutator (29)\":[1,1],\"New Mutator (30)\":[0,0],\"New Mutator (31)\":[0.65,1],\"New Mutator (32)\":[11,0],\"New Mutator (35)\":[33,0],\"New Mutator (34)\":[1,0.03],\"New Mutator (33)\":[0,0],\"New Mutator (37)\":[43,0]},{\"New Mutator (24)\":[-33,-19],\"New Mutator (25)\":[1,0.7],\"New Mutator (26)\":[10,0],\"New Mutator (27)\":[-31,-65],\"New Mutator (28)\":[13,0],\"New Mutator (29)\":[1,0.75],\"New Mutator (30)\":[-10,-83],\"New Mutator (31)\":[0.66,0.05],\"New Mutator (32)\":[0,0],\"New Mutator (35)\":[17,0],\"New Mutator (34)\":[1,-0.37],\"New Mutator (33)\":[9,-88],\"New Mutator (37)\":[-2,0]}]},{\"name\":\"Smoke\",\"type\":\"slider\",\"steps\":[{\"New Mutator (16)\":[0,0]},{\"New Mutator (16)\":[0,-128]}]},{\"name\":\"ButterflyY\",\"type\":\"slider\",\"steps\":[{\"New Mutator (22)\":[0,-216]},{\"New Mutator (22)\":[0,210]}]},{\"name\":\"ButterflyX\",\"type\":\"slider\",\"steps\":[{\"New Mutator (22)\":[-400,0]},{\"New Mutator (22)\":[200,0]}]},{\"name\":\"ButterflyZoom\",\"type\":\"slider\",\"steps\":[{\"New Mutator (21)\":[1,1]},{\"New Mutator (21)\":[0.5,0.5]}]},{\"name\":\"ButterflyTurn\",\"type\":\"slider\",\"steps\":[{\"New Mutator (21)\":[1,1]},{\"New Mutator (21)\":[-1,1]}]},{\"name\":\"ButterflyWings\",\"type\":\"slider\",\"steps\":[{\"New Mutator (13)\":[1,1],\"New Mutator (14)\":[1,1]},{\"New Mutator (13)\":[1,-1.05],\"New Mutator (14)\":[1,-0.4]}]},{\"name\":\"EyesBlink\",\"type\":\"slider\",\"steps\":[{\"New Mutator (12)\":[1,1]},{\"New Mutator (12)\":[0,0]}]},{\"name\":\"Cloud1\",\"type\":\"slider\",\"steps\":[{\"New Mutator (11)\":[1200,0]},{\"New Mutator (11)\":[-1300,0]}]},{\"name\":\"Cloud2\",\"type\":\"slider\",\"steps\":[{\"New Mutator (19)\":[-2101,0]},{\"New Mutator (19)\":[270,0]}]},{\"name\":\"Cloud3\",\"type\":\"slider\",\"steps\":[{\"New Mutator (20)\":[-546,0]},{\"New Mutator (20)\":[1753,0]}]},{\"name\":\"Beak\",\"type\":\"slider\",\"steps\":[{\"New Mutator (7)\":[0,0],\"New Mutator (6)\":[0,0]},{\"New Mutator (7)\":[-19,0],\"New Mutator (6)\":[7,0]}]},{\"name\":\"TreeLeaves2\",\"type\":\"slider\",\"steps\":[{\"New Mutator (5)\":[-42,0],\"New Mutator (9)\":[-11,0],\"New Mutator (23)\":[-12,0],\"New Mutator (36)\":[0,0]},{\"New Mutator (5)\":[48,0],\"New Mutator (9)\":[8,0],\"New Mutator (23)\":[13,0],\"New Mutator (36)\":[0,13]}]},{\"name\":\"TreeLeaves1\",\"type\":\"slider\",\"steps\":[{\"New Mutator (4)\":[-27,0],\"New Mutator (8)\":[-13,0],\"New Mutator (10)\":[-6,0]},{\"New Mutator (4)\":[40,0],\"New Mutator (8)\":[12,0],\"New Mutator (10)\":[11,0]}]},{\"name\":\"WheelRotate\",\"type\":\"slider\",\"steps\":[{\"New Mutator (3)\":[0,0],\"New Mutator (2)\":[0,0]},{\"New Mutator (3)\":[360,0],\"New Mutator (2)\":[360,0]}]}],\"defaultFrame\":{\"New Mutator\":[0.45,1],\"New Mutator (1)\":[0.45,1],\"New Mutator (2)\":[0,0],\"New Mutator (3)\":[90,0],\"New Mutator (4)\":[0,0],\"New Mutator (5)\":[0,0],\"New Mutator (6)\":[0,0],\"New Mutator (7)\":[0,0],\"New Mutator (8)\":[0,0],\"New Mutator (9)\":[0,0],\"New Mutator (10)\":[0,0],\"New Mutator (12)\":[1,0],\"New Mutator (13)\":[1,1],\"New Mutator (14)\":[1,0.85],\"New Mutator (15)\":[-41,0],\"New Mutator (17)\":[37,0],\"New Mutator (18)\":[23,0],\"New Mutator (21)\":[1,1],\"New Mutator (23)\":[0,0],\"New Mutator (25)\":[1,1],\"New Mutator (26)\":[0,0],\"New Mutator (29)\":[1,0.7],\"New Mutator (28)\":[10,0],\"New Mutator (31)\":[1,0.53],\"New Mutator (30)\":[-8,3],\"New Mutator (32)\":[24,0],\"New Mutator (34)\":[1,1],\"New Mutator (33)\":[30,-25],\"New Mutator (35)\":[0,0],\"New Mutator (36)\":[0,-9],\"Lightness (1)\":[0.97,0],\"Colorize\":[0.73,1],\"Stretch\":[12.85,1],\"Saturation (1)\":[0.55,0],\"Saturation\":[0.79,0],\"Saturation (2)\":[1,0],\"Opacity\":[1,1],\"Lightness (4)\":[1,0],\"Opacity (1)\":[1,1],\"Stretch (1)\":[1.6,1.6],\"Lightness\":[1,0],\"Opacity (2)\":[1,0]},\"shapes\":[{\"type\":\"sprite\",\"points\":[[1696,1056],[1728,1056],[1728,1088],[1696,1088]],\"translate\":[431,476],\"mutationVectors\":[{\"type\":\"opacity\",\"origin\":[0,0],\"name\":\"New Mutator (12)\"}],\"name\":\"Eyes\"},{\"type\":\"sprite\",\"points\":[[2080,1312],[2368,1312],[2368,1664],[2080,1664]],\"translate\":[-432,80],\"mutationVectors\":[{\"type\":\"opacity\",\"origin\":[0,0],\"name\":\"Opacity (2)\"}],\"name\":\"NightLight\"},{\"name\":\"New Folder\",\"type\":\"folder\",\"items\":[{\"name\":\"Overall\",\"type\":\"folder\",\"items\":[{\"name\":\"Bird\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[1119,1056],[1120,1068],[1171,1065],[1168,1055]],\"translate\":[112,-386],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[88,-386],\"name\":\"New Mutator (6)\"}],\"name\":\"Top\"},{\"type\":\"sprite\",\"points\":[[1120,1091],[1120,1101],[1151,1101],[1152,1092]],\"translate\":[104,-384],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[90,-384],\"name\":\"New Mutator (7)\"}],\"name\":\"Bottom\"}],\"mutationVectors\":[]},{\"name\":\"Vlinder\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[63,1352],[137,1356],[143,1311],[65,1308]],\"translate\":[760,222],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[753,241],\"name\":\"New Mutator (13)\"}],\"name\":\"Vleugel1\"},{\"type\":\"sprite\",\"points\":[[61,1376],[61,1358],[130,1363],[130,1379]],\"translate\":[747,240],\"mutationVectors\":[],\"name\":\"Lijf\"},{\"type\":\"sprite\",\"points\":[[63,1352],[137,1356],[143,1311],[65,1308]],\"translate\":[757,222],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[752,243],\"name\":\"New Mutator (14)\"}],\"name\":\"Vleugel2\"}],\"mutationVectors\":[{\"name\":\"New Mutator (22)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"stretch\",\"origin\":[765,236],\"name\":\"New Mutator (21)\"},{\"type\":\"rotate\",\"origin\":[754,244],\"name\":\"New Mutator (15)\"}]},{\"name\":\"Tree\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[2012,1214],[2016,1361],[2009,1423],[2010,1476],[2002,1510],[2019,1564],[2004,1586],[2000,1626],[2009,1656],[1994,1683],[1994,1716],[1959,1716],[1953,1683],[1955,1620],[1952,1566],[1955,1504],[1957,1433],[1966,1348],[1976,1279],[1975,1240],[1975,1220],[1952,1259],[1945,1283],[1944,1319],[1939,1347],[1932,1385],[1922,1417],[1914,1453],[1901,1483],[1900,1512],[1902,1548],[1911,1582],[1902,1605],[1904,1631],[1904,1663],[1877,1672],[1862,1649],[1861,1593],[1852,1545],[1857,1495],[1863,1458],[1864,1396],[1876,1347],[1861,1353],[1853,1390],[1849,1421],[1852,1453],[1842,1482],[1842,1510],[1846,1540],[1845,1579],[1845,1607],[1849,1635],[1842,1656],[1856,1699],[1833,1715],[1813,1699],[1807,1670],[1802,1632],[1801,1591],[1801,1553],[1803,1512],[1805,1475],[1808,1435],[1808,1397],[1814,1357],[1818,1336],[1802,1330],[1786,1364],[1777,1383],[1780,1407],[1789,1440],[1786,1471],[1769,1501],[1766,1522],[1773,1552],[1782,1589],[1778,1617],[1755,1627],[1736,1611],[1721,1571],[1724,1533],[1727,1499],[1729,1465],[1729,1427],[1733,1393],[1738,1364],[1743,1323],[1752,1294],[1760,1262],[1780,1252],[1811,1261],[1829,1265],[1865,1247],[1786,1229],[1728,1232],[1749,1680]],\"translate\":[883,-221],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[906,-79],\"name\":\"New Mutator (5)\",\"radius\":298}],\"name\":\"Leaves2\"},{\"type\":\"sprite\",\"points\":[[1442,1246],[1679,1233],[1654,1356],[1643,1500],[1640,1638],[1642,1721],[1632,1752],[1595,1746],[1579,1705],[1573,1638],[1568,1572],[1569,1508],[1573,1420],[1573,1383],[1564,1412],[1559,1458],[1551,1502],[1552,1545],[1550,1573],[1541,1615],[1540,1647],[1520,1664],[1502,1652],[1497,1617],[1496,1577],[1504,1536],[1504,1497],[1504,1462],[1516,1424],[1520,1388],[1506,1385],[1509,1425],[1498,1452],[1495,1473],[1492,1501],[1485,1513],[1493,1543],[1490,1576],[1469,1580],[1454,1568],[1446,1538],[1444,1500],[1454,1466],[1456,1442],[1451,1401],[1458,1363],[1463,1335],[1424,1274],[1422,1396],[1423,1483],[1427,1557],[1438,1617],[1687,1739],[1678,1603],[1675,1440]],\"translate\":[901,-220],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[895,-93],\"name\":\"New Mutator (4)\",\"radius\":298}],\"name\":\"Leaves1\"}],\"mutationVectors\":[]},{\"name\":\"Wheel\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[947,1271],[1382,1271],[1409,1821],[962,1871]],\"translate\":[79,56],\"mutationVectors\":[],\"name\":\"Wheelhouse\"},{\"name\":\"Water\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[782,1778],[797,1755],[857,1773],[835,1804]],\"translate\":[95,171],\"mutationVectors\":[{\"name\":\"New Mutator (38)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"WaterMove\"},{\"type\":\"sprite\",\"points\":[[782,1796],[755,1819],[800,1842],[823,1811]],\"translate\":[73,171],\"mutationVectors\":[{\"name\":\"New Mutator (39)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"WaterMove2\"},{\"type\":\"sprite\",\"points\":[[747,1839],[723,1861],[762,1883],[781,1863]],\"translate\":[71,172],\"mutationVectors\":[{\"name\":\"New Mutator (40)\",\"type\":\"translate\",\"origin\":[71,172],\"radius\":-1}],\"name\":\"WaterMove3\"}],\"mutationVectors\":[]},{\"type\":\"sprite\",\"points\":[[1076,1892],[1187,1888],[1192,1978],[1073,1983]],\"translate\":[33,193],\"mutationVectors\":[],\"name\":\"Hider\"},{\"type\":\"sprite\",\"points\":[[340,1312],[703,1312],[703,1675],[340,1675]],\"translate\":[142,5],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[141,4],\"name\":\"New Mutator\"},{\"type\":\"rotate\",\"origin\":[141,4],\"name\":\"New Mutator (2)\"}],\"name\":\"WheelRight\"},{\"type\":\"sprite\",\"points\":[[775,1306],[899,1303],[907,1682],[771,1678]],\"translate\":[102,6],\"mutationVectors\":[],\"name\":\"Side\"},{\"name\":\"Blades\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[63,1216],[63,1269],[185,1216],[184,1269]],\"translate\":[48,56],\"mutationVectors\":[{\"name\":\"New Mutator (30)\",\"type\":\"translate\",\"origin\":[48,56],\"radius\":-1},{\"type\":\"stretch\",\"origin\":[-12,82],\"name\":\"New Mutator (31)\"},{\"name\":\"New Mutator (32)\",\"type\":\"translate\",\"origin\":[-12,31],\"radius\":6}],\"name\":\"Blade3\"},{\"type\":\"sprite\",\"points\":[[63,1216],[63,1269],[185,1216],[184,1269]],\"translate\":[105,142],\"mutationVectors\":[{\"name\":\"New Mutator (24)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"stretch\",\"origin\":[97,168],\"name\":\"New Mutator (25)\"},{\"name\":\"New Mutator (26)\",\"type\":\"translate\",\"origin\":[46,113],\"radius\":24}],\"name\":\"Blade1\"},{\"type\":\"sprite\",\"points\":[[63,1216],[63,1269],[185,1216],[184,1269]],\"translate\":[71,122],\"mutationVectors\":[{\"name\":\"New Mutator (27)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"stretch\",\"origin\":[62,152],\"name\":\"New Mutator (29)\"},{\"name\":\"New Mutator (28)\",\"type\":\"translate\",\"origin\":[14,98],\"radius\":16}],\"name\":\"Blade2\"},{\"type\":\"sprite\",\"points\":[[63,1216],[63,1269],[185,1216],[184,1269]],\"translate\":[0,0],\"mutationVectors\":[{\"name\":\"New Mutator (33)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"stretch\",\"origin\":[-60,27],\"name\":\"New Mutator (34)\"},{\"name\":\"New Mutator (35)\",\"type\":\"translate\",\"origin\":[-61,-27],\"radius\":8}],\"name\":\"Blade4\"},{\"type\":\"sprite\",\"points\":[[63,1216],[63,1269],[185,1216],[184,1269]],\"translate\":[107,149],\"mutationVectors\":[{\"name\":\"New Mutator (37)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Blade5\"}],\"mutationVectors\":[]},{\"type\":\"sprite\",\"points\":[[340,1312],[703,1312],[703,1675],[340,1675]],\"translate\":[48,0],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[48,0],\"name\":\"New Mutator (1)\"},{\"type\":\"rotate\",\"origin\":[48,0],\"name\":\"New Mutator (3)\"}],\"name\":\"WheelLeft\"}],\"mutationVectors\":[]},{\"type\":\"sprite\",\"points\":[[814,123],[869,119],[930,128],[934,133],[936,264],[810,268]],\"translate\":[-151,-319],\"mutationVectors\":[],\"name\":\"Schoorsteen\"},{\"type\":\"sprite\",\"points\":[[96,1696],[96,1440],[236,1440],[236,1696],[96,1664],[96,1472],[96,1504],[96,1536],[96,1568],[96,1600],[96,1632],[236,1472],[236,1504],[236,1536],[236,1568],[236,1600],[236,1632],[236,1664],[46,1696],[46,1630],[46,1440],[46,1568],[46,1504],[285,1440],[285,1504],[285,1568],[285,1632],[285,1696]],\"translate\":[-147,-384],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[-227,-407],\"name\":\"New Mutator (18)\",\"radius\":64},{\"type\":\"deform\",\"origin\":[-73,-496],\"name\":\"New Mutator (17)\",\"radius\":63},{\"name\":\"New Mutator (16)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Rook\"},{\"type\":\"sprite\",\"points\":[[1129,1236],[1129,1201],[1125,1160],[1141,1159],[1143,1197],[1145,1237],[1160,1238],[1158,1199],[1161,1160],[1175,1159],[1173,1200],[1174,1240]],\"translate\":[325,-77],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[326,-121],\"name\":\"New Mutator (23)\",\"radius\":55}],\"name\":\"Sigar\"},{\"type\":\"sprite\",\"points\":[[847,1204],[853,1204],[853,1217],[848,1217],[843,1220],[845,1229],[858,1227]],\"translate\":[-356,-247],\"mutationVectors\":[{\"name\":\"New Mutator (36)\",\"type\":\"translate\",\"origin\":[-356,-241],\"radius\":9}],\"name\":\"Spider\"},{\"type\":\"sprite\",\"points\":[[0,0],[0,1024],[2048,1024],[2048,0]],\"translate\":[0,0],\"mutationVectors\":[],\"name\":\"Background\"}],\"mutationVectors\":[{\"type\":\"saturation\",\"origin\":[0,0],\"name\":\"Saturation (2)\"},{\"type\":\"lightness\",\"origin\":[0,0],\"name\":\"Lightness (1)\"}]},{\"name\":\"SatLayer\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[277,1220],[295,1149],[308,1110],[345,1126],[350,1160],[345,1201],[331,1226],[387,1236],[379,1191],[379,1138],[398,1097],[423,1071],[449,1103],[457,1134],[457,1167],[463,1211],[454,1240],[502,1244],[493,1212],[490,1173],[495,1127],[502,1087],[528,1079],[566,1097],[571,1139],[587,1175],[582,1211],[562,1240],[622,1177],[621,1146],[621,1111],[643,1079],[672,1109],[680,1147],[651,1178],[678,1195],[693,1138],[706,1124],[706,1088],[724,1090],[737,1112],[744,1135],[747,1169],[728,1198]],\"translate\":[429,-310],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[289,-335],\"name\":\"New Mutator (8)\",\"radius\":73},{\"type\":\"deform\",\"origin\":[453,-353],\"name\":\"New Mutator (9)\",\"radius\":83},{\"type\":\"deform\",\"origin\":[600,-355],\"name\":\"New Mutator (10)\",\"radius\":66}],\"name\":\"BackTrees\"},{\"type\":\"sprite\",\"points\":[[2080,1664],[2080,1920],[2624,1664],[2624,1920]],\"translate\":[-752,-253],\"mutationVectors\":[],\"name\":\"Left (1)\"},{\"type\":\"sprite\",\"points\":[[3168,1664],[3168,1920],[4064,1952],[4064,1664]],\"translate\":[512,-237],\"mutationVectors\":[],\"name\":\"Right (1)\"}],\"mutationVectors\":[{\"type\":\"lightness\",\"origin\":[0,0],\"name\":\"Lightness (4)\"},{\"type\":\"saturation\",\"origin\":[0,0],\"name\":\"Saturation\"}]},{\"name\":\"Mountains\",\"type\":\"folder\",\"items\":[{\"name\":\"Clouds\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[1038,1136],[758,1140],[758,1070],[1021,1065]],\"translate\":[77,-454],\"mutationVectors\":[{\"name\":\"New Mutator (11)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Cloud1\"},{\"type\":\"sprite\",\"points\":[[1251,1049],[1258,1119],[1464,1119],[1447,1055]],\"translate\":[906,-458],\"mutationVectors\":[{\"name\":\"New Mutator (19)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Cloud2\"},{\"type\":\"sprite\",\"points\":[[62,1106],[63,1159],[237,1158],[231,1107]],\"translate\":[-603,-444],\"mutationVectors\":[{\"name\":\"New Mutator (20)\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Could3\"}],\"mutationVectors\":[]},{\"type\":\"sprite\",\"points\":[[288,1760],[288,1920],[32,1920],[32,1760]],\"translate\":[-568,-264],\"mutationVectors\":[],\"name\":\"Left\"},{\"type\":\"sprite\",\"points\":[[320,1760],[320,1920],[576,1920],[576,1760]],\"translate\":[759,-330],\"mutationVectors\":[],\"name\":\"Right\"}],\"mutationVectors\":[{\"type\":\"lightness\",\"origin\":[0,0],\"name\":\"Lightness\"},{\"type\":\"saturation\",\"origin\":[0,0],\"name\":\"Saturation (1)\"}]}],\"mutationVectors\":[{\"type\":\"colorize\",\"origin\":[1,1],\"name\":\"Colorize\"}]},{\"type\":\"sprite\",\"points\":[[1632,1056],[1536,1056],[1536,1152],[1632,1152]],\"translate\":[-821,-459],\"mutationVectors\":[{\"name\":\"Translation\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"Sun\"},{\"name\":\"New Folder (1)\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[2112,32],[2272,32],[2272,352],[2112,352]],\"translate\":[-14,-352],\"mutationVectors\":[{\"type\":\"opacity\",\"origin\":[1,1],\"name\":\"Opacity\"}],\"name\":\"Sky\"},{\"type\":\"sprite\",\"points\":[[2464,352],[2304,352],[2304,32],[2464,32]],\"translate\":[-14,-352],\"mutationVectors\":[{\"type\":\"opacity\",\"origin\":[0,0],\"name\":\"Opacity (1)\"}],\"name\":\"Sky2\"}],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[-15,-323],\"name\":\"Stretch\"}]},{\"name\":\"New Folder (2)\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[2496,32],[2496,352],[2976,352],[2976,32]],\"translate\":[-777,-358],\"mutationVectors\":[],\"name\":\"Stars\"},{\"type\":\"sprite\",\"points\":[[2496,32],[2496,352],[2976,352],[2976,32]],\"translate\":[-298,-387],\"mutationVectors\":[],\"name\":\"Stars (1)\"},{\"type\":\"sprite\",\"points\":[[2496,32],[2496,352],[2976,352],[2976,32]],\"translate\":[22,-423],\"mutationVectors\":[],\"name\":\"Stars (1) (1)\"}],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[-1017,-511],\"name\":\"Stretch (1)\"}]}],\"version\":\"1.0\"}","module.exports = require('./helpers/bundle-url').getBundleURL('9iB2n') + require('./helpers/bundle-manifest').resolve(\"fwkpA\");","{\"animations\":[{\"name\":\"Eye blink\",\"looping\":true,\"keyframes\":[{\"time\":2500,\"controlValues\":{\"LeftEyeClose\":0,\"RightEyeClose\":0}},{\"time\":2750,\"controlValues\":{\"LeftEyeClose\":1,\"RightEyeClose\":1}},{\"time\":3000,\"controlValues\":{\"RightEyeClose\":0,\"LeftEyeClose\":0}}]},{\"name\":\"Look around\",\"looping\":true,\"keyframes\":[{\"time\":1000,\"controlValues\":{\"LeftEye-x\":0.18,\"RightEye-x\":0.24}},{\"time\":2000,\"controlValues\":{\"LeftEye-x\":1,\"RightEye-x\":1.02}},{\"time\":3980,\"controlValues\":{\"LeftEye-x\":1.02,\"RightEye-x\":1}},{\"time\":5000,\"controlValues\":{\"RightEye-x\":1.8,\"LeftEye-x\":1.84}},{\"time\":6000,\"controlValues\":{\"LeftEye-x\":0.98,\"RightEye-x\":1.06}},{\"time\":8000,\"controlValues\":{\"RightEye-x\":1,\"LeftEye-x\":1}}]},{\"name\":\"Talking\",\"looping\":true,\"keyframes\":[{\"time\":1000,\"controlValues\":{\"Mouth\":0}},{\"time\":1340,\"controlValues\":{\"Mouth\":0.62}},{\"time\":1670,\"controlValues\":{\"Mouth\":0}},{\"time\":2120,\"controlValues\":{\"Mouth\":0}},{\"time\":2430,\"controlValues\":{\"Mouth\":0.68}},{\"time\":2790,\"controlValues\":{\"Mouth\":0.24}},{\"time\":3160,\"controlValues\":{\"Mouth\":1}},{\"time\":3470,\"controlValues\":{\"Mouth\":0}}]},{\"name\":\"No\",\"looping\":false,\"keyframes\":[{\"time\":510,\"controlValues\":{\"HeadTurn\":0.38}},{\"time\":1270,\"controlValues\":{\"HeadTurn\":0}},{\"time\":2180,\"controlValues\":{\"HeadTurn\":1}},{\"time\":2990,\"controlValues\":{\"HeadTurn\":0}},{\"time\":3980,\"controlValues\":{\"HeadTurn\":0.48}}]},{\"name\":\"HeadTilt\",\"looping\":true,\"keyframes\":[{\"time\":1000,\"controlValues\":{\"HeadTilt\":0.42}},{\"time\":6000,\"controlValues\":{\"HeadTilt\":0.53}},{\"time\":9000,\"controlValues\":{\"HeadTilt\":0.14}},{\"time\":12000,\"controlValues\":{\"HeadTilt\":0.43}}]},{\"name\":\"EyeWink\",\"looping\":false,\"keyframes\":[{\"time\":500,\"controlValues\":{\"RightEyeClose\":0,\"LeftEyeClose\":0}},{\"time\":800,\"controlValues\":{\"RightEyeClose\":1}},{\"time\":1200,\"controlValues\":{\"RightEyeClose\":1}},{\"time\":1500,\"controlValues\":{\"RightEyeClose\":0}}]},{\"name\":\"Eyebrows\",\"looping\":true,\"keyframes\":[{\"time\":990,\"controlValues\":{\"Eyebrows\":1.32}},{\"time\":3940,\"controlValues\":{\"Eyebrows\":0.92}},{\"time\":6820,\"controlValues\":{\"Eyebrows\":1.88}},{\"time\":10220,\"controlValues\":{\"Eyebrows\":0.88}}]},{\"name\":\"Sweeping\",\"looping\":true,\"keyframes\":[{\"time\":1000,\"controlValues\":{\"Broom\":0.69,\"ArmRightBottom\":0.46,\"ArmRightTop\":0.14,\"ArmLeftBottom\":0.19,\"ArmLeftTop\":0.9,\"Dust\":1}},{\"time\":2000,\"controlValues\":{\"Broom\":1,\"ArmRightBottom\":0.79,\"ArmRightTop\":0.09,\"ArmLeftBottom\":0.13,\"ArmLeftTop\":0.71}},{\"time\":2499,\"controlValues\":{\"Dust\":1}},{\"time\":2500,\"controlValues\":{\"ArmLeftTop\":0.92,\"ArmLeftBottom\":0.18,\"ArmRightTop\":0.1,\"ArmRightBottom\":0.59,\"Broom\":0.69,\"Dust\":0}},{\"time\":3000,\"controlValues\":{\"Broom\":0,\"ArmRightBottom\":0.58,\"ArmRightTop\":0,\"ArmLeftBottom\":0.26,\"ArmLeftTop\":1,\"Dust\":1}}]},{\"name\":\"StopTalking\",\"looping\":false,\"keyframes\":[{\"time\":470,\"controlValues\":{\"Mouth\":0}}]},{\"name\":\"EyebrowReset\",\"looping\":false,\"keyframes\":[{\"time\":560,\"controlValues\":{\"Eyebrows\":1}}]},{\"name\":\"PauseSweeping\",\"looping\":false,\"keyframes\":[{\"time\":1460,\"controlValues\":{\"Broom\":0.86,\"ArmRightBottom\":0.22,\"ArmRightTop\":0.13,\"ArmLeftBottom\":0.48,\"ArmLeftTop\":0.96}}]}],\"controlValues\":{\"Eyebrows\":1,\"HeadTilt\":0.55,\"HeadTurn\":0.5,\"Mouth\":0,\"RightEye-y\":0.5,\"LeftEye-y\":0.5,\"RightEye-x\":1,\"LeftEye-x\":1,\"RightEyeClose\":0,\"LeftEyeClose\":0,\"ArmTop\":0,\"ArmBottom\":1,\"ArmLeftTop\":0.83,\"ArmLeftBottom\":0.31,\"ArmRightTop\":0.07,\"ArmRightBottom\":0.58,\"Broom\":1,\"Dust\":1},\"controls\":[{\"name\":\"Dust\",\"type\":\"slider\",\"steps\":[{\"c\":[0.35,0.05],\"a\":[143,0],\"b\":[1,1]},{\"c\":[1,1],\"a\":[-1110,0],\"b\":[0,0]}]},{\"name\":\"Broom\",\"type\":\"slider\",\"steps\":[{\"i\":[-29,0],\"h\":[-131,-39]},{\"i\":[8,0],\"h\":[0,0]}]},{\"name\":\"ArmRightBottom\",\"type\":\"slider\",\"steps\":[{\"e\":[-122,0]},{\"e\":[9,0]}]},{\"name\":\"ArmRightTop\",\"type\":\"slider\",\"steps\":[{\"H\":[-18,0],\"d\":[-18,0]},{\"H\":[100,0],\"d\":[100,0]}]},{\"name\":\"ArmLeftBottom\",\"type\":\"slider\",\"steps\":[{\"g\":[52,0]},{\"g\":[-108,0]}]},{\"name\":\"ArmLeftTop\",\"type\":\"slider\",\"steps\":[{\"I\":[-85,0],\"f\":[-84,0]},{\"I\":[8,0],\"f\":[8,0]}]},{\"name\":\"Eyebrows\",\"type\":\"slider\",\"steps\":[{\"p\":[0,6],\"q\":[-10,0],\"r\":[0,6],\"s\":[10,0]},{\"p\":[0,0],\"q\":[0,0],\"r\":[0,0],\"s\":[0,0]},{\"p\":[0,0],\"q\":[9,0],\"r\":[0,0],\"s\":[-9,0]}]},{\"name\":\"HeadTilt\",\"type\":\"slider\",\"steps\":[{\"K\":[15,0],\"j\":[15,0],\"m\":[-34,0],\"l\":[-29,0],\"J\":[-75,0]},{\"j\":[-15,0],\"K\":[-15,0],\"m\":[32,0],\"l\":[42,0],\"J\":[103,0]}]},{\"name\":\"HeadTurn\",\"type\":\"slider\",\"steps\":[{\"w\":[-9,0],\"x\":[-2,0],\"o\":[7,0],\"k\":[3,0],\"n\":[2,0],\"L\":[-7,0],\"F\":[1,0],\"C\":[1,0]},{\"o\":[-5,0],\"w\":[3,0],\"x\":[7,0],\"k\":[-3,0],\"n\":[-2,0],\"L\":[10,0],\"C\":[-1,0],\"F\":[-1,0]}]},{\"name\":\"Mouth\",\"type\":\"slider\",\"steps\":[{\"A\":[1,1],\"z\":[1,1],\"v\":[0,0],\"y\":[0,0]},{\"A\":[1,1.1],\"z\":[1,3.85],\"v\":[0,-20],\"y\":[0,3]}]},{\"name\":\"RightEye-y\",\"type\":\"slider\",\"steps\":[{\"C\":[0,-8]},{\"C\":[0,11]}]},{\"name\":\"LeftEye-y\",\"type\":\"slider\",\"steps\":[{\"F\":[0,-7]},{\"F\":[0,11]}]},{\"name\":\"RightEye-x\",\"type\":\"slider\",\"steps\":[{\"C\":[-7,0],\"D\":[0.85,1]},{\"C\":[1,0],\"D\":[1,1]},{\"C\":[13,0],\"D\":[0.85,1]}]},{\"name\":\"LeftEye-x\",\"type\":\"slider\",\"steps\":[{\"F\":[-12,0],\"G\":[0.85,1]},{\"G\":[1,1],\"F\":[0,0]},{\"F\":[9,0],\"G\":[0.85,1]}]},{\"name\":\"RightEyeClose\",\"type\":\"slider\",\"steps\":[{\"u\":[1,1],\"B\":[0,0]},{\"B\":[0,48],\"u\":[1,-1.2]}]},{\"name\":\"LeftEyeClose\",\"type\":\"slider\",\"steps\":[{\"E\":[0,0],\"t\":[1,1]},{\"t\":[1,-1.1],\"E\":[0,50]}]}],\"defaultFrame\":{\"B\":[0,-29],\"u\":[1,1],\"D\":[1,1],\"C\":[0,0],\"E\":[0,-25],\"t\":[1,1],\"G\":[1,1],\"F\":[0,0],\"A\":[1,1],\"z\":[1,0.25],\"v\":[0,0],\"j\":[-1,0],\"K\":[0,0],\"m\":[0,0],\"l\":[0,0],\"J\":[0,0],\"q\":[0,0],\"p\":[0,0],\"s\":[0,0],\"r\":[0,0],\"g\":[97,0],\"i\":[16,0],\"I\":[0,0],\"f\":[0,0],\"H\":[0,0],\"d\":[0,0],\"e\":[0,0],\"b\":[1,1],\"c\":[1,1]},\"shapes\":[{\"type\":\"sprite\",\"points\":[[1408,224],[1216,32],[1984,32],[1984,224]],\"translate\":[141,1666],\"mutationVectors\":[{\"name\":\"a\",\"type\":\"translate\",\"origin\":[228,0],\"radius\":-1},{\"type\":\"opacity\",\"origin\":[228,0],\"name\":\"b\"},{\"type\":\"stretch\",\"origin\":[236,1751],\"name\":\"c\"}],\"name\":\"a\"},{\"name\":\"b\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[92,688],[139,676],[186,690],[173,869],[70,764],[144,904],[94,908]],\"translate\":[277,593],\"mutationVectors\":[],\"name\":\"c\"},{\"type\":\"sprite\",\"points\":[[452,597],[529,600],[413,697],[435,747],[516,759],[537,704]],\"translate\":[271,719],\"mutationVectors\":[],\"name\":\"d\"}],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[192,279],\"name\":\"d\"},{\"type\":\"rotate\",\"origin\":[282,489],\"name\":\"e\"}]},{\"name\":\"e\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[80,1054],[183,1046],[202,1203],[182,1283],[123,1289],[83,1174]],\"translate\":[-230,584],\"mutationVectors\":[],\"name\":\"f\"},{\"type\":\"sprite\",\"points\":[[212,1432],[229,1591],[94,1596],[109,1435]],\"translate\":[-224,748],\"mutationVectors\":[],\"name\":\"g\"}],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[-148,286],\"name\":\"f\"},{\"type\":\"rotate\",\"origin\":[-245,483],\"name\":\"g\"}]},{\"type\":\"sprite\",\"points\":[[552,363],[633,363],[635,1808],[770,2028],[725,2040],[552,2010],[503,1913]],\"translate\":[157,958],\"mutationVectors\":[{\"name\":\"h\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"rotate\",\"origin\":[128,682],\"name\":\"i\"}],\"name\":\"h\"},{\"name\":\"i\",\"type\":\"folder\",\"items\":[{\"type\":\"sprite\",\"points\":[[1013,495],[1023,467],[1021,419],[1024,374],[1023,323],[1000,281],[955,263],[888,267],[836,303],[817,354],[813,412],[811,457],[822,473],[840,459],[847,431],[854,398],[856,368],[912,338],[917,361],[934,337],[971,345],[998,363],[998,409],[994,435],[999,471]],\"translate\":[-6,-36],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[-98,48],\"name\":\"l\",\"radius\":96},{\"type\":\"deform\",\"origin\":[87,54],\"name\":\"m\",\"radius\":101},{\"name\":\"n\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"j\"},{\"type\":\"sprite\",\"points\":[[221,213],[265,212],[266,230],[223,233]],\"translate\":[2,46],\"mutationVectors\":[{\"name\":\"o\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"k\"},{\"type\":\"sprite\",\"points\":[[776,110],[780,98],[793,90],[805,91],[818,92],[830,95],[842,106],[833,114],[818,110],[795,108]],\"translate\":[-42,-46],\"mutationVectors\":[{\"name\":\"p\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"rotate\",\"origin\":[-55,-48],\"name\":\"q\"}],\"name\":\"l\"},{\"type\":\"sprite\",\"points\":[[774,139],[783,154],[794,148],[810,146],[824,148],[837,150],[837,139],[825,132],[808,129],[788,132]],\"translate\":[41,-43],\"mutationVectors\":[{\"name\":\"r\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1},{\"type\":\"rotate\",\"origin\":[54,-44],\"name\":\"s\"}],\"name\":\"m\"},{\"name\":\"n\",\"type\":\"sprite\",\"points\":[[679,86],[679,108],[738,111],[736,86]],\"translate\":[-47,-13],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[-47,-6],\"name\":\"t\",\"radius\":-1}]},{\"name\":\"o\",\"type\":\"sprite\",\"points\":[[613,106],[668,108],[667,86],[611,84]],\"translate\":[43,-14],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[37,-6],\"name\":\"u\",\"radius\":-1}]},{\"name\":\"p\",\"type\":\"sprite\",\"points\":[[431,266],[485,277],[509,270],[507,259],[435,255],[481,248],[462,248],[462,277],[572,54],[373,52],[572,272],[375,277]],\"translate\":[2,-34],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[2,79],\"name\":\"v\",\"radius\":26}]},{\"type\":\"sprite\",\"points\":[[128,165],[135,173],[145,170],[162,129],[160,113],[151,102],[134,113],[130,121]],\"translate\":[93,-3],\"mutationVectors\":[{\"name\":\"w\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"q\"},{\"type\":\"sprite\",\"points\":[[103,111],[112,168],[103,176],[92,174],[74,110],[86,104]],\"translate\":[-91,-6],\"mutationVectors\":[{\"name\":\"x\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"r\"},{\"name\":\"s\",\"type\":\"sprite\",\"points\":[[636,235],[717,236],[717,247],[694,256],[653,256],[636,245]],\"translate\":[0,65],\"mutationVectors\":[{\"name\":\"y\",\"type\":\"translate\",\"origin\":[0,0]}]},{\"name\":\"t\",\"type\":\"sprite\",\"points\":[[759,189],[761,210],[770,228],[785,235],[814,235],[833,232],[844,218],[847,194]],\"translate\":[0,83],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[1,65],\"name\":\"z\",\"radius\":-1}]},{\"name\":\"u\",\"type\":\"sprite\",\"points\":[[612,266],[787,262],[777,310],[737,355],[701,362],[662,352],[622,313]],\"translate\":[0,87],\"mutationVectors\":[{\"type\":\"stretch\",\"origin\":[0,40],\"name\":\"A\",\"radius\":-1}]},{\"name\":\"v\",\"type\":\"folder\",\"items\":[{\"name\":\"w\",\"type\":\"sprite\",\"points\":[[618,149],[664,142],[657,131],[646,128],[630,128],[620,138],[634,149],[645,148]],\"translate\":[41,-11],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[38,-6],\"name\":\"B\",\"radius\":15}]},{\"name\":\"x\",\"type\":\"sprite\",\"points\":[[624,79],[630,79],[630,71],[621,71]],\"translate\":[30,-10],\"mutationVectors\":[]},{\"name\":\"y\",\"type\":\"sprite\",\"points\":[[653,186],[653,160],[627,160],[627,186]],\"translate\":[37,-9],\"mutationVectors\":[{\"name\":\"C\",\"type\":\"translate\",\"origin\":[0,0]},{\"type\":\"stretch\",\"origin\":[38,-9],\"name\":\"D\",\"radius\":-1}]},{\"name\":\"z\",\"type\":\"sprite\",\"points\":[[621,197],[620,228],[667,197],[666,227]],\"translate\":[40,-6],\"mutationVectors\":[]}],\"mutationVectors\":[]},{\"name\":\"A\",\"type\":\"folder\",\"items\":[{\"name\":\"B\",\"type\":\"sprite\",\"points\":[[688,143],[695,131],[709,127],[721,129],[731,136],[736,151],[704,146],[716,148]],\"translate\":[-42,-12],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[-42,-9],\"name\":\"E\",\"radius\":15}]},{\"name\":\"C\",\"type\":\"sprite\",\"points\":[[697,77],[705,78],[706,70],[697,70]],\"translate\":[-48,-12],\"mutationVectors\":[]},{\"name\":\"D\",\"type\":\"sprite\",\"points\":[[698,161],[698,186],[724,186],[724,161]],\"translate\":[-42,-11],\"mutationVectors\":[{\"name\":\"F\",\"type\":\"translate\",\"origin\":[0,0]},{\"type\":\"stretch\",\"origin\":[-41,-10],\"name\":\"G\",\"radius\":-1}]},{\"name\":\"E\",\"type\":\"sprite\",\"points\":[[685,197],[685,227],[734,229],[733,197]],\"translate\":[-43,-6],\"mutationVectors\":[]}],\"mutationVectors\":[]}],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[-5,98],\"name\":\"j\"},{\"name\":\"k\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}]},{\"type\":\"sprite\",\"points\":[[1214,246],[2027,1820],[1738,244],[961,1842],[1620,334],[1681,336],[1678,350],[1629,369]],\"translate\":[14,896],\"mutationVectors\":[],\"name\":\"F\"},{\"type\":\"sprite\",\"points\":[[325,586],[430,939],[384,658],[320,941],[198,687],[197,654],[269,585]],\"translate\":[227,359],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[192,279],\"name\":\"H\"}],\"name\":\"G\"},{\"type\":\"sprite\",\"points\":[[415,1020],[482,1105],[434,1125],[335,1373],[268,1384],[238,1331],[284,1061],[346,1031]],\"translate\":[-173,354],\"mutationVectors\":[{\"type\":\"rotate\",\"origin\":[-148,286],\"name\":\"I\"}],\"name\":\"H\"},{\"type\":\"sprite\",\"points\":[[779,611],[822,582],[864,568],[921,567],[979,582],[1013,632],[1042,707],[1038,813],[1028,847],[1040,912],[1030,948],[1027,1024],[990,1103],[954,1120],[907,1064],[867,1106],[822,1083],[779,1105],[750,1084],[754,992],[743,934],[759,844],[753,753],[761,709],[747,660]],\"translate\":[-2,108],\"mutationVectors\":[{\"type\":\"deform\",\"origin\":[-7,263],\"name\":\"J\",\"radius\":331},{\"type\":\"rotate\",\"origin\":[-3,106],\"name\":\"K\"},{\"name\":\"L\",\"type\":\"translate\",\"origin\":[0,0],\"radius\":-1}],\"name\":\"I\"}],\"version\":\"1.0\"}","let tweens: { name: string; ticker: () => void }[] = [];\n\nexport type TweenCreator = (\n  name: string,\n  source: number,\n  target: number,\n  speed: number,\n  applier: (value: number) => void\n) => Promise<void>;\n\nexport const cleanTicker = (name: string) => {\n  tweens = tweens.filter((e) => e.name !== name);\n};\n\nexport const animationTween: TweenCreator = (\n  name,\n  source,\n  target,\n  speed,\n  applier\n) =>\n  new Promise((resolve) => {\n    cleanTicker(name);\n    let current = source;\n    const ticker = () => {\n      if (current === target) {\n        cleanTicker(name);\n        resolve();\n      } else {\n        if (current < target) {\n          current += Math.min(speed, target - current);\n        } else {\n          current -= Math.min(speed, current - target);\n        }\n      }\n      applier(current);\n    };\n    tweens = tweens.concat({ name, ticker });\n  });\n\nexport const delayFrames = (name: string, frames: number): Promise<void> =>\n  new Promise((resolve) => {\n    cleanTicker(name);\n    let current = frames;\n\n    const ticker = () => {\n      if (current === 0) {\n        cleanTicker(name);\n        resolve();\n      } else {\n        current--;\n      }\n    };\n    tweens = tweens.concat({ name, ticker });\n  });\n\nexport const tick = () => {\n  for (const tween of tweens) {\n    tween.ticker();\n  }\n};\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import { AnimationControls } from \"geppetto-player\";\nimport { delayFrames } from \"./tween\";\n\nconst root = document.getElementById(\"root\");\n\nconst awaitClick = async () =>\n  new Promise<void>((resolve) => {\n    const dialog = document.getElementsByClassName(\"dialogbox\")[0];\n    const handler = () => {\n      resolve();\n      dialog.removeEventListener(\"click\", handler);\n    };\n    dialog.addEventListener(\"click\", handler);\n  });\n\nconst charSay = (character: AnimationControls, name: string) => {\n  const talkDelay = async (message: string) => {\n    await delayFrames(\"talking\", message.length * 6);\n    character.startTrack(\"StopTalking\");\n    character.startTrack(\"EyebrowReset\");\n  };\n\n  const showText = (text: string) => {\n    const dialogBox = document.createElement(\"div\");\n    dialogBox.classList.add(\"dialogbox\");\n\n    const nameField = document.createElement(\"h3\");\n    nameField.classList.add(\"dialogname\");\n    nameField.textContent = name;\n    dialogBox.appendChild(nameField);\n    root.appendChild(dialogBox);\n\n    const textField = document.createElement(\"p\");\n    textField.textContent = text;\n    dialogBox.appendChild(textField);\n\n    return () => {\n      root.removeChild(dialogBox);\n    };\n  };\n\n  return async (message: string) => {\n    character.startTrack(\"Talking\", { startAt: 800 });\n    character.startTrack(\"Eyebrows\");\n    const hideText = showText(message);\n    talkDelay(message);\n\n    await awaitClick();\n    character.startTrack(\"StopTalking\");\n    character.startTrack(\"EyebrowReset\");\n    hideText();\n  };\n};\n\ntype DialogCallbackOptions = {\n  endDialog: () => void;\n};\ntype DialogCallBack = (options: DialogCallbackOptions) => Promise<void>;\ntype DialogOptions = Record<string, DialogCallBack>;\n\nconst dialog = async (options: DialogOptions): Promise<void> => {\n  let inConversation = true;\n  const choiceAPI: DialogCallbackOptions = {\n    endDialog: () => {\n      inConversation = false;\n    },\n  };\n\n  while (inConversation) {\n    const choiceBox = document.createElement(\"div\");\n    choiceBox.classList.add(\"choicebox\");\n    root.appendChild(choiceBox);\n    const choice = await new Promise<keyof DialogOptions>((resolve) => {\n      Object.keys(options).forEach((key) => {\n        const button = document.createElement(\"button\");\n        button.textContent = key;\n        button.addEventListener(\"click\", () => {\n          root.removeChild(choiceBox);\n          setTimeout(() => {\n            resolve(key);\n          });\n        });\n        choiceBox.appendChild(button);\n      });\n    });\n    await options[choice](choiceAPI);\n  }\n};\n\nconst END = \"END\";\n\ntype DialogTree = (string | DialogChoice)[];\ntype DialogChoice = Record<string, DialogTree>;\n\nconst dialogText: DialogTree = [\n  \"Hi! Welcome test adventurer, welcome to my inn! Is there something you want to know?\",\n  {\n    \"What is Geppetto?\": [\n      \"Geppetto consists of two parts. A desktop application to define animated images, and a JavaScript library to play them.\",\n      {\n        \"Is Geppetto free?\": [\n          \"Yes! It is free to use and distribute. It's also opensource (MIT License). So everyone can see how it works and extend it.\",\n        ],\n        \"How does it work?\": [\n          \"You need to create a texture file as .PNG. in Geppetto you will make layers from your texture, and compose them into your image.\",\n          \"The next step is to add mutations to your layer tree to create motion. You can then create timelines to define multiple animations.\",\n          {\n            \"Why not [Other product here]?\": [\n              \"Other solutions exist for animation. Some are paid, some are not open source, some use vector graphics.\",\n              \"Using a single texture file is fast (single http request) and adding more detail to your image doesn't have any rendering cost.\",\n            ],\n            \"What are the features?\": [\n              \"Real-time control and animations. Did you know I can look in the direction you click in this image?\",\n              \"Smooth transition between animations.\",\n              \"Fast, most of the processing is on the GPU\",\n              \"Free as in beer and speech. Isn't that great! It also means Matthijs doesn't make any money from it, and only works on it in his free time. \" +\n                \"But, feel free to contribute!\",\n            ],\n            \"Sounds great!\": [END],\n          },\n        ],\n        \"I want to talk about something else\": [END],\n      },\n    ],\n    \"What can you tell me about your world?\": [\n      \"I hope the world I live in will be expanded into a full game! Wouldn't that be great?\",\n      \"For now it functions as a demo, to see if a game like environment could be created.\",\n      \"Can you spot all the moving elements?\",\n      END,\n    ],\n    \"I think I'll start exploring!\": [\"Good luck!\", END],\n  },\n];\n\nconst playDialog = async (\n  dialogText: DialogTree,\n  talkFn: (text: string) => Promise<void>\n): Promise<void> => {\n  for (const item of dialogText) {\n    if (typeof item === \"string\" && item !== END) {\n      await talkFn(item);\n    }\n    if (typeof item === \"object\") {\n      const options = Object.entries(item).reduce<DialogOptions>(\n        (result, [key, tree]) => ({\n          ...result,\n          [key]: async ({ endDialog }) => {\n            await playDialog(tree, talkFn);\n            if (tree[tree.length - 1] === END) {\n              endDialog();\n            }\n          },\n        }),\n        {}\n      );\n      await dialog(options);\n    }\n  }\n};\n\nexport const conversation = async (character: AnimationControls) => {\n  await delayFrames(\"startTalking\", 60);\n  character.startTrack(\"PauseSweeping\");\n  const say = charSay(character, \"Innkeeper\");\n\n  await playDialog(dialogText, say);\n};\n","import { setupWebGL, prepareAnimation, ImageDefinition } from \"geppetto-player\";\nimport backgroundImage from \"url:./assets/colortest.png\";\nimport backgroundAnimationData from \"./assets/colortest.json\";\nimport characterImage from \"url:./assets/innkeeper.png\";\nimport characterAnimationData from \"./assets/innkeeper.json\";\nimport { animationTween, cleanTicker, delayFrames, tick } from \"./tween\";\nimport { conversation } from \"./conversation\";\n\nconst canvas = document.getElementById(\"theatre\") as HTMLCanvasElement;\nconst player = setupWebGL(canvas);\n\nconst loadTexture = async (url: string): Promise<HTMLImageElement> =>\n  new Promise((resolve) => {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    image.src = url;\n    image.onload = () => resolve(image);\n  });\n\nconst start = async () => {\n  const bgTexture = await loadTexture(backgroundImage);\n  const preppedBgAnim = prepareAnimation(\n    backgroundAnimationData as unknown as ImageDefinition\n  );\n  const bgAnimationControl = player.addAnimation(preppedBgAnim, bgTexture, 0, {\n    zoom: 2.0,\n    panX: 0,\n  });\n\n  const charTexture = await loadTexture(characterImage);\n  const preppedCharAnim = prepareAnimation(\n    characterAnimationData as unknown as ImageDefinition\n  );\n\n  const innKeeperDistance = {\n    zoom: 0.26,\n    panX: -2.1,\n    panY: -0.5,\n    zIndex: 2,\n  };\n  const innKeeperClose = {\n    zoom: 2.2,\n    panX: -0.3,\n    panY: 0.1,\n    zIndex: 2,\n  };\n  const charAnimationControls = player.addAnimation(\n    preppedCharAnim,\n    charTexture,\n    1,\n    innKeeperDistance\n  );\n\n  const setCanvasSize = () => {\n    const box = canvas.getBoundingClientRect();\n    const override = navigator.userAgent.includes(\"SMART-TV\") ? 2 : 1;\n    canvas.width = Math.min(\n      2048,\n      box.width * window.devicePixelRatio * override\n    );\n    canvas.height = Math.min(\n      1024,\n      box.height * window.devicePixelRatio * override\n    );\n  };\n  setCanvasSize();\n\n  window.addEventListener(\"resize\", () => {\n    setCanvasSize();\n  });\n\n  bgAnimationControl.startTrack(\"Wheel\");\n  bgAnimationControl.startTrack(\"WheelBlades\");\n  bgAnimationControl.startTrack(\"Tree\");\n  bgAnimationControl.startTrack(\"Bird\");\n  bgAnimationControl.startTrack(\"Cloud1\", { speed: 0.15 });\n  bgAnimationControl.startTrack(\"Cloud2\", { speed: 0.1 });\n  bgAnimationControl.startTrack(\"Cloud3\", { speed: 0.15 });\n  bgAnimationControl.startTrack(\"Day night\", { speed: 0.125 });\n  bgAnimationControl.startTrack(\"Eyes\");\n  bgAnimationControl.startTrack(\"Smoke\");\n  bgAnimationControl.startTrack(\"Water\");\n  bgAnimationControl.onEvent((eventName) => {\n    if (eventName === \"evening\") {\n      bgAnimationControl.startTrack(\"LightFlicker\");\n    }\n    if (eventName === \"endNight\") {\n      bgAnimationControl.startTrack(\"LightOff\");\n    }\n  });\n\n  let inkeeperInDistance = true;\n\n  charAnimationControls.startTrack(\"Eye blink\");\n  charAnimationControls.startTrack(\"HeadTilt\");\n  charAnimationControls.startTrack(\"Sweeping\");\n\n  const butterFly = async () => {\n    const flySpeed = 0.0025;\n    const zoomSpeed = 0.025;\n    const REST_TOADSTOOL = {\n      x: 0.72,\n      y: 0.87,\n      z: 0.8,\n    };\n\n    const REST_STUMP = {\n      x: 0.51,\n      y: 0.29,\n      z: 0.95,\n    };\n\n    const current = {\n      ...REST_TOADSTOOL,\n    };\n\n    bgAnimationControl.setControlValue(\"ButterflyX\", current.x);\n    bgAnimationControl.setControlValue(\"ButterflyY\", current.y);\n    bgAnimationControl.setControlValue(\"ButterflyZoom\", current.z);\n\n    bgAnimationControl.startTrack(\"ButterflyWings\", { speed: 0.2 });\n    await delayFrames(\"bfParked\", 320);\n    let isFlying = false;\n\n    const flyTo = (x: number, y: number, z: number) => {\n      if (!isFlying) {\n        bgAnimationControl.startTrack(\"ButterflyWings\");\n        isFlying = true;\n      }\n      if (x < current.x) {\n        bgAnimationControl.setControlValue(\"ButterflyTurn\", 0);\n      } else {\n        bgAnimationControl.setControlValue(\"ButterflyTurn\", 1);\n      }\n      return Promise.all([\n        animationTween(\"ButterflyX\", current.x, x, flySpeed, (value) => {\n          current.x = value;\n          bgAnimationControl.setControlValue(\"ButterflyX\", value);\n        }),\n        animationTween(\"ButterflyY\", current.y, y, flySpeed, (value) => {\n          current.y = value;\n          bgAnimationControl.setControlValue(\"ButterflyY\", value);\n        }),\n        animationTween(\"ButterflyZoom\", current.z, z, zoomSpeed, (value) => {\n          current.z = value;\n          bgAnimationControl.setControlValue(\"ButterflyZoom\", value);\n        }),\n      ]);\n    };\n\n    const flyToRandom = () => {\n      const distance = Math.random() * 0.3;\n      let xPos = Math.random() > 0.5 ? 1 : -1;\n      let yPos = Math.random() > 0.5 ? 1 : -1;\n      if (current.x + xPos * distance > 1 || current.x + xPos * distance < 0) {\n        xPos *= -1;\n      }\n      if (current.y + yPos * distance > 1 || current.y + yPos * distance < 0) {\n        yPos *= -1;\n      }\n\n      const x = current.x + xPos * distance;\n      const y = current.y + yPos * distance;\n      const z = Math.min(Math.max(current.z + Math.random() * distance, 0), 1);\n      return flyTo(x, y, z);\n    };\n\n    while (true) {\n      const destination = Math.random();\n      if (destination > 0.95) {\n        await flyTo(REST_TOADSTOOL.x, REST_TOADSTOOL.y, REST_TOADSTOOL.z);\n        if (isFlying) {\n          bgAnimationControl.startTrack(\"ButterflyWings\", { speed: 0.2 });\n          isFlying = false;\n        }\n        await delayFrames(\"bfParked\", 320);\n      } else if (destination < 0.05) {\n        await flyTo(REST_STUMP.x, REST_STUMP.y, REST_STUMP.z);\n        if (isFlying) {\n          bgAnimationControl.startTrack(\"ButterflyWings\", { speed: 0.2 });\n          isFlying = false;\n        }\n        await delayFrames(\"bfParked\", 320);\n      } else {\n        await flyToRandom();\n      }\n    }\n  };\n\n  const girlEyes = () => {\n    let currentLooking = [0, 0];\n    const eyesCentered = [0.145, 0.388];\n    const LOOK_KEEP_POSITION = 180;\n    const eyeSpeed = 0.025;\n\n    const lookAt = (x: number, y: number): Promise<void> =>\n      Promise.all([\n        animationTween(\"eye-X\", currentLooking[0], x, eyeSpeed, (value) => {\n          currentLooking[0] = value;\n          charAnimationControls.setControlValue(\"RightEye-x\", value + 1.0);\n          charAnimationControls.setControlValue(\"LeftEye-x\", value + 1.0);\n          charAnimationControls.setControlValue(\n            \"HeadTurn\",\n            1.0 - (value + 1.0) * 0.5\n          );\n        }),\n        animationTween(\"eye-Y\", currentLooking[1], y, eyeSpeed, (value) => {\n          currentLooking[1] = value;\n          charAnimationControls.setControlValue(\n            \"RightEye-y\",\n            (value + 1.0) * 0.5\n          );\n          charAnimationControls.setControlValue(\n            \"LeftEye-y\",\n            (value + 1.0) * 0.5\n          );\n        }),\n      ]).then(() => {});\n\n    canvas.addEventListener(\"click\", async (event) => {\n      const box = canvas.getBoundingClientRect();\n      const position = [event.x / box.width, event.y / box.height];\n\n      if (\n        position[0] > 0.203 &&\n        position[0] < 0.263 &&\n        position[1] > 0.458 &&\n        position[1] < 0.706 &&\n        inkeeperInDistance\n      ) {\n        charAnimationControls.setZoom(innKeeperClose.zoom);\n        charAnimationControls.setPanning(\n          innKeeperClose.panX,\n          innKeeperClose.panY\n        );\n        inkeeperInDistance = false;\n        conversation(charAnimationControls).then(() => {\n          charAnimationControls.setZoom(innKeeperDistance.zoom);\n          charAnimationControls.setPanning(\n            innKeeperDistance.panX,\n            innKeeperDistance.panY\n          );\n          inkeeperInDistance = true;\n          charAnimationControls.startTrack(\"Sweeping\");\n        });\n        return;\n      }\n\n      const x = Math.min(\n        1,\n        Math.max(-1, (position[0] - eyesCentered[0]) / 0.4)\n      );\n      const y = Math.min(\n        1,\n        Math.max(-1, (position[1] - eyesCentered[1]) / 0.4)\n      );\n      cleanTicker(\"resetDelay\");\n      await lookAt(x, y);\n      await delayFrames(\"resetDelay\", LOOK_KEEP_POSITION);\n      await lookAt(0, -0.1);\n    });\n\n    lookAt(0, -0.1);\n  };\n\n  girlEyes();\n  butterFly();\n\n  const renderFrame = () => {\n    tick();\n\n    player.render();\n    bgAnimationControl.render();\n    charAnimationControls.render();\n    window.requestAnimationFrame(renderFrame);\n  };\n\n  window.requestAnimationFrame(renderFrame);\n};\n\nstart();\n"],"names":["$ae84394881564208$export$b21ee0bf65d27a55","$ae84394881564208$export$ead5d5bcb53fd3dd","controlMutationValueList","mutationValueIndicesList","$964a7fcc072d429b$var$asyncGeneratorStep","gen","resolve","reject","_next","_throw","key","arg","info","value","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","obj","Object","defineProperty","enumerable","configurable","writable","target","i","length","source","ownKeys","keys","getOwnPropertySymbols","concat","filter","sym","getOwnPropertyDescriptor","forEach","$f46eab4a26fde349$export$9099ad97b570f7c","iter","Symbol","iterator","prototype","toString","call","Array","from","arr","isArray","$466ee9c6e239fe15$export$9099ad97b570f7c","$280ba92769618cbb$export$9099ad97b570f7c","TypeError","$1213c49975291861$export$9099ad97b570f7c","arr2","$1ba03474b1ae127f$export$9099ad97b570f7c","$5c1f6d401a4f646c$export$9099ad97b570f7c","$parcel$interopDefault","a","__esModule","default","$ae1b1ae2e7416753$export$40339995e8a21591","$ae1b1ae2e7416753$export$357eb1b4f03c1402","$ae1b1ae2e7416753$var$mapping","pairs","id","resolved","Error","parcelRequire","register","JSON","parse","$bda198b3c68a52e7$var$EPSILON","Math","pow","$bda198b3c68a52e7$var$EDGE_STACK","Uint32Array","points","getX","$bda198b3c68a52e7$var$defaultGetX","getY","$bda198b3c68a52e7$var$defaultGetY","n","coords","Float64Array","p","$bda198b3c68a52e7$export$9099ad97b570f7c","maxTriangles","max","_triangles","_halfedges","Int32Array","_hashSize","ceil","sqrt","_hullPrev","_hullNext","_hullTri","_hullHash","fill","_ids","_dists","update","[object Object]","coords1","hullPrev","hullNext","hullTri","hullHash","n1","minX","Infinity","minY","maxX","maxY","x","y","cx","cy","i0","i1","i2","minDist","i3","d","$bda198b3c68a52e7$var$dist","i0x","i0y","i4","i1x","i1y","minRadius","i5","r","$bda198b3c68a52e7$var$circumradius","i2x","i2y","i6","$bda198b3c68a52e7$var$quicksort","hull","j","i7","d0","subarray","triangles","halfedges","$bda198b3c68a52e7$var$orient","center","ax","ay","bx","by","dx","dy","ex","ey","bl","cl","$bda198b3c68a52e7$var$circumcenter","_cx","_cy","_hullStart","hullSize","_hashKey","trianglesLen","_addTriangle","xp","yp","k","abs","start","q","e","t","_legalize","n2","floor","$bda198b3c68a52e7$var$pseudoAngle","ar","b","a0","b0","al","p0","pr","pl","p1","$bda198b3c68a52e7$var$inCircle","hbl","_link","br","c","$bda198b3c68a52e7$var$orientIfSure","px","py","rx","ry","qx","qy","l","fx","fy","bp","cp","ids","dists","left","right","temp","tempDist","$bda198b3c68a52e7$var$swap","tmp","$1aceb163fe6843d012904ca42b7b6bc0$export$MixMode","MixMode","$db3b4e7986eb7bc996e8525fdd634ed6$export$flatten","vectors","reduce","result","vec","$db3b4e7986eb7bc996e8525fdd634ed6$export$vectorArrayToPreparedFloatBuffer","array","data","Float32Array","stride","$ceb0420c4113c2ecc99e21a158a61102$export$isShapeDefinition","item","type","$ceb0420c4113c2ecc99e21a158a61102$export$visitShapes","shapes","visitor","parents","shape","mutator","mutationVectors","items","$1aceb163fe6843d012904ca42b7b6bc0$var$vectorTypeMapping","translate","stretch","rotate","deform","opacity","lightness","colorize","saturation","$1aceb163fe6843d012904ca42b7b6bc0$var$getParentMutation","parentShape","$ae84394881564208$var$r","mutatorIndex","indexOf","$1aceb163fe6843d012904ca42b7b6bc0$var$convertAnimations","imageDefinition","controlNames","controls","map","name","animations","tracks","events","keyframes","frame","event","push","time","controlValues","v","controlName","frames","duration","looping","$1aceb163fe6843d012904ca42b7b6bc0$var$getMixMode","mutType","MULTIPLY","HUE","ADD","$1aceb163fe6843d012904ca42b7b6bc0$var$SUPPORTED_VERSIONS","includes","version","elements","vertices","indices","anchor","shapeIndices","_delaunator","itemOffset","offset","amount","z","index","mutatorInfo","$1aceb163fe6843d012904ca42b7b6bc0$export$createMutationList","mutatorIndices","mutators","mutatorMapping","$ceb0420c4113c2ecc99e21a158a61102$var$isColorVector","origin","radius","parentMutation","findIndex","parent","shapeMutatorMapping","parentList","vectorSettings","mutatorCount","mutationValues","entries","defaultFrame","controlMutationIndicesList","element","sort","mutationControlData","control","controlMutations","steps","mutation","values","controlIndex","controlData","valueStartIndex","stepType","maxIteration","directControls","keyAsString","parseInt","mixMode","trackX","trackY","mutatorParents","controlMutationValues","mutationValueIndices","controlMutationIndices","defaultControlValues","shapeVertices","Uint16Array","$ae84394881564208$var$E","$ae84394881564208$var$t","$ee20241578dfe016a4735d9f0e333837$export$mix","factor","$ee20241578dfe016a4735d9f0e333837$export$mixHue","aa","ba","$ee20241578dfe016a4735d9f0e333837$export$interpolateFloat","track","position","startValue","param","mixer","previousPos","previousValue","mix","$aa4524bbb256a033983e8ae8e4ff6f5d$var$DEFAULT_OPTIONS","zoom","panX","panY","zIndex","$aa4524bbb256a033983e8ae8e4ff6f5d$var$getContext","gl","getContext","premultipliedalpha","depth","antialias","powerPreference","clearColor","enable","DEPTH_TEST","BLEND","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","createPlayer","onTrackStoppedListeners","onCustomEventListeners","render","clear","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","viewport","width","height","addAnimation","animation","image","textureUnit","options","unit","TEXTURE0","TEXTURE1","TEXTURE2","TEXTURE3","TEXTURE4","TEXTURE5","TEXTURE6","TEXTURE7","TEXTURE8","TEXTURE9","$aa4524bbb256a033983e8ae8e4ff6f5d$var$setupWebGLProgram","program","createProgram","vertexShaderSource","vs","createShader","VERTEX_SHADER","fs","FRAGMENT_SHADER","deleteProgram","deleteShader","shaderSource","compileShader","attachShader","linkProgram","getProgramParameter","LINK_STATUS","console","getProgramInfoLog","getShaderInfoLog","useProgram","texture","createTexture","bindTexture","TEXTURE_2D","texParameteri","TEXTURE_WRAP_S","CLAMP_TO_EDGE","TEXTURE_WRAP_T","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","UNSIGNED_BYTE","uniform2f","getUniformLocation","parentLocation","uniform1iv","setBuffer","uniform","buffer","uniformLocation","uniform2fv","uniform3fv","uniform4fv","mutationValuesLocation","uControlValues","uniform1fv","renderControlValues","vertexBuffer","createBuffer","indexBuffer","bindBuffer","ARRAY_BUFFER","bufferData","STATIC_DRAW","ELEMENT_ARRAY_BUFFER","uBasePosition","uTranslate","uMutation","uViewport","uScale","aCoord","getAttribLocation","aTexCoord","cWidth","cHeight","basePosition","scale","playingAnimations","trackNames","stopTrack","playingIndex","playing","playTime","now","Date","startedAt","startAt","playingAnimation","splice","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","listener","nameToControlIndex","join","nameToTrackIndex","trackName","trackIndex","newAnimation","destroy","deleteTexture","deleteBuffer","setLooping","loop","startTrack","ref2","speed","animationControls","controlNr","some","iterationStartedAt","lastRender","setControlValue","maxValue","getControlValue","setPanning","newPanX","newPanY","setZoom","newZoom","setZIndex","newZIndex","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","enableVertexAttribArray","canvasWidth","canvasHeight","landscape","uniform4f","activeTexture","uniform1i","uniform3f","playPosition","absTime","handler","updatedMutationValues","ctrlValue","xValue","yValue","hue","uniform1f","drawElements","TRIANGLES","UNSIGNED_SHORT","onTrackStopped","callback","onEvent","anim","$b7a1960c0af1b245$export$da289beea9c5b10d","$b7a1960c0af1b245$var$bundleURL","$b7a1960c0af1b245$var$getBaseURL","url","replace","matches","stack","match","$b7a1960c0af1b245$var$getBundleURL","$3dad7b1b81c67263$exports","getBundleURL","$c60ade24304bad41$exports","$227ab8375dff8413$exports","$d61446c31df27573$exports","$596c2ad3dfb1ac3f$var$tweens","$596c2ad3dfb1ac3f$export$e61734d8adcbba1","$596c2ad3dfb1ac3f$export$bcc4057fe1562e84","applier","current","ticker","min","$596c2ad3dfb1ac3f$export$e351ee336d02697b","$596c2ad3dfb1ac3f$export$6e7d0dd21bd8bf68","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","next","return","$d24dca766201868e$var$runtime","exports","Op","hasOwn","hasOwnProperty","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","toStringTag","define","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","create","context","Context","_invoke","state","GenStateSuspendedStart","method","GenStateExecuting","GenStateCompleted","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","GenStateSuspendedYield","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","getPrototypeOf","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","invoke","__await","value1","unwrapped","previousPromise","callInvokeWithMethodAndArg","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","next1","displayName","isGeneratorFunction","genFun","ctor","constructor","mark","setPrototypeOf","__proto__","awrap","async","object","reverse","key1","pop","skipTempReset","prev","charAt","slice","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","$d24dca766201868e$exports","regeneratorRuntime","accidentalStrictMode","globalThis","Function","$77758abdc17ff81a$var$root","document","getElementById","$77758abdc17ff81a$var$awaitClick","$964a7fcc072d429b$export$9099ad97b570f7c","_callee","dialog","getElementsByClassName","removeEventListener","addEventListener","$77758abdc17ff81a$var$charSay","character","talkDelay","_callee1","message","showText","text","dialogBox","createElement","classList","add","nameField","textContent","appendChild","textField","removeChild","hideText","$77758abdc17ff81a$var$dialog","inConversation","choiceAPI","choiceBox","choice","endDialog","button","setTimeout","_ctx","$77758abdc17ff81a$var$END","$77758abdc17ff81a$var$dialogText","$77758abdc17ff81a$var$playDialog","_callee2","dialogText","talkFn","_param","tree","_callee3","param1","t0","$77758abdc17ff81a$export$b32e64317b841329","say","$ecbac8c4017492b8$var$canvas","$ecbac8c4017492b8$var$player","$ecbac8c4017492b8$var$loadTexture","Image","crossOrigin","src","onload","bgTexture","preppedBgAnim","bgAnimationControl","charTexture","preppedCharAnim","innKeeperDistance","innKeeperClose","charAnimationControls","setCanvasSize","inkeeperInDistance","butterFly","renderFrame","box","getBoundingClientRect","override","navigator","userAgent","window","devicePixelRatio","eventName","flySpeed","zoomSpeed","REST_TOADSTOOL","REST_STUMP","isFlying","flyTo","flyToRandom","destination","$4a9cc112c2d8fe8a$export$9099ad97b570f7c","all","distance","random","xPos","yPos","currentLooking","eyesCentered","lookAt","girlEyes","requestAnimationFrame","$ecbac8c4017492b8$var$start"],"version":3,"file":"index.41f629df.js.map"}