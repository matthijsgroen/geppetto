function t(t,e,a,o){Object.defineProperty(t,e,{get:a,set:o,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var a,o,r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},s=r.parcelRequireefef;function l(t){return t&&t.__esModule?t.default:t}null==s&&((s=function(t){if(t in n)return n[t].exports;if(t in i){var e=i[t];delete i[t];var a={id:t,exports:{}};return n[t]=a,e.call(a.exports,a,a.exports),a.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){i[t]=e},r.parcelRequireefef=s),s.register("foDNa",(function(e,a){var o,r;t(e.exports,"register",(function(){return r}),(function(t){return r=t})),t(e.exports,"resolve",(function(){return o}),(function(t){return o=t}));var n={};r=function(t){for(var e=Object.keys(t),a=0;a<e.length;a++)n[e[a]]=t[e[a]]},o=function(t){var e=n[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),s("foDNa").register(JSON.parse('{"10eGt":"index.ade17cce.js","bw3md":"colortest.5cab8ed5.png","bLTnS":"innkeeper.ffe12671.png"}')),s.register("kd3Pz",(function(e,a){var o;o=e.exports,Object.defineProperty(o,"__esModule",{value:!0,configurable:!0}),t(e.exports,"default",(function(){return i}));const r=Math.pow(2,-52),n=new Uint32Array(512);class i{static from(t,e=y,a=f){const o=t.length,r=new Float64Array(2*o);for(let n=0;n<o;n++){const o=t[n];r[2*n]=e(o),r[2*n+1]=a(o)}return new i(r)}constructor(t){const e=t.length>>1;if(e>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const a=Math.max(2*e-5,0);this._triangles=new Uint32Array(3*a),this._halfedges=new Int32Array(3*a),this._hashSize=Math.ceil(Math.sqrt(e)),this._hullPrev=new Uint32Array(e),this._hullNext=new Uint32Array(e),this._hullTri=new Uint32Array(e),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(e),this._dists=new Float64Array(e),this.update()}update(){const{coords:t,_hullPrev:e,_hullNext:a,_hullTri:o,_hullHash:n}=this,i=t.length>>1;let l=1/0,m=1/0,d=-1/0,y=-1/0;for(let e=0;e<i;e++){const a=t[2*e],o=t[2*e+1];a<l&&(l=a),o<m&&(m=o),a>d&&(d=a),o>y&&(y=o),this._ids[e]=e}const f=(l+d)/2,h=(m+y)/2;let g,w,M,V=1/0;for(let e=0;e<i;e++){const a=s(f,h,t[2*e],t[2*e+1]);a<V&&(g=e,V=a)}const E=t[2*g],T=t[2*g+1];V=1/0;for(let e=0;e<i;e++){if(e===g)continue;const a=s(E,T,t[2*e],t[2*e+1]);a<V&&a>0&&(w=e,V=a)}let v=t[2*w],N=t[2*w+1],b=1/0;for(let e=0;e<i;e++){if(e===g||e===w)continue;const a=c(E,T,v,N,t[2*e],t[2*e+1]);a<b&&(M=e,b=a)}let L=t[2*M],x=t[2*M+1];if(b===1/0){for(let e=0;e<i;e++)this._dists[e]=t[2*e]-t[0]||t[2*e+1]-t[1];p(this._ids,this._dists,0,i-1);const e=new Uint32Array(i);let a=0;for(let t=0,o=-1/0;t<i;t++){const r=this._ids[t];this._dists[r]>o&&(e[a++]=r,o=this._dists[r])}return this.hull=e.subarray(0,a),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(u(E,T,v,N,L,x)){const t=w,e=v,a=N;w=M,v=L,N=x,M=t,L=e,x=a}const k=function(t,e,a,o,r,n){const i=a-t,s=o-e,l=r-t,u=n-e,m=i*i+s*s,c=l*l+u*u,p=.5/(i*u-s*l);return{x:t+(u*m-s*c)*p,y:e+(i*c-l*m)*p}}(E,T,v,N,L,x);this._cx=k.x,this._cy=k.y;for(let e=0;e<i;e++)this._dists[e]=s(t[2*e],t[2*e+1],k.x,k.y);p(this._ids,this._dists,0,i-1),this._hullStart=g;let B=3;a[g]=e[M]=w,a[w]=e[g]=M,a[M]=e[w]=g,o[g]=0,o[w]=1,o[M]=2,n.fill(-1),n[this._hashKey(E,T)]=g,n[this._hashKey(v,N)]=w,n[this._hashKey(L,x)]=M,this.trianglesLen=0,this._addTriangle(g,w,M,-1,-1,-1);for(let i,s,l=0;l<this._ids.length;l++){const m=this._ids[l],c=t[2*m],p=t[2*m+1];if(l>0&&Math.abs(c-i)<=r&&Math.abs(p-s)<=r)continue;if(i=c,s=p,m===g||m===w||m===M)continue;let d=0;for(let t=0,e=this._hashKey(c,p);t<this._hashSize&&(d=n[(e+t)%this._hashSize],-1===d||d===a[d]);t++);d=e[d];let y,f=d;for(;y=a[f],!u(c,p,t[2*f],t[2*f+1],t[2*y],t[2*y+1]);)if(f=y,f===d){f=-1;break}if(-1===f)continue;let h=this._addTriangle(f,m,a[f],-1,-1,o[f]);o[m]=this._legalize(h+2),o[f]=h,B++;let V=a[f];for(;y=a[V],u(c,p,t[2*V],t[2*V+1],t[2*y],t[2*y+1]);)h=this._addTriangle(V,m,y,o[m],-1,o[V]),o[m]=this._legalize(h+2),a[V]=V,B--,V=y;if(f===d)for(;y=e[f],u(c,p,t[2*y],t[2*y+1],t[2*f],t[2*f+1]);)h=this._addTriangle(y,m,f,-1,o[f],o[y]),this._legalize(h+2),o[y]=h,a[f]=f,B--,f=y;this._hullStart=e[m]=f,a[f]=e[V]=m,a[m]=V,n[this._hashKey(c,p)]=m,n[this._hashKey(t[2*f],t[2*f+1])]=f}this.hull=new Uint32Array(B);for(let t=0,e=this._hullStart;t<B;t++)this.hull[t]=e,e=a[e];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,e){return Math.floor(function(t,e){const a=t/(Math.abs(t)+Math.abs(e));return(e>0?3-a:1+a)/4}(t-this._cx,e-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:e,_halfedges:a,coords:o}=this;let r=0,i=0;for(;;){const s=a[t],l=t-t%3;if(i=l+(t+2)%3,-1===s){if(0===r)break;t=n[--r];continue}const u=s-s%3,c=l+(t+1)%3,p=u+(s+2)%3,d=e[i],y=e[t],f=e[c],h=e[p];if(m(o[2*d],o[2*d+1],o[2*y],o[2*y+1],o[2*f],o[2*f+1],o[2*h],o[2*h+1])){e[t]=h,e[s]=d;const o=a[p];if(-1===o){let e=this._hullStart;do{if(this._hullTri[e]===p){this._hullTri[e]=t;break}e=this._hullPrev[e]}while(e!==this._hullStart)}this._link(t,o),this._link(s,a[i]),this._link(i,p);const l=u+(s+1)%3;r<n.length&&(n[r++]=l)}else{if(0===r)break;t=n[--r]}}return i}_link(t,e){this._halfedges[t]=e,-1!==e&&(this._halfedges[e]=t)}_addTriangle(t,e,a,o,r,n){const i=this.trianglesLen;return this._triangles[i]=t,this._triangles[i+1]=e,this._triangles[i+2]=a,this._link(i,o),this._link(i+1,r),this._link(i+2,n),this.trianglesLen+=3,i}}function s(t,e,a,o){const r=t-a,n=e-o;return r*r+n*n}function l(t,e,a,o,r,n){const i=(o-e)*(r-t),s=(a-t)*(n-e);return Math.abs(i-s)>=33306690738754716e-32*Math.abs(i+s)?i-s:0}function u(t,e,a,o,r,n){return(l(r,n,t,e,a,o)||l(t,e,a,o,r,n)||l(a,o,r,n,t,e))<0}function m(t,e,a,o,r,n,i,s){const l=t-i,u=e-s,m=a-i,c=o-s,p=r-i,d=n-s,y=m*m+c*c,f=p*p+d*d;return l*(c*f-y*d)-u*(m*f-y*p)+(l*l+u*u)*(m*d-c*p)<0}function c(t,e,a,o,r,n){const i=a-t,s=o-e,l=r-t,u=n-e,m=i*i+s*s,c=l*l+u*u,p=.5/(i*u-s*l),d=(u*m-s*c)*p,y=(i*c-l*m)*p;return d*d+y*y}function p(t,e,a,o){if(o-a<=20)for(let r=a+1;r<=o;r++){const o=t[r],n=e[o];let i=r-1;for(;i>=a&&e[t[i]]>n;)t[i+1]=t[i--];t[i+1]=o}else{let r=a+1,n=o;d(t,a+o>>1,r),e[t[a]]>e[t[o]]&&d(t,a,o),e[t[r]]>e[t[o]]&&d(t,r,o),e[t[a]]>e[t[r]]&&d(t,a,r);const i=t[r],s=e[i];for(;;){do{r++}while(e[t[r]]<s);do{n--}while(e[t[n]]>s);if(n<r)break;d(t,r,n)}t[a+1]=t[n],t[n]=i,o-r+1>=n-a?(p(t,e,r,o),p(t,e,a,n-1)):(p(t,e,a,n-1),p(t,e,r,o))}}function d(t,e,a){const o=t[e];t[e]=t[a],t[a]=o}function y(t){return t[0]}function f(t){return t[1]}}));var u=l(s("kd3Pz"));const m=t=>t.reduce(((t,e)=>t.concat(e)),[]),c=t=>({data:new Float32Array(m(t)),length:t.length,stride:void 0===t[0]?0:t[0].length}),p=t=>"folder"===t.type||"sprite"===t.type,d=(t,e,a=[])=>{for(const o of t){e(o,a);for(const t of o.mutationVectors)e(t,[...a,o]);"folder"===o.type&&d(o.items,e,[...a,o])}},y={translate:1,stretch:2,rotate:3,deform:4,opacity:5,lightness:6,colorize:7,saturation:8},f=(t,e)=>{const a=t[t.length-1];if(p(a)){const o=e?a.mutationVectors.indexOf(e):-1;if(o>0)return a.mutationVectors[o-1];for(let a=t.length-(e?2:1);a>=0;a--){const e=t[a];if(e&&p(e)&&e.mutationVectors.length>0)return e.mutationVectors[e.mutationVectors.length-1]}}return null},h=t=>{const e=t.controls.map((t=>t.name));return t.animations.map((t=>{const a=[],o=[];return t.keyframes.reduce(((t,e)=>(e.event&&o.push([e.time,e.event]),t.concat(Object.keys(e.controlValues)))),[]).filter(((t,e,a)=>a.indexOf(t)===e)).forEach((o=>{const r=[];t.keyframes.forEach((t=>{const e=t.controlValues[o];void 0!==e&&r.push([t.time,e])})),a.push([e.indexOf(o),new Float32Array(m(r))])})),{name:t.name,duration:0===t.keyframes.length?0:t.keyframes[t.keyframes.length-1].time,looping:t.looping,tracks:a,events:o}}))};let g;var w;(w=g||(g={}))[w.MULTIPLY=0]="MULTIPLY",w[w.ADD=1]="ADD",w[w.HUE=2]="HUE";const M=t=>t===y.stretch||t===y.lightness||t===y.saturation||t===y.opacity?g.MULTIPLY:t===y.colorize?g.HUE:g.ADD,V=["1.0","1.1"];o=t=>{if(!V.includes(t.version))throw new Error(`Version ${t.version} files are not supported`);const e=[],a=[],o=[];d(t.shapes,(t=>{if("sprite"!==t.type)return;const r=(t=>{let e=1/0,a=-1/0,o=1/0,r=-1/0;return t.points.forEach((([t,n])=>{e=t<e?t:e,a=t>a?t:a,o=n<o?n:o,r=n>r?n:r})),[(e+a)/2,(o+r)/2]})(t),n=(i=t.points,u.from(i).triangles);var i;const s=[...t.translate,.1*e.length],l=a.length;e.push({name:t.name,start:2*o.length,amount:n.length,mutator:0,x:s[0],y:s[1],z:1e-4*s[2]-.9}),t.points.forEach((([t,e])=>{a.push([t-r[0],e-r[1],t,e])})),n.forEach((t=>{o.push(t+l)}))}));const r=(t=>{const e=[],a=[],o={};d(t,((t,r)=>{if((t=>"deform"===t.type||"rotate"===t.type||"translate"===t.type||"stretch"===t.type||"opacity"===t.type)(n=t)||(t=>"lightness"===t.type||"saturation"===t.type||"colorize"===t.type)(n)){const n=[y[(i=t).type],i.origin[0],i.origin[1],"deform"===i.type||"translate"===i.type?i.radius:-1],s=a.length;a.push(n);const l=f(r,t),u=null===l?-1:e.findIndex((t=>t.name===l.name));e.push({name:t.name,index:s,parent:u}),o[t.name]=u}var n,i}));const r={};d(t,((t,a)=>{if(p(t)){const o=f(a.concat(t)),n=null===o?-1:e.findIndex((t=>t.name===o.name));r[t.name]=n}}));const n=new Int32Array(a.length);return e.forEach(((t,e)=>{n[e]=t.parent})),{mutatorMapping:o,parentList:n,vectorSettings:a,shapeMutatorMapping:r}})(t.shapes),n=r.parentList.length,i=Object.keys(r.mutatorMapping),s=[],l=new Float32Array(2*n);Object.entries(t.defaultFrame).forEach((([t,e])=>{const a=i.indexOf(t);-1!==a&&(l[2*a]=e[0],l[2*a+1]=e[1])}));const m=[],g=[],w=[];e.forEach((t=>{t.mutator=r.shapeMutatorMapping[t.name]})),e.sort(((t,e)=>(e.z||0)-(t.z||0)));const E=new Float32Array(t.controls.length),T=t.controls.reduce(((e,a,o)=>{const r=a.steps.reduce(((t,e)=>t.concat(Object.keys(e).filter((e=>!t.includes(e))))),[]);return s.push({name:a.name,steps:a.steps.length}),E[o]=t.controlValues[a.name],r.forEach((o=>{const r=i.indexOf(o),n=a.steps.map((t=>t[o])),s=(null==t?void 0:t.controls.findIndex((t=>t.name===a.name)))||0,l={name:a.name,controlIndex:s,valueStartIndex:0,values:n,stepType:0};e={...e,[r]:(e[r]||[]).concat(l)}})),e}),{});w.length=r.vectorSettings.length,w.fill([0,0]);let v=0;const N=[];return Object.entries(T).forEach((([t,e])=>{const a=parseInt(t,10);if(1===e.length){const t=e[0],o=r.vectorSettings[a][0];return void N.push({mutation:a,mixMode:M(o),control:t.controlIndex,stepType:t.stepType,trackX:new Float32Array(t.values.reduce(((t,e,a)=>t.concat(a,e[0])),[])),trackY:new Float32Array(t.values.reduce(((t,e,a)=>t.concat(a,e[1])),[]))})}if(0===e.length)return;for(const t of e)t.valueStartIndex=m.length,m.push(...t.values);const o=e.map((t=>[t.valueStartIndex,t.controlIndex,t.stepType]));w[a]=[g.length,o.length],v=Math.max(v,o.length),g.push(...o)})),{directControls:N,mutators:c(r.vectorSettings),mutatorParents:{data:r.parentList,length:r.parentList.length,stride:1},mutationValues:{data:l,length:r.parentList.length,stride:2},controlMutationValues:c(m),mutationValueIndices:c(g),controlMutationIndices:c(w),defaultControlValues:E,shapeVertices:c(a),shapeIndices:new Uint16Array(o),shapes:e,controls:s,maxIteration:v,animations:h(t)}};var E=l("precision mediump float;\n#define GLSLIFY 1\nvarying mediump vec2 vTextureCoord;varying lowp float vOpacity;varying lowp float vBrightness;varying lowp float vSaturation;varying lowp float vTargetHue;varying lowp float vTargetSaturation;uniform sampler2D uSampler;uniform mediump vec2 uTextureDimensions;float A(vec3 B){lowp float C=min(min(B.r,B.g),B.b);lowp float D=max(max(B.r,B.g),B.b);return(D+C)/2.;}float E(lowp float F,lowp float G,lowp float H){if(H<0.)H+=1.;else if(H>1.)H-=1.;lowp float I;if((6.*H)<1.)I=F+(G-F)*6.*H;else if((2.*H)<1.)I=G;else if((3.*H)<2.)I=F+(G-F)*((2./3.)-H)*6.;else I=F;return I;}vec3 J(vec3 K){lowp vec3 L;if(K.y==0.)L=vec3(K.z);else{lowp float G;if(K.z<0.5)G=K.z*(1.+K.y);else G=(K.z+K.y)-(K.y*K.z);float F=2.*K.z-G;L.r=E(F,G,K.x+(1./3.));L.g=E(F,G,K.x);L.b=E(F,G,K.x-(1./3.));}return L;}void main(void){highp vec2 M=vTextureCoord.xy/uTextureDimensions;mediump vec4 N=texture2D(uSampler,M);vec3 B=N.rgb;float O=A(B);B=mix(B,J(vec3(vTargetHue,vTargetSaturation,O)),1.-vSaturation)*vBrightness;gl_FragColor=vec4(B*N.a*vOpacity,N.a*vOpacity);}"),T=l("#define GLSLIFY 1\n#define A 0.017453292519943295\nuniform vec2 viewport;uniform vec3 basePosition;uniform vec3 translate;uniform float mutation;uniform vec4 scale;uniform vec2 uMutValues[MAX_MUT];uniform vec4 uMutVectors[MAX_MUT];uniform int uMutParent[MAX_MUT];attribute vec2 coordinates;attribute vec2 aTextureCoord;varying lowp vec2 vTextureCoord;varying lowp float vOpacity;varying lowp float vBrightness;varying lowp float vSaturation;varying lowp float vTargetHue;varying lowp float vTargetSaturation;mat4 B=mat4(2./viewport.x,0,0,0,0,-2./viewport.y,0,0,0,0,1,0,-1,+1,0,1);float C(float D,float E,float F){float G=abs(D-E);float H=D;float I=E;if(D<E&&abs(D+1.-E)<G){H=D+1.;}if(D>E&&abs(E-D+1.)<G){I=E+1.;}return mod(mix(H,I,F),1.);}vec2 J(int K,int L){vec2 M=uMutValues[K];vec2 N=uControlMutIndices[K];int O=int(N.x);int P=int(N.y);if(P==0){return M;}for(int Q=0;Q<MAX_IT;Q++){if(Q<P){vec3 R=uMutValueIndices[O+Q];float S=uControlValues[int(R.y)];int T=int(floor(R.x+S));int U=int(ceil(R.x+S));float V=S-floor(S);vec2 W=uControlMutValues[T];vec2 X=uControlMutValues[U];vec2 Y=mix(W,X,V);if(L==2||L==5||L==6||L==8){M*=Y;}else if(L==7){M=vec2(C(W[0],X[0],V),Y[1]);}else{M+=Y;}}else{return M;}}return M;}mat3 Z(mat3 a,int K){vec4 mutation=uMutVectors[K];int L=int(mutation.x);vec2 b=J(K,L);vec2 c=mutation.yz;vec3 M=a[0];vec3 d=a[1];vec3 e=a[2];if(L==1){float e=1.;if(mutation.a>0.&&distance(M.xy,c)>mutation.a){e=0.;}M=vec3(M.xy+b*e,M.z);}if(L==2){M=vec3(c.xy+vec2((M.x-c.x)*b.x,(M.y-c.y)*b.y),M.z);}if(L==3){float f=b.x*A;mat2 g=mat2(cos(f),sin(f),-sin(f),cos(f));M=vec3((M.xy-c)*g+c,M.z);}if(L==4){float e=1.-clamp(distance(M.xy,c),0.,mutation.a)/mutation.a;M=vec3(M.xy+b*e,M.z);}if(L==5){M=vec3(M.xy,M.z*b.x);}if(L==6){d=vec3(b.x*d.x,d.yz);}if(L==7){e=vec3(b.xy,e.z);}if(L==8){d=vec3(d.x,b.x*d.y,d.z);}return mat3(M,d,e);}mat3 h(mat3 a,int K){int i=K;mat3 M=a;for(int Q=0;Q<MAX_MUT;Q++){if(i==-1){return M;}M=Z(M,i);i=uMutParent[i];}return M;}void main(){mat3 O=mat3(coordinates+translate.xy,1.,1.,1.,0,0,0,0);mat3 j=h(O,int(mutation));vec3 k=j[0];vec3 l=j[1];vec3 m=j[2];vec4 n=B*vec4((k.xy+basePosition.xy)*scale.x,translate.z-basePosition.z,1.);gl_Position=vec4((n.xy+scale.ba)*scale.y,n.z,1.);vTextureCoord=aTextureCoord.xy;vOpacity=k.z;vBrightness=l.x;vSaturation=l.y;vTargetHue=m.x;vTargetSaturation=m.y;}");const v=(t,e,a)=>t*(1-a)+e*a,N=(t,e,a)=>{const o=Math.abs(t-e);let r=t,n=e;return t<e&&Math.abs(t+1-e)<o&&(r+=1),t>e&&Math.abs(e-t+1)<o&&(n+=1),v(r,n,a)%1},b=(t,e,a=0,o=v)=>{for(let r=0;r<t.length;r+=2)if(t[r]>e){const n=r>1?t[r-2]:0,i=r>1?t[r-1]:a,s=(e-n)/(t[r]-n);return o(i,t[r+1],s)}return t[t.length-1]},L={zoom:1,panX:0,panY:0,zIndex:0},x=t=>{const e=t.getContext("webgl",{premultipliedalpha:!0,depth:!0,antialias:!0,powerPreference:"low-power"});if(!e)throw new Error("Canvas has no webgl context available");return e};a=t=>{const e=x(t);return e.clearColor(0,0,0,1),e.enable(e.DEPTH_TEST),e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),k(t)};const k=t=>{const e=x(t),a=[];let o=[],r=[];return{render:()=>{e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT),e.viewport(0,0,t.width,t.height)},addAnimation:(n,i,s,l)=>{const u=[e.TEXTURE0,e.TEXTURE1,e.TEXTURE2,e.TEXTURE3,e.TEXTURE4,e.TEXTURE5,e.TEXTURE6,e.TEXTURE7,e.TEXTURE8,e.TEXTURE9][s],[m,c,p]=((t,e)=>{const a=t.createProgram();if(!a)throw new Error("Failed to create shader program");const o=`\n#define MAX_MUT ${(i=e).mutators.length}\n#define MAX_IT ${i.maxIteration}\nuniform vec2 uControlMutValues[${i.controlMutationValues.length}];\nuniform vec3 uMutValueIndices[${i.mutationValueIndices.length}];\nuniform vec2 uControlMutIndices[${i.controlMutationIndices.length}];\nuniform float uControlValues[${i.controls.length}];\n${T}\n`,r=t.createShader(t.VERTEX_SHADER),n=t.createShader(t.FRAGMENT_SHADER);var i;if(!r||!n)throw t.deleteProgram(a),t.deleteShader(r),t.deleteShader(n),new Error("Failed to create shader program");if(t.shaderSource(r,o),t.shaderSource(n,E),t.compileShader(r),t.compileShader(n),t.attachShader(a,r),t.attachShader(a,n),t.linkProgram(a),!t.getProgramParameter(a,t.LINK_STATUS))throw console.error("Link failed: "+t.getProgramInfoLog(a)),console.error("vs info-log: "+t.getShaderInfoLog(r)),console.error("fs info-log: "+t.getShaderInfoLog(n)),new Error("Could not initialise shaders");return[a,r,n]})(e,n);e.useProgram(m);const d=((t,e,a)=>{const o=t.createTexture();return t.bindTexture(t.TEXTURE_2D,o),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,a),t.useProgram(e),t.uniform2f(t.getUniformLocation(e,"uTextureDimensions"),a.width,a.height),o})(e,m,i),y=e.getUniformLocation(m,"uMutParent");e.uniform1iv(y,n.mutatorParents.data);const f=(w=e,M=m,(t,e)=>{const a=w.getUniformLocation(M,t),o=e.stride;return 2==o?w.uniform2fv(a,e.data):3==o?w.uniform3fv(a,e.data):4==o&&w.uniform4fv(a,e.data),a}),h=f("uMutValues",n.mutationValues);var w,M;f("uMutVectors",n.mutators),f("uControlMutValues",n.controlMutationValues),f("uMutValueIndices",n.mutationValueIndices),f("uControlMutIndices",n.controlMutationIndices);const V=e.getUniformLocation(m,"uControlValues");e.uniform1fv(V,n.defaultControlValues);const v=new Float32Array(n.defaultControlValues),x=new Float32Array(n.defaultControlValues),k=e.createBuffer(),B=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,k),e.bufferData(e.ARRAY_BUFFER,n.shapeVertices.data,e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,B),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n.shapeIndices,e.STATIC_DRAW),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null);const _=e.getUniformLocation(m,"basePosition"),A=e.getUniformLocation(m,"translate"),R=e.getUniformLocation(m,"mutation"),S=e.getUniformLocation(m,"viewport"),C=e.getUniformLocation(m,"scale"),I=e.getAttribLocation(m,"coordinates"),D=e.getAttribLocation(m,"aTextureCoord");let F=0,U=0,{zoom:P,panX:O,panY:z,zIndex:H}={...L,...l},X=[0,0],W=1;const G=[],Y=n.animations.map((t=>t.name)),K=n.controls.map((t=>t.name)),j=n.animations.map((t=>t.looping)),$=t=>{const e=G.findIndex((e=>e.name===t));if(-1===e)return;const a=G[e];let r=+new Date-a.startedAt+a.startAt;const i=n.animations[a.index];j[a.index]&&(r%=i.duration),G.splice(e,1);for(const[t,e]of i.tracks){const a=b(e,r,v[t]);v[t]=a}for(const e of o)e(t)},q=t=>{const e=K.indexOf(t);if(-1===e)throw new Error(`Control ${t} does not exist in ${K.join(",")}`);return e},J=t=>{const e=Y.indexOf(t);if(-1===e)throw new Error(`Track ${t} does not exist in ${Y.join(",")}`);return e},Z={destroy:function(){e.deleteShader(c),e.deleteShader(p),e.deleteProgram(m),e.deleteTexture(d),e.deleteBuffer(k),e.deleteBuffer(B),a.splice(a.indexOf(Z),1)},setLooping:function(t,e){const a=J(e);j[a]=t},startTrack:function(t,{startAt:e=0,speed:a=1}={}){const o=J(t),r=n.animations[o].tracks.map((([t])=>t));for(const t of G)n.animations[t.index].tracks.some((([t])=>r.includes(t)))&&$(Y[t.index]);G.push({name:t,index:o,startAt:e,speed:a,startedAt:+new Date,iterationStartedAt:+new Date-e/a,lastRender:0})},stopTrack:$,setControlValue:(t,e)=>{const a=q(t),o=n.controls[a].steps-1;if(e<0||e>o)throw new Error(`Control ${t} value shoulde be between 0 and ${o}. ${e} is out of bounds.`);for(const t of G)n.animations[t.index].tracks.some((([t])=>t===a))&&$(Y[t.index]);v[a]=e,x[a]=e},getControlValue:t=>v[q(t)],setPanning:function(t,e){O=t,z=e},setZoom:function(t){P=t},setZIndex:function(t){H=t},render:function(){if(e.useProgram(m),e.bindBuffer(e.ARRAY_BUFFER,k),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,B),e.vertexAttribPointer(I,2,e.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,0),e.enableVertexAttribArray(I),e.vertexAttribPointer(D,2,e.FLOAT,!1,4*Float32Array.BYTES_PER_ELEMENT,2*Float32Array.BYTES_PER_ELEMENT),e.enableVertexAttribArray(D),t.width!==F||t.height!==U){const a=t.width,o=t.height,r=i.width/a>i.height/o;W=r?a/i.width:o/i.height,e.uniform2f(S,a,o),X=[a/2/W,o/2/W],F=t.width,U=t.height}e.uniform4f(C,W,P,O,z),e.activeTexture(u),e.bindTexture(e.TEXTURE_2D,d),e.uniform1i(e.getUniformLocation(m,"uSampler"),s),e.uniform3f(_,X[0],X[1],.01*H);const a=+new Date;for(const t of G){const e=(a-t.iterationStartedAt)*t.speed,o=n.animations[t.index],i=e%o.duration;if(o.duration<e){if(!j[t.index]){$(o.name);continue}t.iterationStartedAt=a-i;for(const[t]of o.tracks)v[t]=x[t]}for(const[e,n]of o.events){const o=t.iterationStartedAt+e/t.speed;if(o<a&&o>t.lastRender)for(const a of r)a(n,t.name,e)}t.lastRender=a;for(const[t,e]of o.tracks){const a=b(e,i,v[t]);x[t]=a}}const o=Float32Array.from(n.mutationValues.data);for(const t of n.directControls){const e=x[t.control],a=b(t.trackX,e),r=b(t.trackY,e);if(t.mixMode===g.MULTIPLY)o[2*t.mutation]*=a,o[2*t.mutation+1]*=r;else if(t.mixMode===g.ADD)o[2*t.mutation]+=a,o[2*t.mutation+1]+=r;else{const a=b(t.trackX,e,0,N);o[2*t.mutation]=a,o[2*t.mutation+1]*=r}}e.uniform2fv(h,o),e.uniform1fv(V,x);for(const t of n.shapes)e.uniform3f(A,t.x,t.y,t.z),e.uniform1f(R,t.mutator),e.drawElements(e.TRIANGLES,t.amount,e.UNSIGNED_SHORT,t.start)},onTrackStopped:function(t){return o=o.concat(t),()=>{o=o.filter((e=>e!==t))}},onEvent:function(t){return r=r.concat(t),()=>{r=r.filter((e=>e!==t))}}};return a.push(Z),Z},destroy:function(){for(const t of a)t.destroy();a.length=0}}};var B;s.register("96fqt",(function(e,a){var o;t(e.exports,"getBundleURL",(function(){return o}),(function(t){return o=t}));var r={};function n(t){return(""+t).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(t)return n(t[2])}return"/"}(),r[t]=e),e}})),B=s("96fqt").getBundleURL("10eGt")+s("foDNa").resolve("bw3md");var _;_=JSON.parse('{"animations":[{"name":"Wheel","looping":true,"keyframes":[{"time":0,"controlValues":{"WheelRotate":1}},{"time":19200,"controlValues":{"WheelRotate":0}}]},{"name":"Tree","looping":true,"keyframes":[{"time":0,"controlValues":{"TreeLeaves1":0}},{"time":500,"controlValues":{"TreeLeaves2":0}},{"time":8000,"controlValues":{"TreeLeaves1":1}},{"time":8500,"controlValues":{"TreeLeaves2":1}},{"time":16000,"controlValues":{"TreeLeaves1":0,"TreeLeaves2":0.04}}]},{"name":"Bird","looping":true,"keyframes":[{"time":6000,"controlValues":{"Beak":0}},{"time":6200,"controlValues":{"Beak":1}},{"time":7000,"controlValues":{"Beak":1}},{"time":7200,"controlValues":{"Beak":0}}]},{"name":"Cloud1","looping":true,"keyframes":[{"time":0,"controlValues":{"Cloud1":0.5}},{"time":20000,"controlValues":{"Cloud1":1}},{"time":20001,"controlValues":{"Cloud1":0}},{"time":40000,"controlValues":{"Cloud1":0.5}}]},{"name":"Eyes","looping":true,"keyframes":[{"time":0,"controlValues":{"EyesBlink":0}},{"time":3000,"controlValues":{"EyesBlink":0}},{"time":3300,"controlValues":{"EyesBlink":1}},{"time":3500,"controlValues":{"EyesBlink":1}},{"time":3700,"controlValues":{"EyesBlink":0}}]},{"name":"ButterflyWings","looping":true,"keyframes":[{"time":300,"controlValues":{"ButterflyWings":1}},{"time":600,"controlValues":{"ButterflyWings":0}}]},{"name":"Smoke","looping":true,"keyframes":[{"time":0,"controlValues":{"Rook":0,"Smoke":0}},{"time":10000,"controlValues":{"Rook":1,"Smoke":1}}]},{"name":"Cloud2","looping":true,"keyframes":[{"time":0,"controlValues":{"Cloud2":0.8}},{"time":30000,"controlValues":{"Cloud2":0}},{"time":30001,"controlValues":{"Cloud2":1}},{"time":40000,"controlValues":{"Cloud2":0.8}}]},{"name":"Cloud3","looping":true,"keyframes":[{"time":0,"controlValues":{"Cloud3":0.2}},{"time":10000,"controlValues":{"Cloud3":0}},{"time":10001,"controlValues":{"Cloud3":1}},{"time":40000,"controlValues":{"Cloud3":0.2}}]},{"name":"WheelBlades","looping":true,"keyframes":[{"time":0,"controlValues":{"WheelBlades":0}},{"time":1600,"controlValues":{"WheelBlades":1}}]},{"name":"Water","looping":true,"keyframes":[{"time":0,"controlValues":{"Bubble":1.6,"Bubble2":0.9,"Bubble3":0.3}},{"time":400,"controlValues":{"Bubble":2}},{"time":401,"controlValues":{"Bubble":0}},{"time":1600,"controlValues":{"Bubble2":1.6,"Bubble3":0.9,"Bubble":0.3}},{"time":2000,"controlValues":{"Bubble2":2}},{"time":2001,"controlValues":{"Bubble2":0}},{"time":3200,"controlValues":{"Bubble3":1.6,"Bubble":0.9,"Bubble2":0.3}},{"time":3600,"controlValues":{"Bubble3":2}},{"time":3601,"controlValues":{"Bubble3":0}},{"time":4800,"controlValues":{"Bubble2":0.9,"Bubble3":0.3,"Bubble":1.6}}]},{"name":"Day night","looping":true,"keyframes":[{"time":0,"controlValues":{"DayNight":0}},{"time":4000,"controlValues":{"DayNight":0.36},"event":"evening"},{"time":15000,"controlValues":{"DayNight":2}},{"time":19000,"controlValues":{"DayNight":2},"event":"endNight"},{"time":25000,"controlValues":{"DayNight":3.16},"event":"morning"},{"time":34000,"controlValues":{"DayNight":4}},{"time":40000,"controlValues":{"DayNight":4}}]},{"name":"LightFlicker","looping":true,"keyframes":[{"time":630,"controlValues":{"Light":0.72}},{"time":1210,"controlValues":{"Light":0.78}},{"time":1870,"controlValues":{"Light":0.69}},{"time":2610,"controlValues":{"Light":0.89}}]},{"name":"LightOff","looping":false,"keyframes":[{"time":1260,"controlValues":{"Light":0}}]}],"controlValues":{"WheelRotate":0.78,"TreeLeaves1":0,"TreeLeaves2":0.19,"Beak":0,"Cloud1":0.5,"EyesBlink":0,"ButterflyWings":0,"Rook":1,"Cloud2":0.8,"Cloud3":1,"DayNight":0,"Butterflyturn":1,"ButterflyZoom":1,"ButterflyX":0.49,"ButterflyY":0.29,"ButterflyTurn":0,"WheelBlades":0.66,"Smoke":0,"Buble":1.46,"Bubble":0.3,"Bubble2":0.9,"Bubble3":1.56,"Light":0.44},"controls":[{"name":"Light","type":"slider","steps":[{"Opacity (2)":[0,0]},{"Opacity (2)":[1,0]}]},{"name":"DayNight","type":"slider","steps":[{"Lightness (1)":[1,1],"Colorize":[0.71,0.24],"Translation":[0,0],"Saturation (2)":[1,0],"Opacity":[1,1],"Lightness (4)":[1,1],"Saturation":[1,1],"Opacity (1)":[1,1],"Lightness":[1,1],"Saturation (1)":[0.8,0]},{"Lightness (1)":[0.6,0],"Colorize":[0.04,0.73],"Translation":[0,294],"Saturation (2)":[0.56,0],"Opacity":[0.13,0],"Lightness (4)":[0.75,0],"Saturation":[0.72,0],"Opacity (1)":[1,1],"Lightness":[0.46,0],"Saturation (1)":[1,1]},{"Lightness (1)":[0.28,0],"Colorize":[0.77,0.47],"Translation":[0,384],"Saturation (2)":[0.15,0],"Opacity":[0,0],"Lightness (4)":[0.28,0],"Saturation":[0.18,0],"Opacity (1)":[0,0],"Lightness":[0.07,0],"Saturation (1)":[1,1]},{"Lightness (1)":[0.4,0],"Colorize":[0.03,1],"Translation":[0,299],"Saturation (2)":[0.22,0],"Opacity":[0.17,0],"Lightness (4)":[0.84,0],"Saturation":[0.2,0],"Opacity (1)":[1,1],"Lightness":[0.29,0],"Saturation (1)":[1,1]},{"Lightness (1)":[1,0],"Colorize":[0.71,0.24],"Translation":[0,0],"Saturation (2)":[1,0],"Opacity":[1,0],"Lightness (4)":[1,0],"Saturation":[1,1],"Opacity (1)":[1,1],"Lightness":[1,1],"Saturation (1)":[0.8,0]}]},{"name":"Bubble3","type":"slider","steps":[{"New Mutator (40)":[-11,0]},{"New Mutator (40)":[-77,49]},{"New Mutator (40)":[-126,107]}]},{"name":"Bubble2","type":"slider","steps":[{"New Mutator (39)":[-9,2]},{"New Mutator (39)":[-75,51]},{"New Mutator (39)":[-130,110]}]},{"name":"Bubble","type":"slider","steps":[{"New Mutator (38)":[-19,0]},{"New Mutator (38)":[-85,43]},{"New Mutator (38)":[-149,115]}]},{"name":"WheelBlades","type":"slider","steps":[{"New Mutator (24)":[0,0],"New Mutator (25)":[1,0.8],"New Mutator (26)":[0,0],"New Mutator (27)":[1,0],"New Mutator (28)":[0,0],"New Mutator (29)":[1,1],"New Mutator (30)":[0,0],"New Mutator (31)":[0.65,1],"New Mutator (32)":[11,0],"New Mutator (35)":[33,0],"New Mutator (34)":[1,0.03],"New Mutator (33)":[0,0],"New Mutator (37)":[43,0]},{"New Mutator (24)":[-33,-19],"New Mutator (25)":[1,0.7],"New Mutator (26)":[10,0],"New Mutator (27)":[-31,-65],"New Mutator (28)":[13,0],"New Mutator (29)":[1,0.75],"New Mutator (30)":[-10,-83],"New Mutator (31)":[0.66,0.05],"New Mutator (32)":[0,0],"New Mutator (35)":[17,0],"New Mutator (34)":[1,-0.37],"New Mutator (33)":[9,-88],"New Mutator (37)":[-2,0]}]},{"name":"Smoke","type":"slider","steps":[{"New Mutator (16)":[0,0]},{"New Mutator (16)":[0,-128]}]},{"name":"ButterflyY","type":"slider","steps":[{"New Mutator (22)":[0,-216]},{"New Mutator (22)":[0,210]}]},{"name":"ButterflyX","type":"slider","steps":[{"New Mutator (22)":[-400,0]},{"New Mutator (22)":[200,0]}]},{"name":"ButterflyZoom","type":"slider","steps":[{"New Mutator (21)":[1,1]},{"New Mutator (21)":[0.5,0.5]}]},{"name":"ButterflyTurn","type":"slider","steps":[{"New Mutator (21)":[1,1]},{"New Mutator (21)":[-1,1]}]},{"name":"ButterflyWings","type":"slider","steps":[{"New Mutator (13)":[1,1],"New Mutator (14)":[1,1]},{"New Mutator (13)":[1,-1.05],"New Mutator (14)":[1,-0.4]}]},{"name":"EyesBlink","type":"slider","steps":[{"New Mutator (12)":[1,1]},{"New Mutator (12)":[0,0]}]},{"name":"Cloud1","type":"slider","steps":[{"New Mutator (11)":[1200,0]},{"New Mutator (11)":[-1300,0]}]},{"name":"Cloud2","type":"slider","steps":[{"New Mutator (19)":[-2101,0]},{"New Mutator (19)":[270,0]}]},{"name":"Cloud3","type":"slider","steps":[{"New Mutator (20)":[-546,0]},{"New Mutator (20)":[1753,0]}]},{"name":"Beak","type":"slider","steps":[{"New Mutator (7)":[0,0],"New Mutator (6)":[0,0]},{"New Mutator (7)":[-19,0],"New Mutator (6)":[7,0]}]},{"name":"TreeLeaves2","type":"slider","steps":[{"New Mutator (5)":[-42,0],"New Mutator (9)":[-11,0],"New Mutator (23)":[-12,0],"New Mutator (36)":[0,0]},{"New Mutator (5)":[48,0],"New Mutator (9)":[8,0],"New Mutator (23)":[13,0],"New Mutator (36)":[0,13]}]},{"name":"TreeLeaves1","type":"slider","steps":[{"New Mutator (4)":[-27,0],"New Mutator (8)":[-13,0],"New Mutator (10)":[-6,0]},{"New Mutator (4)":[40,0],"New Mutator (8)":[12,0],"New Mutator (10)":[11,0]}]},{"name":"WheelRotate","type":"slider","steps":[{"New Mutator (3)":[0,0],"New Mutator (2)":[0,0]},{"New Mutator (3)":[360,0],"New Mutator (2)":[360,0]}]}],"defaultFrame":{"New Mutator":[0.45,1],"New Mutator (1)":[0.45,1],"New Mutator (2)":[0,0],"New Mutator (3)":[90,0],"New Mutator (4)":[0,0],"New Mutator (5)":[0,0],"New Mutator (6)":[0,0],"New Mutator (7)":[0,0],"New Mutator (8)":[0,0],"New Mutator (9)":[0,0],"New Mutator (10)":[0,0],"New Mutator (12)":[1,0],"New Mutator (13)":[1,1],"New Mutator (14)":[1,0.85],"New Mutator (15)":[-41,0],"New Mutator (17)":[37,0],"New Mutator (18)":[23,0],"New Mutator (21)":[1,1],"New Mutator (23)":[0,0],"New Mutator (25)":[1,1],"New Mutator (26)":[0,0],"New Mutator (29)":[1,0.7],"New Mutator (28)":[10,0],"New Mutator (31)":[1,0.53],"New Mutator (30)":[-8,3],"New Mutator (32)":[24,0],"New Mutator (34)":[1,1],"New Mutator (33)":[30,-25],"New Mutator (35)":[0,0],"New Mutator (36)":[0,-9],"Lightness (1)":[0.97,0],"Colorize":[0.73,1],"Stretch":[12.85,1],"Saturation (1)":[0.55,0],"Saturation":[0.79,0],"Saturation (2)":[1,0],"Opacity":[1,1],"Lightness (4)":[1,0],"Opacity (1)":[1,1],"Stretch (1)":[1.6,1.6],"Lightness":[1,0],"Opacity (2)":[1,0]},"shapes":[{"type":"sprite","points":[[1696,1056],[1728,1056],[1728,1088],[1696,1088]],"translate":[431,476],"mutationVectors":[{"type":"opacity","origin":[0,0],"name":"New Mutator (12)"}],"name":"Eyes"},{"type":"sprite","points":[[2080,1312],[2368,1312],[2368,1664],[2080,1664]],"translate":[-432,80],"mutationVectors":[{"type":"opacity","origin":[0,0],"name":"Opacity (2)"}],"name":"NightLight"},{"name":"New Folder","type":"folder","items":[{"name":"Overall","type":"folder","items":[{"name":"Bird","type":"folder","items":[{"type":"sprite","points":[[1119,1056],[1120,1068],[1171,1065],[1168,1055]],"translate":[112,-386],"mutationVectors":[{"type":"rotate","origin":[88,-386],"name":"New Mutator (6)"}],"name":"Top"},{"type":"sprite","points":[[1120,1091],[1120,1101],[1151,1101],[1152,1092]],"translate":[104,-384],"mutationVectors":[{"type":"rotate","origin":[90,-384],"name":"New Mutator (7)"}],"name":"Bottom"}],"mutationVectors":[]},{"name":"Vlinder","type":"folder","items":[{"type":"sprite","points":[[63,1352],[137,1356],[143,1311],[65,1308]],"translate":[760,222],"mutationVectors":[{"type":"stretch","origin":[753,241],"name":"New Mutator (13)"}],"name":"Vleugel1"},{"type":"sprite","points":[[61,1376],[61,1358],[130,1363],[130,1379]],"translate":[747,240],"mutationVectors":[],"name":"Lijf"},{"type":"sprite","points":[[63,1352],[137,1356],[143,1311],[65,1308]],"translate":[757,222],"mutationVectors":[{"type":"stretch","origin":[752,243],"name":"New Mutator (14)"}],"name":"Vleugel2"}],"mutationVectors":[{"name":"New Mutator (22)","type":"translate","origin":[0,0],"radius":-1},{"type":"stretch","origin":[765,236],"name":"New Mutator (21)"},{"type":"rotate","origin":[754,244],"name":"New Mutator (15)"}]},{"name":"Tree","type":"folder","items":[{"type":"sprite","points":[[2012,1214],[2016,1361],[2009,1423],[2010,1476],[2002,1510],[2019,1564],[2004,1586],[2000,1626],[2009,1656],[1994,1683],[1994,1716],[1959,1716],[1953,1683],[1955,1620],[1952,1566],[1955,1504],[1957,1433],[1966,1348],[1976,1279],[1975,1240],[1975,1220],[1952,1259],[1945,1283],[1944,1319],[1939,1347],[1932,1385],[1922,1417],[1914,1453],[1901,1483],[1900,1512],[1902,1548],[1911,1582],[1902,1605],[1904,1631],[1904,1663],[1877,1672],[1862,1649],[1861,1593],[1852,1545],[1857,1495],[1863,1458],[1864,1396],[1876,1347],[1861,1353],[1853,1390],[1849,1421],[1852,1453],[1842,1482],[1842,1510],[1846,1540],[1845,1579],[1845,1607],[1849,1635],[1842,1656],[1856,1699],[1833,1715],[1813,1699],[1807,1670],[1802,1632],[1801,1591],[1801,1553],[1803,1512],[1805,1475],[1808,1435],[1808,1397],[1814,1357],[1818,1336],[1802,1330],[1786,1364],[1777,1383],[1780,1407],[1789,1440],[1786,1471],[1769,1501],[1766,1522],[1773,1552],[1782,1589],[1778,1617],[1755,1627],[1736,1611],[1721,1571],[1724,1533],[1727,1499],[1729,1465],[1729,1427],[1733,1393],[1738,1364],[1743,1323],[1752,1294],[1760,1262],[1780,1252],[1811,1261],[1829,1265],[1865,1247],[1786,1229],[1728,1232],[1749,1680]],"translate":[883,-221],"mutationVectors":[{"type":"deform","origin":[906,-79],"name":"New Mutator (5)","radius":298}],"name":"Leaves2"},{"type":"sprite","points":[[1442,1246],[1679,1233],[1654,1356],[1643,1500],[1640,1638],[1642,1721],[1632,1752],[1595,1746],[1579,1705],[1573,1638],[1568,1572],[1569,1508],[1573,1420],[1573,1383],[1564,1412],[1559,1458],[1551,1502],[1552,1545],[1550,1573],[1541,1615],[1540,1647],[1520,1664],[1502,1652],[1497,1617],[1496,1577],[1504,1536],[1504,1497],[1504,1462],[1516,1424],[1520,1388],[1506,1385],[1509,1425],[1498,1452],[1495,1473],[1492,1501],[1485,1513],[1493,1543],[1490,1576],[1469,1580],[1454,1568],[1446,1538],[1444,1500],[1454,1466],[1456,1442],[1451,1401],[1458,1363],[1463,1335],[1424,1274],[1422,1396],[1423,1483],[1427,1557],[1438,1617],[1687,1739],[1678,1603],[1675,1440]],"translate":[901,-220],"mutationVectors":[{"type":"deform","origin":[895,-93],"name":"New Mutator (4)","radius":298}],"name":"Leaves1"}],"mutationVectors":[]},{"name":"Wheel","type":"folder","items":[{"type":"sprite","points":[[947,1271],[1382,1271],[1409,1821],[962,1871]],"translate":[79,56],"mutationVectors":[],"name":"Wheelhouse"},{"name":"Water","type":"folder","items":[{"type":"sprite","points":[[782,1778],[797,1755],[857,1773],[835,1804]],"translate":[95,171],"mutationVectors":[{"name":"New Mutator (38)","type":"translate","origin":[0,0],"radius":-1}],"name":"WaterMove"},{"type":"sprite","points":[[782,1796],[755,1819],[800,1842],[823,1811]],"translate":[73,171],"mutationVectors":[{"name":"New Mutator (39)","type":"translate","origin":[0,0],"radius":-1}],"name":"WaterMove2"},{"type":"sprite","points":[[747,1839],[723,1861],[762,1883],[781,1863]],"translate":[71,172],"mutationVectors":[{"name":"New Mutator (40)","type":"translate","origin":[71,172],"radius":-1}],"name":"WaterMove3"}],"mutationVectors":[]},{"type":"sprite","points":[[1076,1892],[1187,1888],[1192,1978],[1073,1983]],"translate":[33,193],"mutationVectors":[],"name":"Hider"},{"type":"sprite","points":[[340,1312],[703,1312],[703,1675],[340,1675]],"translate":[142,5],"mutationVectors":[{"type":"stretch","origin":[141,4],"name":"New Mutator"},{"type":"rotate","origin":[141,4],"name":"New Mutator (2)"}],"name":"WheelRight"},{"type":"sprite","points":[[775,1306],[899,1303],[907,1682],[771,1678]],"translate":[102,6],"mutationVectors":[],"name":"Side"},{"name":"Blades","type":"folder","items":[{"type":"sprite","points":[[63,1216],[63,1269],[185,1216],[184,1269]],"translate":[48,56],"mutationVectors":[{"name":"New Mutator (30)","type":"translate","origin":[48,56],"radius":-1},{"type":"stretch","origin":[-12,82],"name":"New Mutator (31)"},{"name":"New Mutator (32)","type":"translate","origin":[-12,31],"radius":6}],"name":"Blade3"},{"type":"sprite","points":[[63,1216],[63,1269],[185,1216],[184,1269]],"translate":[105,142],"mutationVectors":[{"name":"New Mutator (24)","type":"translate","origin":[0,0],"radius":-1},{"type":"stretch","origin":[97,168],"name":"New Mutator (25)"},{"name":"New Mutator (26)","type":"translate","origin":[46,113],"radius":24}],"name":"Blade1"},{"type":"sprite","points":[[63,1216],[63,1269],[185,1216],[184,1269]],"translate":[71,122],"mutationVectors":[{"name":"New Mutator (27)","type":"translate","origin":[0,0],"radius":-1},{"type":"stretch","origin":[62,152],"name":"New Mutator (29)"},{"name":"New Mutator (28)","type":"translate","origin":[14,98],"radius":16}],"name":"Blade2"},{"type":"sprite","points":[[63,1216],[63,1269],[185,1216],[184,1269]],"translate":[0,0],"mutationVectors":[{"name":"New Mutator (33)","type":"translate","origin":[0,0],"radius":-1},{"type":"stretch","origin":[-60,27],"name":"New Mutator (34)"},{"name":"New Mutator (35)","type":"translate","origin":[-61,-27],"radius":8}],"name":"Blade4"},{"type":"sprite","points":[[63,1216],[63,1269],[185,1216],[184,1269]],"translate":[107,149],"mutationVectors":[{"name":"New Mutator (37)","type":"translate","origin":[0,0],"radius":-1}],"name":"Blade5"}],"mutationVectors":[]},{"type":"sprite","points":[[340,1312],[703,1312],[703,1675],[340,1675]],"translate":[48,0],"mutationVectors":[{"type":"stretch","origin":[48,0],"name":"New Mutator (1)"},{"type":"rotate","origin":[48,0],"name":"New Mutator (3)"}],"name":"WheelLeft"}],"mutationVectors":[]},{"type":"sprite","points":[[814,123],[869,119],[930,128],[934,133],[936,264],[810,268]],"translate":[-151,-319],"mutationVectors":[],"name":"Schoorsteen"},{"type":"sprite","points":[[96,1696],[96,1440],[236,1440],[236,1696],[96,1664],[96,1472],[96,1504],[96,1536],[96,1568],[96,1600],[96,1632],[236,1472],[236,1504],[236,1536],[236,1568],[236,1600],[236,1632],[236,1664],[46,1696],[46,1630],[46,1440],[46,1568],[46,1504],[285,1440],[285,1504],[285,1568],[285,1632],[285,1696]],"translate":[-147,-384],"mutationVectors":[{"type":"deform","origin":[-227,-407],"name":"New Mutator (18)","radius":64},{"type":"deform","origin":[-73,-496],"name":"New Mutator (17)","radius":63},{"name":"New Mutator (16)","type":"translate","origin":[0,0],"radius":-1}],"name":"Rook"},{"type":"sprite","points":[[1129,1236],[1129,1201],[1125,1160],[1141,1159],[1143,1197],[1145,1237],[1160,1238],[1158,1199],[1161,1160],[1175,1159],[1173,1200],[1174,1240]],"translate":[325,-77],"mutationVectors":[{"type":"deform","origin":[326,-121],"name":"New Mutator (23)","radius":55}],"name":"Sigar"},{"type":"sprite","points":[[847,1204],[853,1204],[853,1217],[848,1217],[843,1220],[845,1229],[858,1227]],"translate":[-356,-247],"mutationVectors":[{"name":"New Mutator (36)","type":"translate","origin":[-356,-241],"radius":9}],"name":"Spider"},{"type":"sprite","points":[[0,0],[0,1024],[2048,1024],[2048,0]],"translate":[0,0],"mutationVectors":[],"name":"Background"}],"mutationVectors":[{"type":"saturation","origin":[0,0],"name":"Saturation (2)"},{"type":"lightness","origin":[0,0],"name":"Lightness (1)"}]},{"name":"SatLayer","type":"folder","items":[{"type":"sprite","points":[[277,1220],[295,1149],[308,1110],[345,1126],[350,1160],[345,1201],[331,1226],[387,1236],[379,1191],[379,1138],[398,1097],[423,1071],[449,1103],[457,1134],[457,1167],[463,1211],[454,1240],[502,1244],[493,1212],[490,1173],[495,1127],[502,1087],[528,1079],[566,1097],[571,1139],[587,1175],[582,1211],[562,1240],[622,1177],[621,1146],[621,1111],[643,1079],[672,1109],[680,1147],[651,1178],[678,1195],[693,1138],[706,1124],[706,1088],[724,1090],[737,1112],[744,1135],[747,1169],[728,1198]],"translate":[429,-310],"mutationVectors":[{"type":"deform","origin":[289,-335],"name":"New Mutator (8)","radius":73},{"type":"deform","origin":[453,-353],"name":"New Mutator (9)","radius":83},{"type":"deform","origin":[600,-355],"name":"New Mutator (10)","radius":66}],"name":"BackTrees"},{"type":"sprite","points":[[2080,1664],[2080,1920],[2624,1664],[2624,1920]],"translate":[-752,-253],"mutationVectors":[],"name":"Left (1)"},{"type":"sprite","points":[[3168,1664],[3168,1920],[4064,1952],[4064,1664]],"translate":[512,-237],"mutationVectors":[],"name":"Right (1)"}],"mutationVectors":[{"type":"lightness","origin":[0,0],"name":"Lightness (4)"},{"type":"saturation","origin":[0,0],"name":"Saturation"}]},{"name":"Mountains","type":"folder","items":[{"name":"Clouds","type":"folder","items":[{"type":"sprite","points":[[1038,1136],[758,1140],[758,1070],[1021,1065]],"translate":[77,-454],"mutationVectors":[{"name":"New Mutator (11)","type":"translate","origin":[0,0],"radius":-1}],"name":"Cloud1"},{"type":"sprite","points":[[1251,1049],[1258,1119],[1464,1119],[1447,1055]],"translate":[906,-458],"mutationVectors":[{"name":"New Mutator (19)","type":"translate","origin":[0,0],"radius":-1}],"name":"Cloud2"},{"type":"sprite","points":[[62,1106],[63,1159],[237,1158],[231,1107]],"translate":[-603,-444],"mutationVectors":[{"name":"New Mutator (20)","type":"translate","origin":[0,0],"radius":-1}],"name":"Could3"}],"mutationVectors":[]},{"type":"sprite","points":[[288,1760],[288,1920],[32,1920],[32,1760]],"translate":[-568,-264],"mutationVectors":[],"name":"Left"},{"type":"sprite","points":[[320,1760],[320,1920],[576,1920],[576,1760]],"translate":[759,-330],"mutationVectors":[],"name":"Right"}],"mutationVectors":[{"type":"lightness","origin":[0,0],"name":"Lightness"},{"type":"saturation","origin":[0,0],"name":"Saturation (1)"}]}],"mutationVectors":[{"type":"colorize","origin":[1,1],"name":"Colorize"}]},{"type":"sprite","points":[[1632,1056],[1536,1056],[1536,1152],[1632,1152]],"translate":[-821,-459],"mutationVectors":[{"name":"Translation","type":"translate","origin":[0,0],"radius":-1}],"name":"Sun"},{"name":"New Folder (1)","type":"folder","items":[{"type":"sprite","points":[[2112,32],[2272,32],[2272,352],[2112,352]],"translate":[-14,-352],"mutationVectors":[{"type":"opacity","origin":[1,1],"name":"Opacity"}],"name":"Sky"},{"type":"sprite","points":[[2464,352],[2304,352],[2304,32],[2464,32]],"translate":[-14,-352],"mutationVectors":[{"type":"opacity","origin":[0,0],"name":"Opacity (1)"}],"name":"Sky2"}],"mutationVectors":[{"type":"stretch","origin":[-15,-323],"name":"Stretch"}]},{"name":"New Folder (2)","type":"folder","items":[{"type":"sprite","points":[[2496,32],[2496,352],[2976,352],[2976,32]],"translate":[-777,-358],"mutationVectors":[],"name":"Stars"},{"type":"sprite","points":[[2496,32],[2496,352],[2976,352],[2976,32]],"translate":[-298,-387],"mutationVectors":[],"name":"Stars (1)"},{"type":"sprite","points":[[2496,32],[2496,352],[2976,352],[2976,32]],"translate":[22,-423],"mutationVectors":[],"name":"Stars (1) (1)"}],"mutationVectors":[{"type":"stretch","origin":[-1017,-511],"name":"Stretch (1)"}]}],"version":"1.0"}');var A;A=s("96fqt").getBundleURL("10eGt")+s("foDNa").resolve("bLTnS");var R;R=JSON.parse('{"animations":[{"name":"Eye blink","looping":true,"keyframes":[{"time":2500,"controlValues":{"LeftEyeClose":0,"RightEyeClose":0}},{"time":2750,"controlValues":{"LeftEyeClose":1,"RightEyeClose":1}},{"time":3000,"controlValues":{"RightEyeClose":0,"LeftEyeClose":0}}]},{"name":"Look around","looping":true,"keyframes":[{"time":1000,"controlValues":{"LeftEye-x":0.18,"RightEye-x":0.24}},{"time":2000,"controlValues":{"LeftEye-x":1,"RightEye-x":1.02}},{"time":3980,"controlValues":{"LeftEye-x":1.02,"RightEye-x":1}},{"time":5000,"controlValues":{"RightEye-x":1.8,"LeftEye-x":1.84}},{"time":6000,"controlValues":{"LeftEye-x":0.98,"RightEye-x":1.06}},{"time":8000,"controlValues":{"RightEye-x":1,"LeftEye-x":1}}]},{"name":"Talking","looping":true,"keyframes":[{"time":1000,"controlValues":{"Mouth":0}},{"time":1340,"controlValues":{"Mouth":0.62}},{"time":1670,"controlValues":{"Mouth":0}},{"time":2120,"controlValues":{"Mouth":0}},{"time":2430,"controlValues":{"Mouth":0.68}},{"time":2790,"controlValues":{"Mouth":0.24}},{"time":3160,"controlValues":{"Mouth":1}},{"time":3470,"controlValues":{"Mouth":0}}]},{"name":"No","looping":false,"keyframes":[{"time":510,"controlValues":{"HeadTurn":0.38}},{"time":1270,"controlValues":{"HeadTurn":0}},{"time":2180,"controlValues":{"HeadTurn":1}},{"time":2990,"controlValues":{"HeadTurn":0}},{"time":3980,"controlValues":{"HeadTurn":0.48}}]},{"name":"HeadTilt","looping":true,"keyframes":[{"time":1000,"controlValues":{"HeadTilt":0.42}},{"time":6000,"controlValues":{"HeadTilt":0.53}},{"time":9000,"controlValues":{"HeadTilt":0.14}},{"time":12000,"controlValues":{"HeadTilt":0.43}}]},{"name":"EyeWink","looping":false,"keyframes":[{"time":500,"controlValues":{"RightEyeClose":0,"LeftEyeClose":0}},{"time":800,"controlValues":{"RightEyeClose":1}},{"time":1200,"controlValues":{"RightEyeClose":1}},{"time":1500,"controlValues":{"RightEyeClose":0}}]},{"name":"Eyebrows","looping":true,"keyframes":[{"time":990,"controlValues":{"Eyebrows":1.32}},{"time":3940,"controlValues":{"Eyebrows":0.92}},{"time":6820,"controlValues":{"Eyebrows":1.88}},{"time":10220,"controlValues":{"Eyebrows":0.88}}]},{"name":"Sweeping","looping":true,"keyframes":[{"time":1000,"controlValues":{"Broom":0.69,"ArmRightBottom":0.46,"ArmRightTop":0.14,"ArmLeftBottom":0.19,"ArmLeftTop":0.9,"Dust":1}},{"time":2000,"controlValues":{"Broom":1,"ArmRightBottom":0.79,"ArmRightTop":0.09,"ArmLeftBottom":0.13,"ArmLeftTop":0.71}},{"time":2499,"controlValues":{"Dust":1}},{"time":2500,"controlValues":{"ArmLeftTop":0.92,"ArmLeftBottom":0.18,"ArmRightTop":0.1,"ArmRightBottom":0.59,"Broom":0.69,"Dust":0}},{"time":3000,"controlValues":{"Broom":0,"ArmRightBottom":0.58,"ArmRightTop":0,"ArmLeftBottom":0.26,"ArmLeftTop":1,"Dust":1}}]},{"name":"StopTalking","looping":false,"keyframes":[{"time":470,"controlValues":{"Mouth":0}}]},{"name":"EyebrowReset","looping":false,"keyframes":[{"time":560,"controlValues":{"Eyebrows":1}}]},{"name":"PauseSweeping","looping":false,"keyframes":[{"time":1460,"controlValues":{"Broom":0.86,"ArmRightBottom":0.22,"ArmRightTop":0.13,"ArmLeftBottom":0.48,"ArmLeftTop":0.96}}]}],"controlValues":{"Eyebrows":1,"HeadTilt":0.55,"HeadTurn":0.5,"Mouth":0,"RightEye-y":0.5,"LeftEye-y":0.5,"RightEye-x":1,"LeftEye-x":1,"RightEyeClose":0,"LeftEyeClose":0,"ArmTop":0,"ArmBottom":1,"ArmLeftTop":0.83,"ArmLeftBottom":0.31,"ArmRightTop":0.07,"ArmRightBottom":0.58,"Broom":1,"Dust":1},"controls":[{"name":"Dust","type":"slider","steps":[{"c":[0.35,0.05],"a":[143,0],"b":[1,1]},{"c":[1,1],"a":[-1110,0],"b":[0,0]}]},{"name":"Broom","type":"slider","steps":[{"i":[-29,0],"h":[-131,-39]},{"i":[8,0],"h":[0,0]}]},{"name":"ArmRightBottom","type":"slider","steps":[{"e":[-122,0]},{"e":[9,0]}]},{"name":"ArmRightTop","type":"slider","steps":[{"H":[-18,0],"d":[-18,0]},{"H":[100,0],"d":[100,0]}]},{"name":"ArmLeftBottom","type":"slider","steps":[{"g":[52,0]},{"g":[-108,0]}]},{"name":"ArmLeftTop","type":"slider","steps":[{"I":[-85,0],"f":[-84,0]},{"I":[8,0],"f":[8,0]}]},{"name":"Eyebrows","type":"slider","steps":[{"p":[0,6],"q":[-10,0],"r":[0,6],"s":[10,0]},{"p":[0,0],"q":[0,0],"r":[0,0],"s":[0,0]},{"p":[0,0],"q":[9,0],"r":[0,0],"s":[-9,0]}]},{"name":"HeadTilt","type":"slider","steps":[{"K":[15,0],"j":[15,0],"m":[-34,0],"l":[-29,0],"J":[-75,0]},{"j":[-15,0],"K":[-15,0],"m":[32,0],"l":[42,0],"J":[103,0]}]},{"name":"HeadTurn","type":"slider","steps":[{"w":[-9,0],"x":[-2,0],"o":[7,0],"k":[3,0],"n":[2,0],"L":[-7,0],"F":[1,0],"C":[1,0]},{"o":[-5,0],"w":[3,0],"x":[7,0],"k":[-3,0],"n":[-2,0],"L":[10,0],"C":[-1,0],"F":[-1,0]}]},{"name":"Mouth","type":"slider","steps":[{"A":[1,1],"z":[1,1],"v":[0,0],"y":[0,0]},{"A":[1,1.1],"z":[1,3.85],"v":[0,-20],"y":[0,3]}]},{"name":"RightEye-y","type":"slider","steps":[{"C":[0,-8]},{"C":[0,11]}]},{"name":"LeftEye-y","type":"slider","steps":[{"F":[0,-7]},{"F":[0,11]}]},{"name":"RightEye-x","type":"slider","steps":[{"C":[-7,0],"D":[0.85,1]},{"C":[1,0],"D":[1,1]},{"C":[13,0],"D":[0.85,1]}]},{"name":"LeftEye-x","type":"slider","steps":[{"F":[-12,0],"G":[0.85,1]},{"G":[1,1],"F":[0,0]},{"F":[9,0],"G":[0.85,1]}]},{"name":"RightEyeClose","type":"slider","steps":[{"u":[1,1],"B":[0,0]},{"B":[0,48],"u":[1,-1.2]}]},{"name":"LeftEyeClose","type":"slider","steps":[{"E":[0,0],"t":[1,1]},{"t":[1,-1.1],"E":[0,50]}]}],"defaultFrame":{"B":[0,-29],"u":[1,1],"D":[1,1],"C":[0,0],"E":[0,-25],"t":[1,1],"G":[1,1],"F":[0,0],"A":[1,1],"z":[1,0.25],"v":[0,0],"j":[-1,0],"K":[0,0],"m":[0,0],"l":[0,0],"J":[0,0],"q":[0,0],"p":[0,0],"s":[0,0],"r":[0,0],"g":[97,0],"i":[16,0],"I":[0,0],"f":[0,0],"H":[0,0],"d":[0,0],"e":[0,0],"b":[1,1],"c":[1,1]},"shapes":[{"type":"sprite","points":[[1408,224],[1216,32],[1984,32],[1984,224]],"translate":[141,1666],"mutationVectors":[{"name":"a","type":"translate","origin":[228,0],"radius":-1},{"type":"opacity","origin":[228,0],"name":"b"},{"type":"stretch","origin":[236,1751],"name":"c"}],"name":"a"},{"name":"b","type":"folder","items":[{"type":"sprite","points":[[92,688],[139,676],[186,690],[173,869],[70,764],[144,904],[94,908]],"translate":[277,593],"mutationVectors":[],"name":"c"},{"type":"sprite","points":[[452,597],[529,600],[413,697],[435,747],[516,759],[537,704]],"translate":[271,719],"mutationVectors":[],"name":"d"}],"mutationVectors":[{"type":"rotate","origin":[192,279],"name":"d"},{"type":"rotate","origin":[282,489],"name":"e"}]},{"name":"e","type":"folder","items":[{"type":"sprite","points":[[80,1054],[183,1046],[202,1203],[182,1283],[123,1289],[83,1174]],"translate":[-230,584],"mutationVectors":[],"name":"f"},{"type":"sprite","points":[[212,1432],[229,1591],[94,1596],[109,1435]],"translate":[-224,748],"mutationVectors":[],"name":"g"}],"mutationVectors":[{"type":"rotate","origin":[-148,286],"name":"f"},{"type":"rotate","origin":[-245,483],"name":"g"}]},{"type":"sprite","points":[[552,363],[633,363],[635,1808],[770,2028],[725,2040],[552,2010],[503,1913]],"translate":[157,958],"mutationVectors":[{"name":"h","type":"translate","origin":[0,0],"radius":-1},{"type":"rotate","origin":[128,682],"name":"i"}],"name":"h"},{"name":"i","type":"folder","items":[{"type":"sprite","points":[[1013,495],[1023,467],[1021,419],[1024,374],[1023,323],[1000,281],[955,263],[888,267],[836,303],[817,354],[813,412],[811,457],[822,473],[840,459],[847,431],[854,398],[856,368],[912,338],[917,361],[934,337],[971,345],[998,363],[998,409],[994,435],[999,471]],"translate":[-6,-36],"mutationVectors":[{"type":"deform","origin":[-98,48],"name":"l","radius":96},{"type":"deform","origin":[87,54],"name":"m","radius":101},{"name":"n","type":"translate","origin":[0,0],"radius":-1}],"name":"j"},{"type":"sprite","points":[[221,213],[265,212],[266,230],[223,233]],"translate":[2,46],"mutationVectors":[{"name":"o","type":"translate","origin":[0,0],"radius":-1}],"name":"k"},{"type":"sprite","points":[[776,110],[780,98],[793,90],[805,91],[818,92],[830,95],[842,106],[833,114],[818,110],[795,108]],"translate":[-42,-46],"mutationVectors":[{"name":"p","type":"translate","origin":[0,0],"radius":-1},{"type":"rotate","origin":[-55,-48],"name":"q"}],"name":"l"},{"type":"sprite","points":[[774,139],[783,154],[794,148],[810,146],[824,148],[837,150],[837,139],[825,132],[808,129],[788,132]],"translate":[41,-43],"mutationVectors":[{"name":"r","type":"translate","origin":[0,0],"radius":-1},{"type":"rotate","origin":[54,-44],"name":"s"}],"name":"m"},{"name":"n","type":"sprite","points":[[679,86],[679,108],[738,111],[736,86]],"translate":[-47,-13],"mutationVectors":[{"type":"stretch","origin":[-47,-6],"name":"t","radius":-1}]},{"name":"o","type":"sprite","points":[[613,106],[668,108],[667,86],[611,84]],"translate":[43,-14],"mutationVectors":[{"type":"stretch","origin":[37,-6],"name":"u","radius":-1}]},{"name":"p","type":"sprite","points":[[431,266],[485,277],[509,270],[507,259],[435,255],[481,248],[462,248],[462,277],[572,54],[373,52],[572,272],[375,277]],"translate":[2,-34],"mutationVectors":[{"type":"deform","origin":[2,79],"name":"v","radius":26}]},{"type":"sprite","points":[[128,165],[135,173],[145,170],[162,129],[160,113],[151,102],[134,113],[130,121]],"translate":[93,-3],"mutationVectors":[{"name":"w","type":"translate","origin":[0,0],"radius":-1}],"name":"q"},{"type":"sprite","points":[[103,111],[112,168],[103,176],[92,174],[74,110],[86,104]],"translate":[-91,-6],"mutationVectors":[{"name":"x","type":"translate","origin":[0,0],"radius":-1}],"name":"r"},{"name":"s","type":"sprite","points":[[636,235],[717,236],[717,247],[694,256],[653,256],[636,245]],"translate":[0,65],"mutationVectors":[{"name":"y","type":"translate","origin":[0,0]}]},{"name":"t","type":"sprite","points":[[759,189],[761,210],[770,228],[785,235],[814,235],[833,232],[844,218],[847,194]],"translate":[0,83],"mutationVectors":[{"type":"stretch","origin":[1,65],"name":"z","radius":-1}]},{"name":"u","type":"sprite","points":[[612,266],[787,262],[777,310],[737,355],[701,362],[662,352],[622,313]],"translate":[0,87],"mutationVectors":[{"type":"stretch","origin":[0,40],"name":"A","radius":-1}]},{"name":"v","type":"folder","items":[{"name":"w","type":"sprite","points":[[618,149],[664,142],[657,131],[646,128],[630,128],[620,138],[634,149],[645,148]],"translate":[41,-11],"mutationVectors":[{"type":"deform","origin":[38,-6],"name":"B","radius":15}]},{"name":"x","type":"sprite","points":[[624,79],[630,79],[630,71],[621,71]],"translate":[30,-10],"mutationVectors":[]},{"name":"y","type":"sprite","points":[[653,186],[653,160],[627,160],[627,186]],"translate":[37,-9],"mutationVectors":[{"name":"C","type":"translate","origin":[0,0]},{"type":"stretch","origin":[38,-9],"name":"D","radius":-1}]},{"name":"z","type":"sprite","points":[[621,197],[620,228],[667,197],[666,227]],"translate":[40,-6],"mutationVectors":[]}],"mutationVectors":[]},{"name":"A","type":"folder","items":[{"name":"B","type":"sprite","points":[[688,143],[695,131],[709,127],[721,129],[731,136],[736,151],[704,146],[716,148]],"translate":[-42,-12],"mutationVectors":[{"type":"deform","origin":[-42,-9],"name":"E","radius":15}]},{"name":"C","type":"sprite","points":[[697,77],[705,78],[706,70],[697,70]],"translate":[-48,-12],"mutationVectors":[]},{"name":"D","type":"sprite","points":[[698,161],[698,186],[724,186],[724,161]],"translate":[-42,-11],"mutationVectors":[{"name":"F","type":"translate","origin":[0,0]},{"type":"stretch","origin":[-41,-10],"name":"G","radius":-1}]},{"name":"E","type":"sprite","points":[[685,197],[685,227],[734,229],[733,197]],"translate":[-43,-6],"mutationVectors":[]}],"mutationVectors":[]}],"mutationVectors":[{"type":"rotate","origin":[-5,98],"name":"j"},{"name":"k","type":"translate","origin":[0,0],"radius":-1}]},{"type":"sprite","points":[[1214,246],[2027,1820],[1738,244],[961,1842],[1620,334],[1681,336],[1678,350],[1629,369]],"translate":[14,896],"mutationVectors":[],"name":"F"},{"type":"sprite","points":[[325,586],[430,939],[384,658],[320,941],[198,687],[197,654],[269,585]],"translate":[227,359],"mutationVectors":[{"type":"rotate","origin":[192,279],"name":"H"}],"name":"G"},{"type":"sprite","points":[[415,1020],[482,1105],[434,1125],[335,1373],[268,1384],[238,1331],[284,1061],[346,1031]],"translate":[-173,354],"mutationVectors":[{"type":"rotate","origin":[-148,286],"name":"I"}],"name":"H"},{"type":"sprite","points":[[779,611],[822,582],[864,568],[921,567],[979,582],[1013,632],[1042,707],[1038,813],[1028,847],[1040,912],[1030,948],[1027,1024],[990,1103],[954,1120],[907,1064],[867,1106],[822,1083],[779,1105],[750,1084],[754,992],[743,934],[759,844],[753,753],[761,709],[747,660]],"translate":[-2,108],"mutationVectors":[{"type":"deform","origin":[-7,263],"name":"J","radius":331},{"type":"rotate","origin":[-3,106],"name":"K"},{"name":"L","type":"translate","origin":[0,0],"radius":-1}],"name":"I"}],"version":"1.0"}');let S=[];const C=t=>{S=S.filter((e=>e.name!==t))},I=(t,e,a,o,r)=>new Promise((n=>{C(t);let i=e;S=S.concat({name:t,ticker:()=>{i===a?(C(t),n()):i<a?i+=Math.min(o,a-i):i-=Math.min(o,i-a),r(i)}})})),D=(t,e)=>new Promise((a=>{C(t);let o=e;S=S.concat({name:t,ticker:()=>{0===o?(C(t),a()):o--}})})),F=document.getElementById("root"),U=(t,e)=>async a=>{t.startTrack("Talking",{startAt:800}),t.startTrack("Eyebrows");const o=(t=>{const a=document.createElement("div");a.classList.add("dialogbox");const o=document.createElement("h3");o.classList.add("dialogname"),o.textContent=e,a.appendChild(o),F.appendChild(a);const r=document.createElement("p");return r.textContent=t,a.appendChild(r),()=>{F.removeChild(a)}})(a);(async e=>{await D("talking",6*e.length),t.startTrack("StopTalking"),t.startTrack("EyebrowReset")})(a),await(async()=>new Promise((t=>{const e=document.getElementsByClassName("dialogbox")[0],a=()=>{t(),e.removeEventListener("click",a)};e.addEventListener("click",a)})))(),t.startTrack("StopTalking"),t.startTrack("EyebrowReset"),o()},P=async t=>{let e=!0;const a={endDialog:()=>{e=!1}};for(;e;){const e=document.createElement("div");e.classList.add("choicebox"),F.appendChild(e);const o=await new Promise((a=>{Object.keys(t).forEach((t=>{const o=document.createElement("button");o.textContent=t,o.addEventListener("click",(()=>{F.removeChild(e),setTimeout((()=>{a(t)}))})),e.appendChild(o)}))}));await t[o](a)}},O=["Hi! Welcome test adventurer, welcome to my inn! Is there something you want to know?",{"What is Geppetto?":["Geppetto consists of two parts. A desktop application to define animated images, and a JavaScript library to play them.",{"Is Geppetto free?":["Yes! It is free to use and distribute. It's also opensource (MIT License). So everyone can see how it works and extend it."],"How does it work?":["You need to create a texture file as .PNG. in Geppetto you will make layers from your texture, and compose them into your image.","The next step is to add mutations to your layer tree to create motion. You can then create timelines to define multiple animations.",{"Why not [Other product here]?":["Other solutions exist for animation. Some are paid, some are not open source, some use vector graphics.","Using a single texture file is fast (single http request) and adding more detail to your image doesn't have any rendering cost."],"What are the features?":["Real-time control and animations. Did you know I can look in the direction you click in this image?","Smooth transition between animations.","Fast, most of the processing is on the GPU","Free as in beer and speech. Isn't that great! It also means Matthijs doesn't make any money from it, and only works on it in his free time. But, feel free to contribute!"],"Sounds great!":["END"]}],"I want to talk about something else":["END"]}],"What can you tell me about your world?":["I hope the world I live in will be expanded into a full game! Wouldn't that be great?","For now it functions as a demo, to see if a game like environment could be created.","Can you spot all the moving elements?","END"],"I think I'll start exploring!":["Good luck!","END"]}],z=async(t,e)=>{for(const a of t)if("string"==typeof a&&"END"!==a&&await e(a),"object"==typeof a){const t=Object.entries(a).reduce(((t,[a,o])=>({...t,[a]:async({endDialog:t})=>{await z(o,e),"END"===o[o.length-1]&&t()}})),{});await P(t)}},H=document.getElementById("theatre"),X=a(H),W=async t=>new Promise((e=>{const a=new Image;a.crossOrigin="anonymous",a.src=t,a.onload=()=>e(a)}));(async()=>{const t=await W(e(B)),a=o(e(_)),r=X.addAnimation(a,t,0,{zoom:2,panX:0}),n=await W(e(A)),i=o(e(R)),s={zoom:.26,panX:-2.1,panY:-.5,zIndex:2},l=2.2,u=-.3,m=.1,c=X.addAnimation(i,n,1,s),p=()=>{const t=H.getBoundingClientRect(),e=navigator.userAgent.includes("SMART-TV")?2:1;H.width=Math.min(2048,t.width*window.devicePixelRatio*e),H.height=Math.min(1024,t.height*window.devicePixelRatio*e)};p(),window.addEventListener("resize",(()=>{p()})),r.startTrack("Wheel"),r.startTrack("WheelBlades"),r.startTrack("Tree"),r.startTrack("Bird"),r.startTrack("Cloud1",{speed:.15}),r.startTrack("Cloud2",{speed:.1}),r.startTrack("Cloud3",{speed:.15}),r.startTrack("Day night",{speed:.125}),r.startTrack("Eyes"),r.startTrack("Smoke"),r.startTrack("Water"),r.onEvent((t=>{"evening"===t&&(r.startTrack("LightFlicker"),r.stopTrack("Bird")),"endNight"===t&&r.startTrack("LightOff"),"morning"===t&&r.startTrack("Bird")}));let d=!0;c.startTrack("Eye blink"),c.startTrack("HeadTilt"),c.startTrack("Sweeping");(()=>{let t=[0,0];const e=[.145,.388],a=(e,a)=>Promise.all([I("eye-X",t[0],e,.025,(e=>{t[0]=e,c.setControlValue("RightEye-x",e+1),c.setControlValue("LeftEye-x",e+1),c.setControlValue("HeadTurn",1-.5*(e+1))})),I("eye-Y",t[1],a,.025,(e=>{t[1]=e,c.setControlValue("RightEye-y",.5*(e+1)),c.setControlValue("LeftEye-y",.5*(e+1))}))]).then((()=>{}));H.addEventListener("click",(async t=>{const o=H.getBoundingClientRect(),r=[t.x/o.width,t.y/o.height];if(r[0]>.203&&r[0]<.263&&r[1]>.458&&r[1]<.706&&d)return c.setZoom(l),c.setPanning(u,m),d=!1,void(async t=>{await D("startTalking",60),t.startTrack("PauseSweeping");const e=U(t,"Innkeeper");await z(O,e)})(c).then((()=>{c.setZoom(s.zoom),c.setPanning(s.panX,s.panY),d=!0,c.startTrack("Sweeping")}));const n=Math.min(1,Math.max(-1,(r[0]-e[0])/.4)),i=Math.min(1,Math.max(-1,(r[1]-e[1])/.4));C("resetDelay"),await a(n,i),await D("resetDelay",180),await a(0,-.1)})),a(0,-.1)})(),(async()=>{const t=.0025,e={x:.72,y:.87,z:.8},a=.51,o=.29,n=.95,i={...e};r.setControlValue("ButterflyX",i.x),r.setControlValue("ButterflyY",i.y),r.setControlValue("ButterflyZoom",i.z),r.startTrack("ButterflyWings",{speed:.2}),await D("bfParked",320);let s=!1;const l=(e,a,o)=>(s||(r.startTrack("ButterflyWings"),s=!0),e<i.x?r.setControlValue("ButterflyTurn",0):r.setControlValue("ButterflyTurn",1),Promise.all([I("ButterflyX",i.x,e,t,(t=>{i.x=t,r.setControlValue("ButterflyX",t)})),I("ButterflyY",i.y,a,t,(t=>{i.y=t,r.setControlValue("ButterflyY",t)})),I("ButterflyZoom",i.z,o,.025,(t=>{i.z=t,r.setControlValue("ButterflyZoom",t)}))])),u=()=>{const t=.3*Math.random();let e=Math.random()>.5?1:-1,a=Math.random()>.5?1:-1;(i.x+e*t>1||i.x+e*t<0)&&(e*=-1),(i.y+a*t>1||i.y+a*t<0)&&(a*=-1);const o=i.x+e*t,r=i.y+a*t,n=Math.min(Math.max(i.z+Math.random()*t,0),1);return l(o,r,n)};for(;;){const t=Math.random();t>.95?(await l(e.x,e.y,e.z),s&&(r.startTrack("ButterflyWings",{speed:.2}),s=!1),await D("bfParked",320)):t<.05?(await l(a,o,n),s&&(r.startTrack("ButterflyWings",{speed:.2}),s=!1),await D("bfParked",320)):await u()}})();const y=()=>{(()=>{for(const t of S)t.ticker()})(),X.render(),r.render(),c.render(),window.requestAnimationFrame(y)};window.requestAnimationFrame(y)})();
//# sourceMappingURL=index.ade17cce.js.map
