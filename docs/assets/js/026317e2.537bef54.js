"use strict";(self.webpackChunkgeppetto=self.webpackChunkgeppetto||[]).push([[686],{3905:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>d});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var p=a.createContext({}),s=function(e){var t=a.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):l(l({},t),e)),n},u=function(e){var t=s(e.components);return a.createElement(p.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},c=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,p=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=s(n),d=r,g=c["".concat(p,".").concat(d)]||c[d]||m[d]||o;return n?a.createElement(g,l(l({ref:t},u),{},{components:n})):a.createElement(g,l({ref:t},u))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,l=new Array(o);l[0]=c;var i={};for(var p in t)hasOwnProperty.call(t,p)&&(i[p]=t[p]);i.originalType=e,i.mdxType="string"==typeof e?e:r,l[1]=i;for(var s=2;s<o;s++)l[s]=n[s];return a.createElement.apply(null,l)}return a.createElement.apply(null,n)}c.displayName="MDXCreateElement"},6660:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>k,contentTitle:()=>h,default:()=>N,frontMatter:()=>v,metadata:()=>f,toc:()=>T});var a=n(3117),r=n(7294),o=n(3905),l=n(4334),i=n(2389),p=n(7392),s=n(7094),u=n(2466);const m="tabList__CuJ",c="tabItem_LNqP";function d(e){var t,n;const{lazy:o,block:i,defaultValue:d,values:g,groupId:y,className:b}=e,v=r.Children.map(e.children,(e=>{if((0,r.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),h=null!=g?g:v.map((e=>{let{props:{value:t,label:n,attributes:a}}=e;return{value:t,label:n,attributes:a}})),f=(0,p.l)(h,((e,t)=>e.value===t.value));if(f.length>0)throw new Error(`Docusaurus error: Duplicate values "${f.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const k=null===d?d:null!=(t=null!=d?d:null==(n=v.find((e=>e.props.default)))?void 0:n.props.value)?t:v[0].props.value;if(null!==k&&!h.some((e=>e.value===k)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${k}" but none of its children has the corresponding value. Available values are: ${h.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:T,setTabGroupChoices:w}=(0,s.U)(),[N,x]=(0,r.useState)(k),j=[],{blockElementScrollPositionUntilNextRender:I}=(0,u.o5)();if(null!=y){const e=T[y];null!=e&&e!==N&&h.some((t=>t.value===e))&&x(e)}const C=e=>{const t=e.currentTarget,n=j.indexOf(t),a=h[n].value;a!==N&&(I(t),x(a),null!=y&&w(y,String(a)))},O=e=>{var t;let n=null;switch(e.key){case"ArrowRight":{var a;const t=j.indexOf(e.currentTarget)+1;n=null!=(a=j[t])?a:j[0];break}case"ArrowLeft":{var r;const t=j.indexOf(e.currentTarget)-1;n=null!=(r=j[t])?r:j[j.length-1];break}}null==(t=n)||t.focus()};return r.createElement("div",{className:(0,l.Z)("tabs-container",m)},r.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,l.Z)("tabs",{"tabs--block":i},b)},h.map((e=>{let{value:t,label:n,attributes:o}=e;return r.createElement("li",(0,a.Z)({role:"tab",tabIndex:N===t?0:-1,"aria-selected":N===t,key:t,ref:e=>j.push(e),onKeyDown:O,onFocus:C,onClick:C},o,{className:(0,l.Z)("tabs__item",c,null==o?void 0:o.className,{"tabs__item--active":N===t})}),null!=n?n:t)}))),o?(0,r.cloneElement)(v.filter((e=>e.props.value===N))[0],{className:"margin-top--md"}):r.createElement("div",{className:"margin-top--md"},v.map(((e,t)=>(0,r.cloneElement)(e,{key:t,hidden:e.props.value!==N})))))}function g(e){const t=(0,i.Z)();return r.createElement(d,(0,a.Z)({key:String(t)},e))}const y="tabItem_Ymn6";function b(e){let{children:t,hidden:n,className:a}=e;return r.createElement("div",{role:"tabpanel",className:(0,l.Z)(y,a),hidden:n},t)}const v={sidebar_position:5},h="Using the player",f={unversionedId:"player",id:"player",title:"Using the player",description:"The Geppetto Player is a Typescript library you can use in your web project to embed animations on your website.",source:"@site/docs/player.md",sourceDirName:".",slug:"/player",permalink:"/docs/player",draft:!1,editUrl:"https://github.com/matthijsgroen/geppetto/edit/gh-pages/website/docs/player.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Creating an animation",permalink:"/docs/creating-animation"},next:{title:"Animation playground",permalink:"/docs/playground"}},k={},T=[{value:"Install Player",id:"install-player",level:2},{value:"Setup WebGL",id:"setup-webgl",level:2},{value:"Adding an animation",id:"adding-an-animation",level:2},{value:"Setting up a render loop",id:"setting-up-a-render-loop",level:2},{value:"Controlling an animation",id:"controlling-an-animation",level:2}],w={toc:T};function N(e){let{components:t,...n}=e;return(0,o.kt)("wrapper",(0,a.Z)({},w,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"using-the-player"},"Using the player"),(0,o.kt)("p",null,"The Geppetto Player is a Typescript library you can use in your web project to embed animations on your website."),(0,o.kt)("h2",{id:"install-player"},"Install Player"),(0,o.kt)("p",null,"You can install the library using the ",(0,o.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/geppetto-player"},(0,o.kt)("inlineCode",{parentName:"a"},"geppetto-player"))," npm package."),(0,o.kt)(g,{groupId:"package-manager",mdxType:"Tabs"},(0,o.kt)(b,{value:"npm",label:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"npm install geppetto-player\n"))),(0,o.kt)(b,{value:"yarn",label:"Yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-sh"},"yarn add geppetto-player\n")))),(0,o.kt)("h2",{id:"setup-webgl"},"Setup WebGL"),(0,o.kt)("p",null,"First you need to setup a canvas environment.\nYou can use the ",(0,o.kt)("inlineCode",{parentName:"p"},"setupWebGL")," method to help you with that."),(0,o.kt)(g,{groupId:"coding-language",mdxType:"Tabs"},(0,o.kt)(b,{value:"ts",label:"Typescript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { setupWebGL } from "geppetto-player";\n\nconst canvas = document.getElementById("theatre") as HTMLCanvasElement;\nconst player = setupWebGL(canvas);\n'))),(0,o.kt)(b,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { setupWebGL } from "geppetto-player";\n\nconst canvas = document.getElementById("theatre");\nconst player = setupWebGL(canvas);\n')))),(0,o.kt)("p",null,"This will initialise the ",(0,o.kt)("inlineCode",{parentName:"p"},"WebGL")," context of the ",(0,o.kt)("inlineCode",{parentName:"p"},"<canvas />")," element, and return a player to setup Geppetto animations."),(0,o.kt)("p",null,"With the player you can now add animations to the player. You can setup and use multiple animations in a single player."),(0,o.kt)("h2",{id:"adding-an-animation"},"Adding an animation"),(0,o.kt)("p",null,"To add the animation, you need to convert the animation ",(0,o.kt)("inlineCode",{parentName:"p"},".json")," file created with the studio application to a format optimized for playback."),(0,o.kt)(g,{groupId:"coding-language",mdxType:"Tabs"},(0,o.kt)(b,{value:"ts",label:"Typescript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'import { prepareAnimation, ImageDefinition } from "geppetto-player";\nimport animationData from "my-animation-file.json";\n\nconst preparedAnimation = prepareAnimation(\n  animationData as unknown as ImageDefinition\n);\n'))),(0,o.kt)(b,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'import { prepareAnimation, ImageDefinition } from "geppetto-player";\nimport animationData from "my-animation-file.json";\n\nconst preparedAnimation = prepareAnimation(animationData);\n')))),(0,o.kt)("p",null,"You also need to provide your texture using an ",(0,o.kt)("inlineCode",{parentName:"p"},"Image")," element in javascript."),(0,o.kt)("p",null,"You can load your texture with the example code provided here:"),(0,o.kt)(g,{groupId:"coding-language",mdxType:"Tabs"},(0,o.kt)(b,{value:"ts",label:"Typescript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'const loadTexture = async (url: string): Promise<HTMLImageElement> =>\n  new Promise((resolve) => {\n    const image = new Image();\n    image.crossOrigin = "anonymous";\n    image.src = url;\n    image.onload = () => resolve(image);\n  });\n\nconst animationTexture = await loadTexture("./url-of-texture.png");\n'))),(0,o.kt)(b,{value:"js",label:"JavaScript",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'const loadTexture = async (url) =>\n  new Promise((resolve) => {\n    const image = new Image();\n    image.crossOrigin = "anonymous";\n    image.src = url;\n    image.onload = () => resolve(image);\n  });\n\nconst animationTexture = await loadTexture("./url-of-texture.png");\n')))),(0,o.kt)("p",null,"You can now add your animation to the player, receiving an ",(0,o.kt)("inlineCode",{parentName:"p"},"AnimationControl")," object to control your animation."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const animationControl = player.addAnimation(\n  preparedAnimation,\n  animationTexture,\n  0\n);\n")),(0,o.kt)("h2",{id:"setting-up-a-render-loop"},"Setting up a render loop"),(0,o.kt)("p",null,"In order to make the animation work, you should create a render loop that renders the animation for each frame.\nThe reason we let you setup this loop, is that you will have more control over it."),(0,o.kt)("p",null,"For the animation above, this loop would be simple:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},"const renderFrame = () => {\n  player.render(); // Clear the canvas\n  animationControl.render(); // Render a frame of my first animation\n  // ... for multiple animations, do a render() call for each animationControl\n\n  window.requestAnimationFrame(renderFrame);\n};\n\nwindow.requestAnimationFrame(renderFrame);\n")),(0,o.kt)("h2",{id:"controlling-an-animation"},"Controlling an animation"),(0,o.kt)("p",null,"With the animation now visible, you can start animation tracks, listen to events, or do real-time control manipulations."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-ts"},'animationControl.startTrack("MyAnimation");\nanimationControl.setControlValue("MyControl", 0.65);\n')))}N.isMDXComponent=!0}}]);